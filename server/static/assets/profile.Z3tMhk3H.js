import{u as l,r as n,aC as m,aL as b,j as e,C as g,bb as x,v as y}from"./vendor.MZTBlccq.js";import{f as P,e as j,g as L,h as V,U as w}from"./components.DrT3irCF.js";import{f as A}from"./contexts.CtRMsfFk.js";import{a as C}from"./index.DO_kQ9cN.js";import"./vite.BF1G3H_w.js";import"./base.De0_vyxt.js";import"./client.Dg5rJVxZ.js";import"./ai.BF2dfzH9.js";import"./authorization.CzBsDemo.js";import"./system.BIGnZ09Q.js";import"./oauth.B6uu0z-z.js";const D=()=>{const{t:a}=l("authorization"),{t:c}=l("common"),{user:s,updateUser:f}=A(),[u,i]=n.useState(!1),d=m(),r=b(),p=r.hash.replace("#","")||"basic",o=async()=>{try{i(!0);const t=await C.authorization.getCurrentUser();f(t)}catch(t){y.error(c("fetchFailed",{defaultValue:"Failed to fetch data"})),console.error("Failed to fetch user profile:",t)}finally{i(!1)}};n.useEffect(()=>{o()},[]);const h=[{key:"basic",label:a("profile.basic",{defaultValue:"Basic Information"}),children:e.jsx(P,{user:s,onSuccess:o})},{key:"password",label:a("profile.password",{defaultValue:"Password"}),disabled:s==null?void 0:s.disable_change_password,children:e.jsx(j,{})},{key:"mfa",label:a("profile.mfa",{defaultValue:"Multi-Factor Authentication"}),children:e.jsx(L,{user:s,onSuccess:o})},{key:"sessions",label:a("profile.sessions",{defaultValue:"Sessions"}),children:e.jsx(V,{})},{key:"auditLogs",label:a("profile.auditLogs",{defaultValue:"Audit Logs"}),children:e.jsx(w,{})}];return e.jsx(g,{title:a("profile.title",{defaultValue:"Profile Settings"}),loading:u,children:e.jsx(x,{defaultActiveKey:p,onChange:t=>{d(`${r.pathname}#${t}`)},items:h,destroyInactiveTabPane:!0})})};export{D as default};
