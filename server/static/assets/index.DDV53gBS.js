const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.BojifXox.js","assets/vendor.B6JBhCAY.js","assets/vite.BF1G3H_w.js","assets/lodash.BDtH7uFP.js","assets/highlight.BslI14e2.js","assets/vendor.D-Ncpkvi.css","assets/contexts.B8ZCWCcl.js","assets/client.C_z0mq-g.js","assets/base.BXKr0a0H.js","assets/chartjs.76IB8Qxh.js","assets/components.AJXUxw-E.js","assets/ant-design-x.BIkQt4u4.js","assets/highlighter.06nRe2Bn.js","assets/refractor.CIIjg-xe.js","assets/mermaid.X6yIL1F5.js","assets/ant-design-x.C1GP9Q3x.css","assets/ai.BlO1DqPv.js","assets/authorization.B5peLd2a.js","assets/system.BGeF3M7c.js","assets/oauth.ClVdJKPp.js","assets/ai-chat-layout.3AQYkpNZ.js","assets/login.D47_x7kK.js","assets/profile.BsCw2X9q.js","assets/not_found.CB7gwSpw.js","assets/forbidden.95SRtSkz.js","assets/users.C995Nyyy.js","assets/roles.D-eiM4bS.js","assets/system-settings.CG1bPG2p.js","assets/audit.D0YTKeTn.js","assets/service-accounts.Ce_sgc04.js"])))=>i.map(i=>d[i]);
import{a as ge}from"./ai.BlO1DqPv.js";import{a as ye}from"./authorization.B5peLd2a.js";import{b as ve,g as oe}from"./base.BXKr0a0H.js";import{s as be}from"./system.BGeF3M7c.js";import{o as je}from"./oauth.ClVdJKPp.js";import{_ as d}from"./vite.BF1G3H_w.js";import{r as s,j as e,ba as we,bb as ze,bc as D,bd as Ee,be as Ie,bf as Le,bg as C,bh as $,c as Re,bi as Ae,u as M,bj as Se,b5 as Pe,bk as N,bl as J,bm as ke,h as u,bn as X,bo as Z,bp as Ne,S as De,f as $e,B as Oe,bq as Te,br as Ve,bs as Be,bt as Ce,bu as Me,bv as Fe,bw as Ue,bx as Ke,by as qe,bz as F,bA as He,bB as Qe,bC as Ge,C as We,bD as Ye,bE as Je,bF as ee,bG as Xe}from"./vendor.B6JBhCAY.js";import{L as Ze,H as B,O as et,A as te,a as tt,P as at}from"./components.AJXUxw-E.js";import{u as it,b as st,a as nt,c as ot,A as rt,S as lt,e as ct}from"./contexts.B8ZCWCcl.js";import{A as dt,a as mt,b as ht}from"./ai-chat-layout.3AQYkpNZ.js";import{f as ut}from"./lodash.BDtH7uFP.js";import"./client.C_z0mq-g.js";import"./highlight.BslI14e2.js";import"./index.DDV53gBS.js";import"./ant-design-x.BIkQt4u4.js";import"./highlighter.06nRe2Bn.js";import"./refractor.CIIjg-xe.js";import"./mermaid.X6yIL1F5.js";const pt=s.lazy(()=>d(()=>import("./dashboard.BojifXox.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),xt=s.lazy(()=>d(()=>import("./login.D47_x7kK.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18,19,20]))),ft=s.lazy(()=>d(()=>import("./profile.BsCw2X9q.js"),__vite__mapDeps([22,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20]))),ae=s.lazy(()=>d(()=>import("./not_found.CB7gwSpw.js"),__vite__mapDeps([23,1,2,3,4,5]))),_t=s.lazy(()=>d(()=>import("./forbidden.95SRtSkz.js"),__vite__mapDeps([24,1,2,3,4,5]))),gt=s.lazy(()=>d(()=>import("./users.C995Nyyy.js").then(a=>a.U),__vite__mapDeps([25,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),yt=s.lazy(()=>d(()=>import("./users.C995Nyyy.js").then(a=>a.a),__vite__mapDeps([25,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),ie=s.lazy(()=>d(()=>import("./users.C995Nyyy.js").then(a=>a.b),__vite__mapDeps([25,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),vt=s.lazy(()=>d(()=>import("./roles.D-eiM4bS.js").then(a=>a.R),__vite__mapDeps([26,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),se=s.lazy(()=>d(()=>import("./roles.D-eiM4bS.js").then(a=>a.a),__vite__mapDeps([26,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),bt=s.lazy(()=>d(()=>import("./system-settings.CG1bPG2p.js").then(a=>a.i),__vite__mapDeps([27,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),jt=s.lazy(()=>d(()=>import("./system-settings.CG1bPG2p.js").then(a=>a.O),__vite__mapDeps([27,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),wt=s.lazy(()=>d(()=>import("./system-settings.CG1bPG2p.js").then(a=>a.S),__vite__mapDeps([27,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),zt=s.lazy(()=>d(()=>import("./system-settings.CG1bPG2p.js").then(a=>a.a),__vite__mapDeps([27,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),Et=s.lazy(()=>d(()=>import("./system-settings.CG1bPG2p.js").then(a=>a.b),__vite__mapDeps([27,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),It=s.lazy(()=>d(()=>import("./audit.D0YTKeTn.js"),__vite__mapDeps([28,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20]))),Lt=s.lazy(()=>d(()=>import("./service-accounts.Ce_sgc04.js").then(a=>a.S),__vite__mapDeps([29,1,2,3,4,5,10,6,7,8,11,12,13,14,15,23]))),Rt=s.lazy(()=>d(()=>import("./service-accounts.Ce_sgc04.js").then(a=>a.a),__vite__mapDeps([29,1,2,3,4,5,10,6,7,8,11,12,13,14,15,23])));function c(a,r){return e.jsx(s.Suspense,{fallback:e.jsx(Ze,{}),children:e.jsx(a,{...r})})}const At=({transformSettingTabs:a,transformLangConfig:r,extraPrivateRoutes:_=[],extraPublicRoutes:E=[]})=>{const j=[{path:"/login",element:c(xt,{transformLangConfig:r}),index:!0},{path:"/404",element:c(ae),index:!0},{path:"/403",element:c(_t),index:!0},{path:"/system/settings/oauth/test-callback",element:c(Et),index:!0},...E],I=[{path:"/",is_private:!0,children:[{path:"/",element:c(pt),name:"dashboard",icon:e.jsx(we,{}),index:!0},{path:"/profile",element:c(ft),name:void 0,index:!0},..._,{name:"authorization",icon:e.jsx(D,{}),permissions:["authorization:user:list","authorization:service_account:list","authorization:role:list"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(ze,{}),permissions:["authorization:role:list"],children:[{element:c(vt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:c(se),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:c(se),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(D,{}),permissions:["authorization:user:list"],children:[{element:c(gt),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:c(ie),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:c(yt),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:c(ie),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(D,{}),permissions:["authorization:service_account:list"],children:[{element:c(Lt),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:c(Rt),permissions:["authorization:service_account:view"],index:!0}]}]},{name:"system",icon:e.jsx(Le,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view","system:skills:view"],children:[{path:"/system/settings",icon:e.jsx(Ee,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view","system:skills:view"],children:[{path:"/system/settings",index:!0,element:c(bt,{transformItems:a})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:c(jt),index:!0},{path:"/system/settings/skills/:id/edit",permissions:["system:skills:edit_files"],element:c(wt),index:!0},{path:"/system/settings/skills/:id/preview",permissions:["system:skills:view"],element:c(zt),index:!0}]},{path:"/system/audit",icon:e.jsx(Ie,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:c(It)}]},{path:"*",element:c(ae),index:!0}]}];return[...j,...I]},sa={ai:ge,authorization:ye,base:ve,system:be,oauth:je},{Header:St,Content:Pt,Footer:kt,Sider:Nt}=C,{SubMenu:Dt}=$,$t=Re(({token:a,css:r})=>({layout:r`
      min-height: 100vh;
      display: flex;
      flex-direction: row;
    `,header:r`
      padding: 0;
      display: flex;
      justify-content: space-between;
      background-color: ${a.colorBgContainer};
      border-block-end: 1px solid ${a.colorBorderSecondary};
    `,footer:r`
      text-align: center;
      padding: 15px 50px;
    `,contentContainer:r`
      padding: 24px;
      background-color: ${a.colorBgContainer};
    `,content:r`
      margin: 0 16px;
      height: calc(100vh - 120px);
      overflow: auto;
    `,mainLayout:r`
      flex: 1;
      min-width: 0;
      background-color: ${a.colorBgContainer};
    `,breadcrumb:r`
      margin-left: 8px;
    `,headerItems:r`
      margin-right: 20px;
    `,userName:r`
      height: 1em;
      line-height: 1em;
      margin-left: 5px;
    `,themeSwitch:r`
      display: inline-flex;
    `,menuSider:r`
      .ant-layout-sider-children{
        display: flex;
        flex-direction: column;
      }
    `,menuToggleButton:r`
      &&{
        font-size: 16px;
        width: 64px;
        height: 64px;
      }
    `,layoutLogo:r`
      margin: 8px;
      display: flex;
    `,layoutLogoContainer:r`
      width: 100%;
      height: 100%;
      text-align: center;
    `,layoutLogoImage:r`
      height: 32px;
      width: 32px;
    `,menu:r`
      flex: 1 1 0%;
    `})),Ot=({element:a,siderWidth:r=250,routes:_,transformLangConfig:E,menuStyle:j="dark",transformHeaderItems:I=w=>w,renderLayout:O})=>{const{themeMode:w,setThemeMode:p,isDarkMode:S}=Ae(),{styles:m}=$t(),{layout:z,visible:L,loaded:R}=it(),{t:g,i18n:x}=M(),{t:n}=M("common"),y=Se(),{hasPermission:P}=st(),A=Pe(),{logout:re,user:h}=nt(),{siteConfig:o,clearCurrentOrgId:le}=ot(),[U,K]=s.useState([]),[ce,de]=s.useState(null),[T,me]=s.useState("Loading...");y.pathname!=="/profile"&&(h&&h.mfa_enforced&&!h.mfa_enabled?A("/profile#mfa"):h&&h.status==="password_expired"&&A("/profile#password"));const he=()=>{re(),le(),window.location.href=oe("/login?redirect="+encodeURIComponent(window.location.href))},ue=[{key:"profile",label:e.jsx(N,{to:"/profile",children:n("profile")})},{key:"logout",label:n("logout"),onClick:he}];s.useEffect(()=>{var i,l;if(o){const b=((i=o.navigation)==null?void 0:i.filter(f=>f.path!==o.home_page))??[],t=[...o.home_page?[{name:"home",path:o.home_page}]:[],...b];t.length>1?K(t):K([]),de(o.logo),(l=document.getElementById("site-icon"))==null||l.setAttribute("href",o.logo)}},[o]),s.useEffect(()=>{x.language&&me((o==null?void 0:o.name_i18n[x.language])||(o==null?void 0:o.name)||"")},[o,x.language]);const V=()=>{const i=J(_,y.pathname),l=[];if(i){for(const[b,t]of i.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:n("home"),key:"home"});else if(t.route.name){const f=i.slice(0,b+1).map(v=>v.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?g(`breadcrumbs.${f}`):void 0,key:t.route.path})}}return l},pe=i=>i.some(l=>P(l)),xe=ut(_,i=>i.children).map(i=>i==null?void 0:i.name).filter(i=>i!==void 0),q=(i,l=[])=>{const b=t=>t&&t.replace(/_/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return i.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!pe(t.permissions))return null;const f=b(t.name);if(!t.name)return null;if("children"in t&&t.children){const v=q(t.children,[...l,t.name]);return v.length==0&&t.path?e.jsx($.Item,{icon:t.icon,children:e.jsx(N,{to:t.path,children:g(`menu.${[...l,t.name].join(".")}`,{defaultValue:f})})},t.path):e.jsx(Dt,{icon:t.icon,title:g(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:f}),children:v},t.path??t.name)}return t.name&&t.path?e.jsx($.Item,{icon:t.icon,children:e.jsx(N,{to:t.path,children:g(`menu.${[...l,t.name].join(".")}`,{defaultValue:f})})},t.path):null}).filter(Boolean)};s.useEffect(()=>{const i=V().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");i?document.title=`${T} | ${i}`:document.title=T},[V,y.pathname]);const fe=s.useMemo(()=>{const i=J(_,y.pathname);if(i){for(const l of i.reverse())if(l.route.path&&l.route.name)return l.route.path}return y.pathname},[y.pathname]),_e=[e.jsx(B,{className:"header-item navigation-dropdown",hidden:U.length<=1,menu:{items:U.map(i=>({key:i.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:i.path,children:g(`menu.${i.name}`,{defaultValue:i.name})})}))},children:e.jsx(ke,{})},"navigation-dropdown"),...o!=null&&o.enable_multi_org?[e.jsx(et,{className:"header-item org-switcher"},"org-switcher")]:[],e.jsxs(B,{className:"header-item user-dropdown",menu:{items:ue},children:[h!=null&&h.avatar?e.jsx(te,{src:h.avatar}):e.jsx(te,{icon:e.jsx(D,{})}),e.jsx("span",{className:u("header-user-name",m.userName),children:(h==null?void 0:h.full_name)||(h==null?void 0:h.username)})]},"user-dropdown"),e.jsx(tt,{className:"header-item language-switch",transformLangConfig:E},"language-switch"),e.jsx(B,{className:"header-item theme-switch",menu:{items:[{key:"light",label:e.jsxs("span",{children:[e.jsx(X,{})," ",n("light",{defaultValue:"Light Mode"})]})},{key:"dark",label:e.jsxs("span",{children:[e.jsx(Z,{})," ",n("dark",{defaultValue:"Dark Mode"})]})}],onClick:({key:i})=>{p(i)},selectedKeys:[w]},children:w==="light"?e.jsx(X,{}):e.jsx(Z,{})},"theme-switch")];return(O??((i,l,b,t,f)=>{var Q,G,W;const[v,H]=s.useState(!1);return e.jsxs(C,{className:u("main-layout",m.layout),children:[e.jsxs(Nt,{width:r,collapsible:!0,collapsed:v,onCollapse:H,className:u(m.menuSider,"layout-menu-sider"),theme:S?"light":j,children:[e.jsx("div",{className:u("logo",m.layoutLogo),children:e.jsx("div",{className:u("layout-logo-container",m.layoutLogoContainer),children:i?e.jsx("img",{src:i,alt:"logo",className:m.layoutLogoImage}):e.jsx(De,{size:"large",tip:"Loading..."})})}),e.jsx($,{className:u("layout-menu",m.menu),theme:S?"light":j,defaultOpenKeys:xe,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[fe],children:l})]}),e.jsxs(C,{className:u("site-layout","main-layout",m.mainLayout),children:[e.jsxs(St,{className:u("site-header",m.header),children:[e.jsxs($e,{children:[e.jsx(Oe,{type:"text",icon:v?e.jsx(Te,{}):e.jsx(Ve,{}),onClick:()=>H(!v),className:u("layout-menu-toggle",m.menuToggleButton)}),e.jsx(Be,{className:u("site-breadcrumb",m.breadcrumb),itemRender:k=>{const Y=k.href||k.path;return Y?e.jsx(N,{to:Y,children:k.title}):e.jsx("span",{children:k.title})},items:t})]}),e.jsx("div",{className:u("header-items",m.headerItems),children:b})]}),e.jsxs(Pt,{className:u("site-content",m.content),children:[e.jsx("div",{className:u("site-content-container",m.contentContainer),children:f}),((Q=o==null?void 0:o.attrs)==null?void 0:Q.ai_enabled)&&e.jsx(dt,{}),((G=o==null?void 0:o.attrs)==null?void 0:G.ai_enabled)&&z==="classic"&&(L||R)&&e.jsx(mt,{})]}),e.jsxs(kt,{className:u("site-footer",m.footer),children:[" Â©",new Date().getFullYear()," ",T]})]}),((W=o==null?void 0:o.attrs)==null?void 0:W.ai_enabled)&&(z==="sidebar"||z==="float-sidebar")&&(L||R)&&e.jsx(ht,{})]})}))(ce,q(_),I(_e),V(),a??e.jsx(Ne,{}))},Tt=new Ce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),ne={"zh-CN":He,"en-US":F,"de-DE":qe,"es-ES":Ke,"fr-FR":Ue,"ar-AE":Fe,"sv-SE":Me};function Vt({transformRouter:a=p=>p,transformSettingTabs:r=p=>p,transformLangConfig:_=p=>p,extraPrivateRoutes:E=[],extraPublicRoutes:j=[],menuStyle:I="dark",transformHeaderItems:O=p=>p,renderLayout:w}){const{i18n:p}=M(),[S,m]=s.useState(ne[p.language]||F);s.useEffect(()=>{m(ne[p.language]||F)},[p.language]);const z=g=>g.map(x=>x.children===void 0?x:{...x,children:z(x.children)}),L=a(z(At({transformSettingTabs:r,transformLangConfig:_,extraPrivateRoutes:E,extraPublicRoutes:j}))),R=(g,x)=>g.flatMap(n=>n.is_private?[n]:"children"in n&&n.children?n.children:[n]).map((n,y)=>{const P=n.is_private?e.jsx(at,{element:e.jsx(Ot,{routes:L,element:n.element,transformLangConfig:_,menuStyle:I,transformHeaderItems:O,renderLayout:w})}):n.element;if("children"in n&&n.children&&n.children.length>0)return e.jsx(ee,{path:n.path,element:P,children:R(n.children,n)},n.path??n.name??y);const{path:A}=n;return e.jsx(ee,{path:A,index:n.index,element:P},A??n.name??`${(x==null?void 0:x.path)??""}.${y}`)}).filter(Boolean);return e.jsx(Qe,{client:Tt,children:e.jsx(Ge,{children:e.jsx(We,{locale:S,children:e.jsx(rt,{children:e.jsx(lt,{children:e.jsx(ct,{children:e.jsx(Ye,{basename:oe(),children:e.jsx(Je,{children:R(L)})})})})})})})})}Xe.createRoot(document.getElementById("root")).render(e.jsx(Vt,{}));export{sa as a,c as w};
