import{aI as J,u as I,aM as p,r as w,a as y,j as e,S as M,be as ee,bm as he,T as v,p as pe,di as V,aS as xe,dc as ae,dH as ge,bK as je,dx as Ve,dI as we,e as ye,aq as B,a$ as Q,b0 as L,ao as F,b2 as Z,g as T,f as N,B as b,d as H,dJ as be,dK as _e,a_ as ke,M as O,s as i,W as se,dd as te,d9 as re,dp as U,dz as Ee,b5 as Ue}from"./vendor.CyaXoMFn.js";import{A as le,i as ze,f as Y,U as Pe,k as ve}from"./components.BXKFJ6ns.js";import{a as x}from"./index.Dwpr26wG.js";import{P as D,f as q}from"./base.CIILqgsu.js";import{c as K,b as Se}from"./contexts.DcBdfNkE.js";import{A as Ce}from"./client.CicVKWRR.js";const{Option:$}=T,Ie=({user:l,onClose:g,onSuccess:a})=>{const{t:o}=I("authorization"),[h,c]=w.useState(null),[u,_]=w.useState(null),{run:z,loading:P}=y(x.authorization.updateUser,{onSuccess:()=>{i.success(o("user.updateUserSuccess",{defaultValue:"User updated successfully"})),a()},onError:n=>{i.error(o("user.updateUserError",{defaultValue:"Failed to update user",error:n.message}))},manual:!0}),{data:j,loading:k}=y(async()=>h==="bind"?x.authorization.getLdapUsers({skip_existing:!0}).then(n=>{const E=[],m=[];for(const f of n)f.username===(l==null?void 0:l.username)||f.email===(l==null?void 0:l.email)||f.full_name===(l==null?void 0:l.full_name)?E.push({recommend:!0,...f}):m.push({recommend:!1,...f});return[...E,...m]}):Promise.resolve([]),{refreshDeps:[l==null?void 0:l.id,h]});return w.useEffect(()=>{l&&(c(null),_(null))},[l]),e.jsx(O,{open:l!==null,onCancel:g,onOk:()=>{if(l){if(h==="local")return z({id:l.id},{source:"local"});if(h==="bind"){if(!u){i.error(o("user.ldapUserDNRequired",{defaultValue:"LDAP User DN is required"}));return}return z({id:l.id},{source:"ldap",ldap_dn:u})}else{i.error(o("user.unknownFixMethod",{defaultValue:"Unknown fix method"}));return}}i.error(o("user.unknownUserId",{defaultValue:"Unknown user id"}))},title:o("user.fixUserTitle",{defaultValue:"Fix User"}),children:e.jsxs(N,{direction:"vertical",style:{width:"100%"},children:[e.jsx(b,{loading:P,style:{width:"100%",height:40},type:"default",variant:"outlined",color:h==="local"?"primary":"default",onClick:()=>c("local"),children:o("user.fixUserConvertToLocal",{defaultValue:"Convert to Local"})}),e.jsx(b,{loading:P,style:{width:"100%",height:40},type:"default",variant:"outlined",color:h==="bind"?"primary":"default",onClick:()=>c("bind"),children:o("user.fixUserBindLDAPUser",{defaultValue:"Bind LDAP User"})}),e.jsx(T,{loading:k,style:{display:h==="bind"?"block":"none"},onSelect:n=>_(n),options:j==null?void 0:j.map(n=>({label:e.jsxs("div",{children:[e.jsx(v,{color:n.recommend?"blue":"default",children:n.full_name})," ",n.username," - ",n.email," - ",n.ldap_dn]}),value:n.ldap_dn})),showSearch:!0})]})})},Re=()=>{const{addTask:l}=K(),g=J(),{t:a}=I("authorization"),{t:o}=I("common"),[h]=p.useForm(),[c,u]=w.useState([]),[_,z]=w.useState(0),{enableMultiOrg:P}=K(),[j,k]=w.useState(null),[n,E]=w.useState({current:D.DEFAULT_CURRENT,page_size:D.DEFAULT_PAGE_SIZE,keywords:void 0,status:void 0}),{data:m,loading:f}=y(async()=>(await x.system.listOrganizations({current:1,page_size:1e3})).data||[],{refreshDeps:[P],onError:s=>{i.error(a("organizations.loadError",{defaultValue:"Failed to load organizations",error:s.message}))},cacheKey:"fetchAllOrganizations",cacheTime:1e3*60*10}),R=w.useCallback((s,t)=>{if(f)return e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"small"}),":",t.name]});const S=m==null?void 0:m.find(C=>C.id===s);return S?`${S.name}:${t.name}`:t.name},[m,f]),{run:r,loading:d}=y(()=>{const s={status:n.status,keywords:n.keywords};return x.authorization.listUsers({current:n.current,page_size:n.page_size,...s})},{onSuccess:s=>{u(s.data||[]),z(s.total||0)},onError:s=>{i.error(a("user.loadError",{defaultValue:"Failed to load users",error:s.message}))},refreshDeps:[n]}),A=s=>{E({...n,current:D.DEFAULT_CURRENT,keywords:s.keywords,status:s.status})},G=()=>{h.resetFields(),E({current:D.DEFAULT_CURRENT,page_size:D.DEFAULT_PAGE_SIZE,keywords:void 0,status:void 0})},ue=(s,t)=>{E(S=>({...S,current:s,page_size:t}))},{run:ne}=y(x.authorization.restoreUser,{onSuccess:()=>{i.success(a("user.restoreSuccess",{defaultValue:"User restored successfully"})),r()},onError:s=>{i.error(a("user.restoreError",{defaultValue:"Failed to restore user",error:s.message}))},manual:!0}),{run:oe}=y(x.authorization.deleteUser,{onSuccess:()=>{i.success(a("user.deleteSuccess",{defaultValue:"User deleted successfully"})),r()},onError:s=>{i.error(a("user.deleteError",{defaultValue:"Failed to delete user",error:s.message}))},manual:!0}),ie=(s,t,S)=>{O.confirm({title:a("user.resetPasswordTitle",{defaultValue:"Reset Password"}),content:a("user.resetPasswordConfirm",{defaultValue:`Are you sure you want to reset the password for ${t}?`,username:t}),okText:o("confirm",{defaultValue:"Confirm"}),cancelText:o("cancel",{defaultValue:"Cancel"}),onOk:async()=>{try{const C=await x.authorization.resetUserPassword({id:s},{password:""});i.success(a("user.resetPasswordSuccess",{defaultValue:"Password reset successfully"})),C.new_password?O.info({title:a("user.resetPasswordSuccess",{defaultValue:"Password Reset Successfully"}),content:e.jsx(se.Text,{copyable:{text:C.new_password},children:a("user.resetPasswordSuccessContent",{defaultValue:`New password: ${C.new_password}`,password:C.new_password})})}):O.info({title:a("user.resetPasswordSuccess",{defaultValue:"Password Reset Successfully"}),content:a("user.resetPasswordSuccessSendByEmail",{defaultValue:"The new password has been sent to the user email: {{email}}",email:S})})}catch(C){console.error("Reset password error:",C),i.error(a("user.resetPasswordError",{defaultValue:"Failed to reset password"}))}}})},{run:de,loading:ce}=y(()=>x.authorization.createUserExportTask({keywords:n.keywords,status:n.status}),{onSuccess:s=>{s.id?i.success(a("user.exportTaskCreated",{defaultValue:"Export task created. You can view progress and download the file from the task list."})):i.success(a("user.exportTaskCreatedShort",{defaultValue:"Export task created."})),l(s)},onError:s=>{i.error(a("user.exportError",{defaultValue:"Failed to create export task",error:(s==null?void 0:s.message)??String(s)}))},manual:!0}),fe=s=>{O.confirm({title:a("user.unlockTitle",{defaultValue:"Unlock User"}),content:a("user.unlockConfirm",{defaultValue:"Are you sure you want to unlock this user?",username:s.username}),onOk:async()=>{try{await x.authorization.unlockUser({id:s.id}),i.success(a("user.unlockSuccess",{defaultValue:"User unlocked successfully"})),r()}catch(t){i.error(a("user.unlockError",{defaultValue:"Failed to unlock user: {{error}}",error:t.message??String(t)}))}}})},me=[{title:a("user.username",{defaultValue:"Username"}),key:"user",render:(s,t)=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(le,{size:"small",icon:e.jsx(ee,{}),src:t.avatar,style:{marginRight:8}}),e.jsx(he,{to:`/authorization/users/${t.id}`,children:t.username})]})},{title:a("user.fullName",{defaultValue:"Full Name"}),dataIndex:"full_name",key:"full_name"},{title:a("user.email",{defaultValue:"Email"}),dataIndex:"email",key:"email"},{title:a("user.source",{defaultValue:"Source"}),dataIndex:"source",key:"source",render:(s,t)=>{switch(s){case"ldap":return t.ldap_dn?e.jsx(v,{color:"blue",children:a("user.sourceLdap",{defaultValue:"LDAP"})}):e.jsx(pe,{title:a("user.ldapUserNotBound",{defaultValue:"LDAP User is not bound to any local user, please bind it."}),children:e.jsx(v,{color:"red",children:a("user.sourceLdap",{defaultValue:"LDAP"})})});case"oauth2":return e.jsx(v,{color:"green",children:a("user.sourceOauth2",{defaultValue:"OAuth2"})});default:return e.jsx(v,{color:"default",children:a("user.sourceLocal",{defaultValue:"Local"})})}}},{title:a("user.status",{defaultValue:"Status"}),dataIndex:"status",key:"status",render:s=>{switch(s){case"disabled":return e.jsx(V,{status:"default",text:a("user.statusEnum.disabled",{defaultValue:"Disabled"})});case"password_expired":return e.jsx(V,{status:"warning",text:a("user.statusEnum.password_expired",{defaultValue:"Password Expired"})});case"active":return e.jsx(V,{status:"success",text:a("user.statusEnum.active",{defaultValue:"Active"})});case"locked":return e.jsx(V,{status:"warning",text:a("user.statusEnum.locked",{defaultValue:"Locked"})});case"deleted":return e.jsx(V,{status:"error",text:a("user.statusEnum.deleted",{defaultValue:"Deleted"})});default:return e.jsx(V,{status:"default",text:a(`user.statusEnum.${s}`,{defaultValue:s.charAt(0).toUpperCase()+s.slice(1)})})}}},{title:a("user.roles",{defaultValue:"Roles"}),dataIndex:"roles",key:"roles",render:s=>e.jsx("span",{children:s&&s.length>0?s.map(t=>e.jsx(v,{color:"blue",children:t.organization_id?R(t.organization_id,t):t.name},t.id)):e.jsx(v,{children:a("user.noRole",{defaultValue:"No Role"})})})},{title:a("user.mfa",{defaultValue:"MFA"}),dataIndex:"mfa_enabled",key:"mfa_enabled",render:s=>s?e.jsx(V,{status:"success",text:a("user.mfaEnabled",{defaultValue:"Enabled"})}):e.jsx(V,{status:"default",text:a("user.mfaDisabled",{defaultValue:"Disabled"})})},{title:a("user.lastLogin",{defaultValue:"Last Login"}),dataIndex:"last_login",key:"last_login",render:s=>s?q(s):a("user.neverLogin",{defaultValue:"Never"})},{title:o("actions",{defaultValue:"Actions"}),key:"action",width:150,render:(s,t)=>{const S=[{key:"view",permission:"authorization:user:view",icon:e.jsx(xe,{}),tooltip:a("user.viewDetail",{defaultValue:"View Detail"}),onClick:async()=>g(`/authorization/users/${t.id}`)},{key:"edit",permission:"authorization:user:update",icon:e.jsx(ae,{}),tooltip:a("user.edit",{defaultValue:"Edit"}),hidden:t.status==="locked"||t.status==="deleted",onClick:async()=>g(`/authorization/users/${t.id}/edit`)},{key:"unlock",permission:"authorization:user:update",icon:e.jsx(ge,{}),tooltip:a("user.unlock",{defaultValue:"Unlock"}),hidden:t.status!=="locked",onClick:async()=>fe(t)},{key:"resetPassword",permission:"authorization:user:resetPassword",icon:e.jsx(je,{}),disabled:t.disable_change_password,tooltip:t.disable_change_password?a("user.resetPasswordDisabled",{defaultValue:"The current system prohibits modifying the password of this user."}):a("user.resetPassword",{defaultValue:"Reset Password"}),hidden:!((t.source==="local"||t.source==="ldap"&&t.ldap_dn)&&t.status!=="deleted"),onClick:async()=>ie(t.id,t.username,t.email)},{key:"fixUser",permission:"authorization:user:update",icon:e.jsx(Ve,{}),tooltip:a("user.fixUser",{defaultValue:"Fix User"}),hidden:!(t.source==="ldap"&&!t.ldap_dn&&t.status!=="deleted"),onClick:async()=>k(t)},{key:"restore",permission:"authorization:user:update",icon:e.jsx(we,{}),tooltip:a("user.restore",{defaultValue:"Restore"}),hidden:t.status!=="deleted",confirm:{title:a("user.restoreConfirm",{defaultValue:"Are you sure you want to restore this user?"}),onConfirm:async()=>ne({id:t.id})}},{key:"delete",permission:"authorization:user:delete",icon:e.jsx(ye,{}),tooltip:a("user.delete",{defaultValue:"Delete"}),danger:!0,confirm:{title:a("user.deleteConfirm",{defaultValue:"Are you sure you want to delete this user?"}),onConfirm:()=>oe({id:t.id}),okText:o("confirm",{defaultValue:"Confirm"}),cancelText:o("cancel",{defaultValue:"Cancel"})}}];return e.jsx(ze,{actions:S},"actions")}}];return e.jsxs("div",{children:[e.jsx(B,{style:{marginBottom:16},children:e.jsx(p,{form:h,layout:"inline",onFinish:A,children:e.jsxs(Q,{gutter:16,style:{width:"100%"},children:[e.jsx(L,{span:6,children:e.jsx(p.Item,{name:"keywords",children:e.jsx(F,{prefix:e.jsx(Z,{}),placeholder:a("user.keywords",{defaultValue:"Search by username, full name, or email"}),allowClear:!0})})}),e.jsx(L,{span:6,children:e.jsx(p.Item,{name:"status",children:e.jsxs(T,{placeholder:a("user.status",{defaultValue:"Status"}),allowClear:!0,style:{width:"100%"},children:[e.jsx($,{value:"active",children:a("user.statusEnum.active",{defaultValue:"Active"})}),e.jsx($,{value:"disabled",children:a("user.statusEnum.disabled",{defaultValue:"Disabled"})}),e.jsx($,{value:"deleted",children:a("user.statusEnum.deleted",{defaultValue:"Deleted"})}),e.jsx($,{value:"locked",children:a("user.statusEnum.locked",{defaultValue:"Locked"})}),e.jsx($,{value:"password_expired",children:a("user.statusEnum.password_expired",{defaultValue:"Password Expired"})})]})})}),e.jsx(L,{span:6,children:e.jsxs(N,{children:[e.jsx(b,{type:"primary",icon:e.jsx(Z,{}),htmlType:"submit",children:o("search",{defaultValue:"Search"})}),e.jsx(b,{icon:e.jsx(H,{}),onClick:G,children:o("reset",{defaultValue:"Reset"})})]})})]})})}),e.jsxs(B,{children:[e.jsxs(Q,{justify:"space-between",align:"middle",gutter:[0,16],children:[e.jsx(L,{children:e.jsx(b,{type:"primary",icon:e.jsx(H,{}),onClick:r,children:o("refresh",{defaultValue:"Refresh"})})}),e.jsx(L,{children:e.jsxs(N,{children:[e.jsx(Y,{permission:"authorization:user:export",children:e.jsx(b,{icon:e.jsx(be,{}),loading:ce,style:{marginBottom:16},onClick:()=>de(),children:a("user.export",{defaultValue:"Export"})})}),e.jsx(Y,{permission:"authorization:user:create",children:e.jsx(b,{type:"primary",icon:e.jsx(_e,{}),style:{marginBottom:16},onClick:()=>g("/authorization/users/create"),children:a("user.create",{defaultValue:"Create User"})})})]})})]}),e.jsx(ke,{columns:me,dataSource:c,rowKey:"id",loading:d,pagination:{current:n.current,pageSize:n.page_size,total:_,showSizeChanger:!0,showQuickJumper:!0,showTotal:s=>o("totalItems",{defaultValue:`Total ${s} items`,total:s}),onChange:ue}})]}),e.jsx(Ie,{user:j,onClose:()=>k(null),onSuccess:()=>{k(null),r()}})]})},Me=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),{Title:Ae}=se,{TabPane:X}=re,Fe=()=>{const{id:l}=te(),g=J(),{t:a}=I("authorization"),{t:o}=I("common"),[h,c]=w.useState(!1),[u,_]=w.useState(null),{hasPermission:z}=Se(),{enableMultiOrg:P}=K(),{data:j,loading:k}=y(async()=>(await x.system.listOrganizations({current:1,page_size:1e3})).data||[],{refreshDeps:[P],onError:m=>{i.error(a("organizations.loadError",{defaultValue:"Failed to load organizations",error:m.message}))},cacheKey:"fetchAllOrganizations",cacheTime:1e3*60*10}),n=w.useCallback((m,f)=>{if(k)return e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"small"}),":",f.name]});const R=j==null?void 0:j.find(r=>r.id===m);return R?`${R.name}:${f.name}`:f.name},[j,k]);if(w.useEffect(()=>{(async()=>{if(l){c(!0);try{const f=await x.authorization.getUser({id:l});_(f)}catch(f){f instanceof Ce&&f.code==="E4041"||(console.error("Failed to get user details:",f),i.error(a("user.detailLoadError",{defaultValue:"Failed to load user details"})))}finally{c(!1)}}})()},[l,a]),h)return e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(M,{size:"large"})});if(!u)return e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx(Ae,{level:4,children:a("user.notFound",{defaultValue:"User not found"})}),e.jsx(b,{type:"primary",onClick:()=>g("/authorization/users"),children:a("user.backToList",{defaultValue:"Back to User List"})})]});const E=()=>u.mfa_enabled?e.jsx(V,{status:"success",text:a("user.mfaEnabled",{defaultValue:"Enabled"})}):u.mfa_enforced?e.jsx(V,{status:"warning",text:a("user.mfaEnforced",{defaultValue:"Enforced"})}):e.jsx(V,{status:"default",text:a("user.mfaDisabled",{defaultValue:"Disabled"})});return e.jsx(B,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(le,{size:64,icon:e.jsx(ee,{}),src:u.avatar,style:{marginRight:16}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:u.username}),e.jsx("div",{style:{color:"#888"},children:u.email})]})]}),extra:e.jsxs(N,{children:[e.jsx(b,{icon:e.jsx(Ee,{}),onClick:()=>g("/authorization/users"),children:o("back",{defaultValue:"Back"})}),e.jsx(b,{type:"primary",icon:e.jsx(ae,{}),onClick:()=>g(`/authorization/users/${l}/edit`),children:o("edit",{defaultValue:"Edit"})})]}),children:e.jsxs(re,{defaultActiveKey:"basic",children:[e.jsx(X,{tab:a("user.basicInfo",{defaultValue:"Basic Information"}),children:e.jsxs(U,{bordered:!0,column:2,style:{marginTop:16},children:[e.jsx(U.Item,{label:a("user.username",{defaultValue:"Username"}),children:u.username}),e.jsx(U.Item,{label:a("user.fullName",{defaultValue:"Full Name"}),children:u.full_name}),e.jsx(U.Item,{label:a("user.email",{defaultValue:"Email"}),children:u.email}),e.jsx(U.Item,{label:a("user.status",{defaultValue:"Status"}),children:u.status==="active"?e.jsx(V,{status:"success",text:a("user.statusActive",{defaultValue:"Active"})}):e.jsx(V,{status:"error",text:a(`user.statusEnum.${u.status}`,{defaultValue:u.status.charAt(0).toUpperCase()+u.status.slice(1)})})}),e.jsx(U.Item,{label:a("user.roles",{defaultValue:"Roles"}),span:2,children:u.roles&&u.roles.length>0?u.roles.map(m=>e.jsx(v,{color:"blue",children:P?n(m.organization_id,m):m.name},m.id)):e.jsx(v,{children:a("user.noRole",{defaultValue:"No Role"})})}),e.jsx(U.Item,{label:a("user.mfa",{defaultValue:"MFA"}),children:E()}),e.jsx(U.Item,{label:a("user.lastLogin",{defaultValue:"Last Login"}),children:u.last_login?q(u.last_login):a("user.neverLogin",{defaultValue:"Never"})}),e.jsx(U.Item,{label:a("user.createdAt",{defaultValue:"Created At"}),children:q(u.created_at)}),e.jsx(U.Item,{label:a("user.updatedAt",{defaultValue:"Updated At"}),children:q(u.updated_at)})]})},"basic"),e.jsx(X,{disabled:!z("authorization:user:view_audit_logs"),tab:a("user.auditLogs",{defaultValue:"Audit Logs"}),children:e.jsx(Pe,{userId:l||""})},"logs")]})})},Be=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),{Option:W}=T,Te=()=>{const{id:l=""}=te(),g=J(),{t:a}=I("authorization"),{t:o}=I("common"),[h]=p.useForm(),c=!!l,{enableMultiOrg:u}=K(),{data:_,loading:z}=y(async()=>(await x.system.listOrganizations({current:1,page_size:1e3})).data||[],{refreshDeps:[u],onError:r=>{i.error(a("organizations.loadError",{defaultValue:"Failed to load organizations",error:r.message}))},cacheKey:"fetchAllOrganizations",cacheTime:1e3*60*10}),P=w.useCallback((r,d)=>{if(z)return e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"small"}),":",d.name]});const A=_==null?void 0:_.find(G=>G.id===r);return A?`${A.name}:${d.name}`:d.name},[_,z]),{data:j,loading:k}=y(async()=>(await x.authorization.listRoles({})).data.map(d=>({...d,label:d.name,value:d.id}))),{loading:n}=y(async()=>{if(!(!c||!h))try{const r=await x.authorization.getUser({id:l});return h.setFieldsValue({username:r.username,email:r.email,full_name:r.full_name,status:r.status,role_ids:r.roles?r.roles.map(d=>d.id):[],mfa_enforced:r.mfa_enforced}),r}catch{i.error(a("user.loadError",{defaultValue:"Failed to load user data"}))}},{refreshDeps:[l,h]}),{run:E,loading:m}=y(async r=>{try{if(c)await x.authorization.updateUser({id:l},{email:r.email,avatar:r.avatar,full_name:r.full_name,status:r.status,mfa_enforced:r.mfa_enforced,role_ids:r.role_ids}),i.success(a("user.updateSuccess",{defaultValue:"User updated successfully"})),g(`/authorization/users/${l}`);else{const d={username:r.username,avatar:r.avatar,password:r.password,email:r.email,full_name:r.full_name,mfa_enforced:r.mfa_enforced,role_ids:r.role_ids},A=await x.authorization.createUser(d);i.success(a("user.createSuccess",{defaultValue:"User created successfully"})),g(`/authorization/users/${A.id}`)}}catch(d){i.error(c?a("user.updateError",{defaultValue:"Failed to update user",error:d}):a("user.createError",{defaultValue:"Failed to create user",error:d}))}},{manual:!0}),f=(r,d)=>c?Promise.resolve():d?d.length<8?Promise.reject(new Error(a("user.passwordTooShort",{defaultValue:"Password must be at least 8 characters long"}))):Promise.resolve():Promise.reject(new Error(a("user.passwordRequired",{defaultValue:"Password is required"}))),R=(r,d)=>c?Promise.resolve():d?d!==h.getFieldValue("password")?Promise.reject(new Error(a("user.passwordMismatch",{defaultValue:"Passwords do not match"}))):Promise.resolve():Promise.reject(new Error(a("user.confirmPasswordRequired",{defaultValue:"Please confirm your password"})));return e.jsx(B,{title:c?a("user.editTitle",{defaultValue:"Edit User"}):a("user.createTitle",{defaultValue:"Create User"}),loading:n||k,children:e.jsxs(p,{form:h,layout:"horizontal",onFinish:E,labelCol:{sm:{span:24},md:{span:6}},wrapperCol:{sm:{span:24},md:{span:18}},size:"middle",style:{maxWidth:"500px",margin:"0 auto"},initialValues:{status:"active",role_ids:[]},children:[e.jsx(p.Item,{name:"avatar",label:a("user.avatar",{defaultValue:"Avatar"}),children:e.jsx(ve,{})}),e.jsx(p.Item,{name:"username",label:a("user.username",{defaultValue:"Username"}),rules:[{required:!c,message:a("user.usernameRequired",{defaultValue:"Username is required"})}],children:e.jsx(F,{disabled:c,placeholder:a("user.usernamePlaceholder",{defaultValue:"Enter username"})})}),e.jsx(p.Item,{name:"email",label:a("user.email",{defaultValue:"Email"}),rules:[{required:!0,message:a("user.emailRequired",{defaultValue:"Email is required"})},{type:"email",message:a("user.emailInvalid",{defaultValue:"Invalid email format"})}],children:e.jsx(F,{placeholder:a("user.emailPlaceholder",{defaultValue:"Enter email address"})})}),e.jsx(p.Item,{name:"full_name",label:a("user.fullName",{defaultValue:"Full Name"}),rules:[{required:!0,message:a("user.fullNameRequired",{defaultValue:"Full name is required"})}],children:e.jsx(F,{placeholder:a("user.fullNamePlaceholder",{defaultValue:"Enter full name"})})}),c&&e.jsx(p.Item,{name:"status",label:a("user.status",{defaultValue:"Status"}),rules:[{required:!0,message:a("user.statusRequired",{defaultValue:"Status is required"})}],children:e.jsxs(T,{placeholder:a("user.statusPlaceholder",{defaultValue:"Select status"}),children:[e.jsx(W,{value:"active",children:a("user.statusActive",{defaultValue:"Active"})}),e.jsx(W,{value:"disabled",children:a("user.statusDisabled",{defaultValue:"Disabled"})}),e.jsx(W,{value:"password_expired",children:a("user.statusEnum.password_expired",{defaultValue:"Password Expired"})})]})}),e.jsx(p.Item,{name:"mfa_enforced",label:a("user.mfaEnforced",{defaultValue:"MFA Enforced"}),children:e.jsx(Ue,{})}),!c&&e.jsxs(e.Fragment,{children:[e.jsx(p.Item,{name:"password",label:a("user.password",{defaultValue:"Password"}),rules:[{validator:f}],children:e.jsx(F.Password,{autoComplete:"new-password",placeholder:a("user.passwordPlaceholder",{defaultValue:"Enter password"})})}),e.jsx(p.Item,{name:"confirm_password",label:a("user.confirmPassword",{defaultValue:"Confirm Password"}),rules:[{validator:R}],dependencies:["password"],children:e.jsx(F.Password,{autoComplete:"new-password",placeholder:a("user.confirmPasswordPlaceholder",{defaultValue:"Confirm password"})})})]}),e.jsx(p.Item,{name:"role_ids",label:a("user.roles",{defaultValue:"Roles"}),children:e.jsx(T,{mode:"multiple",placeholder:a("user.selectRoles",{defaultValue:"Select roles"}),options:j==null?void 0:j.map(r=>({...r,label:u?P(r.organization_id,r):r.name})),optionFilterProp:"label",loading:k})}),e.jsx(p.Item,{wrapperCol:{offset:9},children:e.jsxs(N,{children:[e.jsx(b,{type:"primary",htmlType:"submit",loading:m,children:c?o("update",{defaultValue:"Update"}):o("create",{defaultValue:"Create"})}),e.jsx(b,{onClick:()=>g(c?`/authorization/users/${l}`:"/authorization/users"),children:o("cancel",{defaultValue:"Cancel"})})]})})]})})},Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));export{Me as U,Be as a,Ke as b};
