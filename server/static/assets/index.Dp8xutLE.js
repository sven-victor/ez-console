const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.YORQ93EF.js","assets/vendor.DXrT3tUS.js","assets/vite.BF1G3H_w.js","assets/vendor.DN_eLDEa.css","assets/contexts.WYgP_g0b.js","assets/client.DjvmR9_2.js","assets/base.Bo_VGDGc.js","assets/components.5ga-7_By.js","assets/ai.BdAG9W8N.js","assets/authorization.iO4mAvwW.js","assets/system.tooOd5et.js","assets/oauth.B608q7tL.js","assets/login.CIDkxX2M.js","assets/profile.Co33muyP.js","assets/not_found.BPUlglhS.js","assets/forbidden.ib6moBKw.js","assets/users.Dwy-WXok.js","assets/roles.BoxGYOHn.js","assets/system-settings.ERkH9SNQ.js","assets/audit.C2pCZmOf.js","assets/service-accounts.BkieZfIy.js"])))=>i.map(i=>d[i]);
import{a as se}from"./ai.BdAG9W8N.js";import{a as oe}from"./authorization.iO4mAvwW.js";import{b as re,g as G}from"./base.Bo_VGDGc.js";import{s as le}from"./system.tooOd5et.js";import{o as ce}from"./oauth.B608q7tL.js";import{_ as c}from"./vite.BF1G3H_w.js";import{r as s,j as e,aC as de,aD as he,aE as O,aF as ue,aG as me,aH as pe,aI as T,aJ as D,u as k,aK as _e,aB as fe,aL as S,aM as xe,aN as ge,aO as ve,aP as ye,S as je,s as ze,aQ as Ee,aR as Re,aS as we,aT as Ie,aU as Ae,aV as be,aW as Le,aX as Pe,aY as Se,aZ as C,a_ as Oe,a$ as De,b0 as $e,b1 as Ve,b2 as Te,b3 as U,b4 as ke}from"./vendor.DXrT3tUS.js";import{L as Ce,H,O as Ne,A as K,a as Be,b as Fe,c as Me,d as Ue,P as He}from"./components.5ga-7_By.js";import{c as Ke,a as Qe,u as We,b as qe,A as Ye,S as Ge,e as Je}from"./contexts.WYgP_g0b.js";import"./client.DjvmR9_2.js";import"./index.Dp8xutLE.js";const Xe=s.lazy(()=>c(()=>import("./dashboard.YORQ93EF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ze=s.lazy(()=>c(()=>import("./login.CIDkxX2M.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11]))),et=s.lazy(()=>c(()=>import("./profile.Co33muyP.js"),__vite__mapDeps([13,1,2,3,7,4,5,6,8,9,10,11]))),Q=s.lazy(()=>c(()=>import("./not_found.BPUlglhS.js"),__vite__mapDeps([14,1,2,3]))),tt=s.lazy(()=>c(()=>import("./forbidden.ib6moBKw.js"),__vite__mapDeps([15,1,2,3]))),at=s.lazy(()=>c(()=>import("./users.Dwy-WXok.js").then(n=>n.U),__vite__mapDeps([16,1,2,3,7,4,5,6]))),it=s.lazy(()=>c(()=>import("./users.Dwy-WXok.js").then(n=>n.a),__vite__mapDeps([16,1,2,3,7,4,5,6]))),W=s.lazy(()=>c(()=>import("./users.Dwy-WXok.js").then(n=>n.b),__vite__mapDeps([16,1,2,3,7,4,5,6]))),nt=s.lazy(()=>c(()=>import("./roles.BoxGYOHn.js").then(n=>n.R),__vite__mapDeps([17,1,2,3,7,4,5,6]))),q=s.lazy(()=>c(()=>import("./roles.BoxGYOHn.js").then(n=>n.a),__vite__mapDeps([17,1,2,3,7,4,5,6]))),st=s.lazy(()=>c(()=>import("./system-settings.ERkH9SNQ.js").then(n=>n.i),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),ot=s.lazy(()=>c(()=>import("./system-settings.ERkH9SNQ.js").then(n=>n.O),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),rt=s.lazy(()=>c(()=>import("./system-settings.ERkH9SNQ.js").then(n=>n.a),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),lt=s.lazy(()=>c(()=>import("./audit.C2pCZmOf.js"),__vite__mapDeps([19,1,2,3,7,4,5,6,8,9,10,11]))),ct=s.lazy(()=>c(()=>import("./service-accounts.BkieZfIy.js").then(n=>n.S),__vite__mapDeps([20,1,2,3,7,4,5,6,14]))),dt=s.lazy(()=>c(()=>import("./service-accounts.BkieZfIy.js").then(n=>n.a),__vite__mapDeps([20,1,2,3,7,4,5,6,14])));function r(n,m){return e.jsx(s.Suspense,{fallback:e.jsx(Ce,{}),children:e.jsx(n,{...m})})}const ht=({transformSettingTabs:n,transformLangConfig:m,extraPrivateRoutes:v=[],extraPublicRoutes:y=[]})=>{const E=[{path:"/login",element:r(Ze,{transformLangConfig:m}),index:!0},{path:"/404",element:r(Q),index:!0},{path:"/403",element:r(tt),index:!0},{path:"/system/settings/oauth/test-callback",element:r(rt),index:!0},...y],R=[{path:"/",is_private:!0,children:[{path:"/",element:r(Xe),name:"dashboard",icon:e.jsx(de,{}),index:!0},{path:"/profile",element:r(et),name:void 0,index:!0},{name:"authorization",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(he,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:r(nt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:r(q),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:r(q),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:r(at),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:r(W),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:r(it),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:r(W),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(O,{}),permissions:["authorization:service_account:view"],children:[{element:r(ct),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:r(dt),permissions:["authorization:service_account:view"],index:!0}]}]},...v,{name:"system",icon:e.jsx(pe,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(ue,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:r(st,{transformItems:n})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:r(ot),index:!0}]},{path:"/system/audit",icon:e.jsx(me,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:r(lt)}]},{path:"*",element:r(Q),index:!0}]}];return[...E,...R]},Ot={ai:se,authorization:oe,base:re,system:le,oauth:ce},{Header:ut,Content:mt,Footer:pt,Sider:_t}=T,{SubMenu:ft}=D,xt=({element:n,routes:m,transformLangConfig:v,menuStyle:y="dark",transformHeaderItems:E=f=>f,renderLayout:R})=>{const{layout:f,visible:A,loaded:d}=Ke(),{t:x,i18n:w}=k(),{t:j}=k("common"),g=_e(),{hasPermission:b}=Qe(),z=fe(),{logout:h,user:a}=We(),{siteConfig:o,clearCurrentOrgId:L}=qe(),[I,N]=s.useState([]),[J,X]=s.useState(null),[$,Z]=s.useState("Loading...");g.pathname!=="/profile"&&(a&&a.mfa_enforced&&!a.mfa_enabled?z("/profile#mfa"):a&&a.status==="password_expired"&&z("/profile#password"));const ee=()=>{h(),L(),window.location.href=G("/login?redirect="+encodeURIComponent(window.location.href))},te=[{key:"profile",label:e.jsx(S,{to:"/profile",children:j("profile")})},{key:"logout",label:j("logout"),onClick:ee}];s.useEffect(()=>{var i;if(o){const l=o.navigation.filter(t=>t.path!==o.home_page),p=[...o.home_page?[{name:"home",path:o.home_page}]:[],...l];p.length>1?N(p):N([]),X(o.logo),(i=document.getElementById("site-icon"))==null||i.setAttribute("href",o.logo)}},[o]),s.useEffect(()=>{w.language&&Z((o==null?void 0:o.name_i18n[w.language])||(o==null?void 0:o.name)||"")},[o,w.language]);const V=()=>{const i=ye(m,g.pathname),l=[];if(i){for(const[p,t]of i.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:j("home"),key:"home"});else if(t.route.name){const u=i.slice(0,p+1).map(_=>_.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?x(`breadcrumbs.${u}`):void 0,key:t.route.path})}}return l},ae=i=>i.some(l=>b(l)),ie=xe.flatMapDeep(m,i=>i.children).map(i=>i==null?void 0:i.name).filter(i=>i!==void 0),B=(i,l=[])=>{const p=t=>t&&t.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return i.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!ae(t.permissions))return null;const u=p(t.name);if(!t.name)return null;if("children"in t&&t.children){const _=B(t.children,[...l,t.name]);return _.length==0&&t.path?e.jsx(D.Item,{icon:t.icon,children:e.jsx(S,{to:t.path,children:x(`menu.${[...l,t.name].join(".")}`,{defaultValue:u})})},t.path):e.jsx(ft,{icon:t.icon,title:x(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:u}),children:_},t.path??t.name)}return t.name&&t.path?e.jsx(D.Item,{icon:t.icon,children:e.jsx(S,{to:t.path,children:x(`menu.${[...l,t.name].join(".")}`,{defaultValue:u})})},t.path):null}).filter(Boolean)};s.useEffect(()=>{const i=V().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");i?document.title=`${$} | ${i}`:document.title=$},[V,g.pathname]);const ne=[e.jsx(H,{hidden:I.length<=1,menu:{items:I.map(i=>({key:i.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:i.path,children:x(`menu.${i.name}`,{defaultValue:i.name})})}))},children:e.jsx(ge,{})}),...o!=null&&o.enable_multi_org?[e.jsx(Ne,{},"org-switcher")]:[],e.jsxs(H,{menu:{items:te},children:[a!=null&&a.avatar?e.jsx(K,{src:a.avatar}):e.jsx(K,{icon:e.jsx(O,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(a==null?void 0:a.full_name)||(a==null?void 0:a.username)})]}),e.jsx(Be,{transformLangConfig:v})];return(R??((i,l,p,t,u)=>{const[_,F]=s.useState(!1);return e.jsxs(T,{style:{minHeight:"100vh",display:"flex",flexDirection:"row"},children:[e.jsxs(_t,{collapsible:!0,collapsed:_,onCollapse:F,theme:y,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:i?e.jsx("img",{src:i,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(je,{size:"large",tip:"Loading..."})})}),e.jsx(D,{theme:y,defaultOpenKeys:ie,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[g.pathname],children:l})]}),e.jsxs(T,{className:"site-layout main-layout",style:{flex:1,minWidth:0},children:[e.jsxs(ut,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(ze,{type:"text",icon:_?e.jsx(Ee,{}):e.jsx(Re,{}),onClick:()=>F(!_),style:{fontSize:"16px",width:64,height:64}}),e.jsx("div",{style:{marginRight:"20px"},children:p})]}),e.jsxs(mt,{style:{margin:"0 16px",height:"calc(100vh - 170px)",overflow:"auto"},children:[e.jsx(we,{style:{margin:"16px 0"},itemRender:P=>{const M=P.href||P.path;return M?e.jsx(S,{to:M,children:P.title}):e.jsx("span",{children:P.title})},items:t}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:"calc(100vh - 190px)"},children:u}),e.jsx(Fe,{}),f==="classic"&&(A||d)&&e.jsx(Me,{})]}),e.jsxs(pt,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",$]})]}),(f==="sidebar"||f==="float-sidebar")&&(A||d)&&e.jsx(Ue,{})]})}))(J,B(m),E(ne),V(),n??e.jsx(ve,{}))},gt=new Ie({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),Y={"zh-CN":Oe,"en-US":C,"de-DE":Se,"es-ES":Pe,"fr-FR":Le,"ar-AE":be,"sv-SE":Ae};function vt({transformRouter:n=d=>d,transformSettingTabs:m=d=>d,transformLangConfig:v=d=>d,extraPrivateRoutes:y=[],extraPublicRoutes:E=[],menuStyle:R="dark",transformHeaderItems:f=d=>d,renderLayout:A}){const{i18n:d}=k(),[x,w]=s.useState(Y[d.language]||C);s.useEffect(()=>{w(Y[d.language]||C)},[d.language]);const j=z=>z.map(h=>h.children===void 0?h:{...h,children:j(h.children)}),g=n(j(ht({transformSettingTabs:m,transformLangConfig:v,extraPrivateRoutes:y,extraPublicRoutes:E}))),b=(z,h)=>z.flatMap(a=>a.is_private?[a]:"children"in a&&a.children?a.children:[a]).map((a,o)=>{const L=a.is_private?e.jsx(He,{element:e.jsx(xt,{routes:g,element:a.element,transformLangConfig:v,menuStyle:R,transformHeaderItems:f,renderLayout:A})}):a.element;if("children"in a&&a.children&&a.children.length>0)return e.jsx(U,{path:a.path,element:L,children:b(a.children,a)},a.path??a.name??o);const{path:I}=a;return e.jsx(U,{path:I,index:a.index,element:L},I??a.name??`${(h==null?void 0:h.path)??""}.${o}`)}).filter(Boolean);return e.jsx(De,{client:gt,children:e.jsx($e,{locale:x,children:e.jsx(Ye,{children:e.jsx(Ge,{children:e.jsx(Je,{children:e.jsx(Ve,{basename:G(),children:e.jsx(Te,{children:b(g)})})})})})})})}ke.createRoot(document.getElementById("root")).render(e.jsx(vt,{}));export{Ot as a,r as w};
