import{u as l,r as n,aI as h,bl as b,j as e,aq as g,d9 as x,s as y}from"./vendor.CyaXoMFn.js";import{c as P,b as j,d as V,e as w,U as A}from"./components.BXKFJ6ns.js";import{f as L}from"./contexts.DcBdfNkE.js";import{a as S}from"./index.Dwpr26wG.js";import"./vite.BF1G3H_w.js";import"./lodash.BDtH7uFP.js";import"./highlight.BslI14e2.js";import"./base.CIILqgsu.js";import"./client.CicVKWRR.js";import"./ant-design-x.DtIK71LU.js";import"./highlighter.D7vD0g9D.js";import"./refractor.CNsL8aOR.js";import"./mermaid.DgR_v9UM.js";import"./ai.BrMpU1e1.js";import"./authorization.BwAKdzUH.js";import"./system.D28L4Wa8.js";import"./oauth.Bmu-E-Gy.js";import"./tasks.D7biEi4l.js";import"./user_tasks.DwX1J3U_.js";import"./ai-chat-layout.DgTSLs6W.js";const Q=()=>{const{t:a}=l("authorization"),{t:c}=l("common"),{user:t,updateUser:u}=L(),[f,i]=n.useState(!1),d=h(),r=b(),p=r.hash.replace("#","")||"basic",o=async()=>{try{i(!0);const s=await S.authorization.getCurrentUser();u(s)}catch(s){y.error(c("fetchFailed",{defaultValue:"Failed to fetch data"})),console.error("Failed to fetch user profile:",s)}finally{i(!1)}};n.useEffect(()=>{o()},[]);const m=[{key:"basic",label:a("profile.basic",{defaultValue:"Basic Information"}),children:e.jsx(P,{user:t,onSuccess:o})},{key:"password",label:a("profile.password",{defaultValue:"Password"}),disabled:t==null?void 0:t.disable_change_password,children:e.jsx(j,{})},{key:"mfa",label:a("profile.mfa",{defaultValue:"Multi-Factor Authentication"}),children:e.jsx(V,{user:t,onSuccess:o})},{key:"sessions",label:a("profile.sessions",{defaultValue:"Sessions"}),children:e.jsx(w,{})},{key:"auditLogs",label:a("profile.auditLogs",{defaultValue:"Audit Logs"}),children:e.jsx(A,{})}];return e.jsx(g,{title:a("profile.title",{defaultValue:"Profile Settings"}),loading:f,children:e.jsx(x,{defaultActiveKey:p,onChange:s=>{d(`${r.pathname}#${s}`)},items:m,destroyInactiveTabPane:!0})})};export{Q as default};
