const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.DSdFGlQs.js","assets/vendor.CyaXoMFn.js","assets/vite.BF1G3H_w.js","assets/lodash.BDtH7uFP.js","assets/highlight.BslI14e2.js","assets/vendor.D-Ncpkvi.css","assets/contexts.DcBdfNkE.js","assets/client.CicVKWRR.js","assets/base.CIILqgsu.js","assets/chartjs.x56cc3Wu.js","assets/components.BXKFJ6ns.js","assets/ant-design-x.DtIK71LU.js","assets/highlighter.D7vD0g9D.js","assets/refractor.CNsL8aOR.js","assets/mermaid.DgR_v9UM.js","assets/ant-design-x.C1GP9Q3x.css","assets/ai.BrMpU1e1.js","assets/authorization.BwAKdzUH.js","assets/system.D28L4Wa8.js","assets/oauth.Bmu-E-Gy.js","assets/tasks.D7biEi4l.js","assets/user_tasks.DwX1J3U_.js","assets/ai-chat-layout.DgTSLs6W.js","assets/login.CzuOmD4k.js","assets/profile.DsbBuYej.js","assets/not_found.BLTxhRB0.js","assets/forbidden.DvXn1Mot.js","assets/users.BswrYXIn.js","assets/roles.C1b-2N-p.js","assets/system-settings.CHuyb-GT.js","assets/audit.D9KlAf2O.js","assets/service-accounts.CZ9VTWgX.js","assets/task_list.E4GRgPhv.js","assets/task_detail.2uIeL1jk.js"])))=>i.map(i=>d[i]);
import{a as ge}from"./ai.BrMpU1e1.js";import{a as ye}from"./authorization.BwAKdzUH.js";import{b as ve,g as oe}from"./base.CIILqgsu.js";import{s as be}from"./system.D28L4Wa8.js";import{o as je}from"./oauth.Bmu-E-Gy.js";import{t as we}from"./tasks.D7biEi4l.js";import{u as ze}from"./user_tasks.DwX1J3U_.js";import{_ as d}from"./vite.BF1G3H_w.js";import{r as i,j as e,bc as Ee,bd as Ie,be as T,bf as Le,bg as Re,bh as ke,bi as C,bj as N,c as Ae,bk as Se,u as M,bl as Pe,aI as De,bm as D,bn as J,bo as Te,h as u,bp as X,bq as Z,br as Ne,S as Oe,f as $e,B as Ve,bs as Be,bt as Ce,bu as Me,bv as Fe,bw as Ue,bx as Ke,by as He,bz as qe,bA as Qe,bB as F,bC as Ge,bD as We,bE as Ye,C as Je,bF as Xe,bG as Ze,bH as ee,bI as et}from"./vendor.CyaXoMFn.js";import{L as tt,H as B,O as at,T as st,A as te,a as it,P as nt}from"./components.BXKFJ6ns.js";import{u as ot,b as rt,a as lt,c as ct,A as dt,S as mt,e as ht}from"./contexts.DcBdfNkE.js";import{A as ut,a as pt,b as _t}from"./ai-chat-layout.DgTSLs6W.js";import{f as xt}from"./lodash.BDtH7uFP.js";import"./client.CicVKWRR.js";import"./highlight.BslI14e2.js";import"./index.Dwpr26wG.js";import"./ant-design-x.DtIK71LU.js";import"./highlighter.D7vD0g9D.js";import"./refractor.CNsL8aOR.js";import"./mermaid.DgR_v9UM.js";const ft=i.lazy(()=>d(()=>import("./dashboard.DSdFGlQs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),gt=i.lazy(()=>d(()=>import("./login.CzuOmD4k.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22]))),yt=i.lazy(()=>d(()=>import("./profile.DsbBuYej.js"),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22]))),ae=i.lazy(()=>d(()=>import("./not_found.BLTxhRB0.js"),__vite__mapDeps([25,1,2,3,4,5]))),vt=i.lazy(()=>d(()=>import("./forbidden.DvXn1Mot.js"),__vite__mapDeps([26,1,2,3,4,5]))),bt=i.lazy(()=>d(()=>import("./users.BswrYXIn.js").then(a=>a.U),__vite__mapDeps([27,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),jt=i.lazy(()=>d(()=>import("./users.BswrYXIn.js").then(a=>a.a),__vite__mapDeps([27,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),se=i.lazy(()=>d(()=>import("./users.BswrYXIn.js").then(a=>a.b),__vite__mapDeps([27,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),wt=i.lazy(()=>d(()=>import("./roles.C1b-2N-p.js").then(a=>a.R),__vite__mapDeps([28,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),ie=i.lazy(()=>d(()=>import("./roles.C1b-2N-p.js").then(a=>a.a),__vite__mapDeps([28,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),zt=i.lazy(()=>d(()=>import("./system-settings.CHuyb-GT.js").then(a=>a.i),__vite__mapDeps([29,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),Et=i.lazy(()=>d(()=>import("./system-settings.CHuyb-GT.js").then(a=>a.O),__vite__mapDeps([29,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),It=i.lazy(()=>d(()=>import("./system-settings.CHuyb-GT.js").then(a=>a.S),__vite__mapDeps([29,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),Lt=i.lazy(()=>d(()=>import("./system-settings.CHuyb-GT.js").then(a=>a.a),__vite__mapDeps([29,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),Rt=i.lazy(()=>d(()=>import("./system-settings.CHuyb-GT.js").then(a=>a.b),__vite__mapDeps([29,1,2,3,4,5,8,7,10,6,11,12,13,14,15,18,17]))),kt=i.lazy(()=>d(()=>import("./audit.D9KlAf2O.js"),__vite__mapDeps([30,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22]))),At=i.lazy(()=>d(()=>import("./service-accounts.CZ9VTWgX.js").then(a=>a.S),__vite__mapDeps([31,1,2,3,4,5,10,6,7,8,11,12,13,14,15,25]))),St=i.lazy(()=>d(()=>import("./service-accounts.CZ9VTWgX.js").then(a=>a.a),__vite__mapDeps([31,1,2,3,4,5,10,6,7,8,11,12,13,14,15,25]))),Pt=i.lazy(()=>d(()=>import("./task_list.E4GRgPhv.js"),__vite__mapDeps([32,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22]))),Dt=i.lazy(()=>d(()=>import("./task_detail.2uIeL1jk.js"),__vite__mapDeps([33,1,2,3,4,5,10,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22])));function c(a,r){return e.jsx(i.Suspense,{fallback:e.jsx(tt,{}),children:e.jsx(a,{...r})})}const Tt=({transformSettingTabs:a,transformLangConfig:r,extraPrivateRoutes:f=[],extraPublicRoutes:E=[]})=>{const j=[{path:"/login",element:c(gt,{transformLangConfig:r}),index:!0},{path:"/404",element:c(ae),index:!0},{path:"/403",element:c(vt),index:!0},{path:"/system/settings/oauth/test-callback",element:c(Rt),index:!0},...E],I=[{path:"/",is_private:!0,children:[{path:"/",element:c(ft),name:"dashboard",icon:e.jsx(Ee,{}),index:!0},{path:"/profile",element:c(yt),name:void 0,index:!0},...f,{path:"/tasks",permissions:["task:list"],children:[{path:"/tasks",element:c(Pt),permissions:["task:list"],index:!0},{path:"/tasks/:id",element:c(Dt),permissions:["task:view"],index:!0}]},{name:"authorization",icon:e.jsx(T,{}),permissions:["authorization:user:list","authorization:service_account:list","authorization:role:list"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(Ie,{}),permissions:["authorization:role:list"],children:[{element:c(wt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:c(ie),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:c(ie),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(T,{}),permissions:["authorization:user:list"],children:[{element:c(bt),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:c(se),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:c(jt),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:c(se),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(T,{}),permissions:["authorization:service_account:list"],children:[{element:c(At),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:c(St),permissions:["authorization:service_account:view"],index:!0}]}]},{name:"system",icon:e.jsx(ke,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view","system:skills:view"],children:[{path:"/system/settings",icon:e.jsx(Le,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view","system:skills:view"],children:[{path:"/system/settings",index:!0,element:c(zt,{transformItems:a})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:c(Et),index:!0},{path:"/system/settings/skills/:id/edit",permissions:["system:skills:edit_files"],element:c(It),index:!0},{path:"/system/settings/skills/:id/preview",permissions:["system:skills:view"],element:c(Lt),index:!0}]},{path:"/system/audit",icon:e.jsx(Re,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:c(kt)}]},{path:"*",element:c(ae),index:!0}]}];return[...j,...I]},ma={ai:ge,authorization:ye,base:ve,system:be,oauth:je,tasks:we,userTasks:ze},{Header:Nt,Content:Ot,Footer:$t,Sider:Vt}=C,{SubMenu:Bt}=N,Ct=Ae(({token:a,css:r})=>({layout:r`
      min-height: 100vh;
      display: flex;
      flex-direction: row;
    `,header:r`
      padding: 0;
      display: flex;
      justify-content: space-between;
      background-color: ${a.colorBgContainer};
      border-block-end: 1px solid ${a.colorBorderSecondary};
    `,footer:r`
      text-align: center;
      padding: 15px 50px;
    `,contentContainer:r`
      padding: 24px;
      background-color: ${a.colorBgContainer};
    `,content:r`
      margin: 0 16px;
      height: calc(100vh - 120px);
      overflow: auto;
    `,mainLayout:r`
      flex: 1;
      min-width: 0;
      background-color: ${a.colorBgContainer};
    `,breadcrumb:r`
      margin-left: 8px;
    `,headerItems:r`
      margin-right: 20px;
    `,userName:r`
      height: 1em;
      line-height: 1em;
      margin-left: 5px;
    `,themeSwitch:r`
      display: inline-flex;
    `,menuSider:r`
      .ant-layout-sider-children{
        display: flex;
        flex-direction: column;
      }
    `,menuToggleButton:r`
      &&{
        font-size: 16px;
        width: 64px;
        height: 64px;
      }
    `,layoutLogo:r`
      margin: 8px;
      display: flex;
    `,layoutLogoContainer:r`
      width: 100%;
      height: 100%;
      text-align: center;
    `,layoutLogoImage:r`
      height: 32px;
      width: 32px;
    `,menu:r`
      flex: 1 1 0%;
    `})),Mt=({element:a,siderWidth:r=250,routes:f,transformLangConfig:E,menuStyle:j="dark",transformHeaderItems:I=w=>w,renderLayout:O})=>{const{themeMode:w,setThemeMode:p,isDarkMode:S}=Se(),{styles:m}=Ct(),{layout:z,visible:L,loaded:R}=ot(),{t:g,i18n:_}=M(),{t:n}=M("common"),y=Pe(),{hasPermission:k}=rt(),A=De(),{logout:re,user:h}=lt(),{siteConfig:o,clearCurrentOrgId:le}=ct(),[U,K]=i.useState([]),[ce,de]=i.useState(null),[$,me]=i.useState("Loading...");y.pathname!=="/profile"&&(h&&h.mfa_enforced&&!h.mfa_enabled?A("/profile#mfa"):h&&h.status==="password_expired"&&A("/profile#password"));const he=()=>{re(),le(),window.location.href=oe("/login?redirect="+encodeURIComponent(window.location.href))},ue=[{key:"profile",label:e.jsx(D,{to:"/profile",children:n("profile")})},{key:"logout",label:n("logout"),onClick:he}];i.useEffect(()=>{var s,l;if(o){const b=((s=o.navigation)==null?void 0:s.filter(x=>x.path!==o.home_page))??[],t=[...o.home_page?[{name:"home",path:o.home_page}]:[],...b];t.length>1?K(t):K([]),de(o.logo),(l=document.getElementById("site-icon"))==null||l.setAttribute("href",o.logo)}},[o]),i.useEffect(()=>{_.language&&me((o==null?void 0:o.name_i18n[_.language])||(o==null?void 0:o.name)||"")},[o,_.language]);const V=()=>{const s=J(f,y.pathname),l=[];if(s){for(const[b,t]of s.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:n("home"),key:"home"});else if(t.route.name){const x=s.slice(0,b+1).map(v=>v.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?g(`breadcrumbs.${x}`):void 0,key:t.route.path})}}return l},pe=s=>s.some(l=>k(l)),_e=xt(f,s=>s.children).map(s=>s==null?void 0:s.name).filter(s=>s!==void 0),H=(s,l=[])=>{const b=t=>t&&t.replace(/_/g," ").split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ");return s.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!pe(t.permissions))return null;const x=b(t.name);if(!t.name)return null;if("children"in t&&t.children){const v=H(t.children,[...l,t.name]);return v.length==0&&t.path?e.jsx(N.Item,{icon:t.icon,children:e.jsx(D,{to:t.path,children:g(`menu.${[...l,t.name].join(".")}`,{defaultValue:x})})},t.path):e.jsx(Bt,{icon:t.icon,title:g(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:x}),children:v},t.path??t.name)}return t.name&&t.path?e.jsx(N.Item,{icon:t.icon,children:e.jsx(D,{to:t.path,children:g(`menu.${[...l,t.name].join(".")}`,{defaultValue:x})})},t.path):null}).filter(Boolean)};i.useEffect(()=>{const s=V().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");s?document.title=`${$} | ${s}`:document.title=$},[V,y.pathname]);const xe=i.useMemo(()=>{const s=J(f,y.pathname);if(s){for(const l of s.reverse())if(l.route.path&&l.route.name)return l.route.path}return y.pathname},[y.pathname]),fe=[e.jsx(B,{className:"header-item navigation-dropdown",hidden:U.length<=1,menu:{items:U.map(s=>({key:s.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:s.path,children:g(`menu.${s.name}`,{defaultValue:s.name})})}))},children:e.jsx(Te,{})},"navigation-dropdown"),...o!=null&&o.enable_multi_org?[e.jsx(at,{className:"header-item org-switcher"},"org-switcher")]:[],...k("task:list")?[e.jsx(st,{className:"header-item task-dropdown"},"task-dropdown")]:[],e.jsxs(B,{className:"header-item user-dropdown",menu:{items:ue},children:[h!=null&&h.avatar?e.jsx(te,{src:h.avatar}):e.jsx(te,{icon:e.jsx(T,{})}),e.jsx("span",{className:u("header-user-name",m.userName),children:(h==null?void 0:h.full_name)||(h==null?void 0:h.username)})]},"user-dropdown"),e.jsx(it,{className:"header-item language-switch",transformLangConfig:E},"language-switch"),e.jsx(B,{className:"header-item theme-switch",menu:{items:[{key:"light",label:e.jsxs("span",{children:[e.jsx(X,{})," ",n("light",{defaultValue:"Light Mode"})]})},{key:"dark",label:e.jsxs("span",{children:[e.jsx(Z,{})," ",n("dark",{defaultValue:"Dark Mode"})]})}],onClick:({key:s})=>{p(s)},selectedKeys:[w]},children:w==="light"?e.jsx(X,{}):e.jsx(Z,{})},"theme-switch")];return(O??((s,l,b,t,x)=>{var Q,G,W;const[v,q]=i.useState(!1);return e.jsxs(C,{className:u("main-layout",m.layout),children:[e.jsxs(Vt,{width:r,collapsible:!0,collapsed:v,onCollapse:q,className:u(m.menuSider,"layout-menu-sider"),theme:S?"light":j,children:[e.jsx("div",{className:u("logo",m.layoutLogo),children:e.jsx("div",{className:u("layout-logo-container",m.layoutLogoContainer),children:s?e.jsx("img",{src:s,alt:"logo",className:m.layoutLogoImage}):e.jsx(Oe,{size:"large",tip:"Loading..."})})}),e.jsx(N,{className:u("layout-menu",m.menu),theme:S?"light":j,defaultOpenKeys:_e,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[xe],children:l})]}),e.jsxs(C,{className:u("site-layout","main-layout",m.mainLayout),children:[e.jsxs(Nt,{className:u("site-header",m.header),children:[e.jsxs($e,{children:[e.jsx(Ve,{type:"text",icon:v?e.jsx(Be,{}):e.jsx(Ce,{}),onClick:()=>q(!v),className:u("layout-menu-toggle",m.menuToggleButton)}),e.jsx(Me,{className:u("site-breadcrumb",m.breadcrumb),itemRender:P=>{const Y=P.href||P.path;return Y?e.jsx(D,{to:Y,children:P.title}):e.jsx("span",{children:P.title})},items:t})]}),e.jsx("div",{className:u("header-items",m.headerItems),children:b})]}),e.jsxs(Ot,{className:u("site-content",m.content),children:[e.jsx("div",{className:u("site-content-container",m.contentContainer),children:x}),((Q=o==null?void 0:o.attrs)==null?void 0:Q.ai_enabled)&&e.jsx(ut,{}),((G=o==null?void 0:o.attrs)==null?void 0:G.ai_enabled)&&z==="classic"&&(L||R)&&e.jsx(pt,{})]}),e.jsxs($t,{className:u("site-footer",m.footer),children:[" Â©",new Date().getFullYear()," ",$]})]}),((W=o==null?void 0:o.attrs)==null?void 0:W.ai_enabled)&&(z==="sidebar"||z==="float-sidebar")&&(L||R)&&e.jsx(_t,{})]})}))(ce,H(f),I(fe),V(),a??e.jsx(Ne,{}))},Ft=new Fe({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),ne={"zh-CN":Ge,"en-US":F,"de-DE":Qe,"es-ES":qe,"fr-FR":He,"ar-AE":Ke,"sv-SE":Ue};function Ut({transformRouter:a=p=>p,transformSettingTabs:r=p=>p,transformLangConfig:f=p=>p,extraPrivateRoutes:E=[],extraPublicRoutes:j=[],menuStyle:I="dark",transformHeaderItems:O=p=>p,renderLayout:w}){const{i18n:p}=M(),[S,m]=i.useState(ne[p.language]||F);i.useEffect(()=>{m(ne[p.language]||F)},[p.language]);const z=g=>g.map(_=>_.children===void 0?_:{..._,children:z(_.children)}),L=a(z(Tt({transformSettingTabs:r,transformLangConfig:f,extraPrivateRoutes:E,extraPublicRoutes:j}))),R=(g,_)=>g.flatMap(n=>n.is_private?[n]:"children"in n&&n.children?n.children:[n]).map((n,y)=>{const k=n.is_private?e.jsx(nt,{element:e.jsx(Mt,{routes:L,element:n.element,transformLangConfig:f,menuStyle:I,transformHeaderItems:O,renderLayout:w})}):n.element;if("children"in n&&n.children&&n.children.length>0)return e.jsx(ee,{path:n.path,element:k,children:R(n.children,n)},n.path??n.name??y);const{path:A}=n;return e.jsx(ee,{path:A,index:n.index,element:k},A??n.name??`${(_==null?void 0:_.path)??""}.${y}`)}).filter(Boolean);return e.jsx(We,{client:Ft,children:e.jsx(Ye,{children:e.jsx(Je,{locale:S,children:e.jsx(dt,{children:e.jsx(mt,{children:e.jsx(ht,{children:e.jsx(Xe,{basename:oe(),children:e.jsx(Ze,{children:R(L)})})})})})})})})}et.createRoot(document.getElementById("root")).render(e.jsx(Ut,{}));export{ma as a,c as w};
