import{av as Z,u as R,p as j,r as y,e as U,j as e,S as q,ay as Y,aF as de,Z as S,T as ce,bb as w,H as fe,af as ee,bu as me,b0 as he,br as pe,bv as xe,ag as ge,C as M,a1 as W,a2 as T,q as F,a5 as H,a3 as L,K as B,s as z,a6 as J,bw as je,a0 as Ve,M as O,t as i,V as ae,b5 as se,b4 as te,bi as E,bs as we,a8 as ye}from"./vendor.DHCYHP4R.js";import{A as re,i as be,g as _e,U as Ue,k as ze}from"./components.C-JMF8OY.js";import{a as V}from"./index.DVKqzbI3.js";import{P as D,f as N}from"./base.qZwdwvN1.js";import{b as Q,a as ke}from"./contexts.1OoT68TW.js";import{A as Ee}from"./client.B_u0cCcp.js";const{Option:$}=L,Pe=({user:u,onClose:s,onSuccess:a})=>{const{t:m}=R("authorization"),[h,d]=y.useState(null),[n,b]=y.useState(null),{run:P,loading:v}=U(V.authorization.updateUser,{onSuccess:()=>{i.success(m("user.updateUserSuccess",{defaultValue:"User updated successfully"})),a()},onError:c=>{i.error(m("user.updateUserError",{defaultValue:"Failed to update user",error:c.message}))},manual:!0}),{data:x,loading:g}=U(async()=>h==="bind"?V.authorization.getLdapUsers({skip_existing:!0}).then(c=>{const _=[],p=[];for(const f of c)f.username===(u==null?void 0:u.username)||f.email===(u==null?void 0:u.email)||f.full_name===(u==null?void 0:u.full_name)?_.push({recommend:!0,...f}):p.push({recommend:!1,...f});return[..._,...p]}):Promise.resolve([]),{refreshDeps:[u==null?void 0:u.id,h]});return y.useEffect(()=>{u&&(d(null),b(null))},[u]),e.jsx(O,{open:u!==null,onCancel:s,onOk:()=>{if(u){if(h==="local")return P({id:u.id},{source:"local"});if(h==="bind"){if(!n){i.error(m("user.ldapUserDNRequired",{defaultValue:"LDAP User DN is required"}));return}return P({id:u.id},{source:"ldap",ldap_dn:n})}else{i.error(m("user.unknownFixMethod",{defaultValue:"Unknown fix method"}));return}}i.error(m("user.unknownUserId",{defaultValue:"Unknown user id"}))},title:m("user.fixUserTitle",{defaultValue:"Fix User"}),children:e.jsxs(B,{direction:"vertical",style:{width:"100%"},children:[e.jsx(z,{loading:v,style:{width:"100%",height:40},type:"default",variant:"outlined",color:h==="local"?"primary":"default",onClick:()=>d("local"),children:m("user.fixUserConvertToLocal",{defaultValue:"Convert to Local"})}),e.jsx(z,{loading:v,style:{width:"100%",height:40},type:"default",variant:"outlined",color:h==="bind"?"primary":"default",onClick:()=>d("bind"),children:m("user.fixUserBindLDAPUser",{defaultValue:"Bind LDAP User"})}),e.jsx(L,{loading:g,style:{display:h==="bind"?"block":"none"},onSelect:c=>b(c),options:x==null?void 0:x.map(c=>({label:e.jsxs("div",{children:[e.jsx(S,{color:c.recommend?"blue":"default",children:c.full_name})," ",c.username," - ",c.email," - ",c.ldap_dn]}),value:c.ldap_dn})),showSearch:!0})]})})},ve=()=>{const u=Z(),{t:s}=R("authorization"),{t:a}=R("common"),[m]=j.useForm(),[h,d]=y.useState([]),[n,b]=y.useState(0),{enableMultiOrg:P}=Q(),[v,x]=y.useState(null),[g,c]=y.useState({current:D.DEFAULT_CURRENT,page_size:D.DEFAULT_PAGE_SIZE,keywords:void 0,status:void 0}),{data:_,loading:p}=U(async()=>(await V.system.listOrganizations({current:1,page_size:1e3})).data||[],{refreshDeps:[P],onError:r=>{i.error(s("organizations.loadError",{defaultValue:"Failed to load organizations",error:r.message}))},cacheKey:"fetchAllOrganizations",cacheTime:1e3*60*10}),f=y.useCallback((r,t)=>{if(p)return e.jsxs(e.Fragment,{children:[e.jsx(q,{size:"small"}),":",t.name]});const C=_==null?void 0:_.find(I=>I.id===r);return C?`${C.name}:${t.name}`:t.name},[_,p]),{run:k,loading:l}=U(()=>{const r={status:g.status,keywords:g.keywords};return V.authorization.listUsers({current:g.current,page_size:g.page_size,...r})},{onSuccess:r=>{d(r.data||[]),b(r.total||0)},onError:r=>{i.error(s("user.loadError",{defaultValue:"Failed to load users",error:r.message}))},refreshDeps:[g]}),o=r=>{c({...g,current:D.DEFAULT_CURRENT,keywords:r.keywords,status:r.status})},A=()=>{m.resetFields(),c({current:D.DEFAULT_CURRENT,page_size:D.DEFAULT_PAGE_SIZE,keywords:void 0,status:void 0})},K=(r,t)=>{c(C=>({...C,current:r,page_size:t}))},{run:le}=U(V.authorization.restoreUser,{onSuccess:()=>{i.success(s("user.restoreSuccess",{defaultValue:"User restored successfully"})),k()},onError:r=>{i.error(s("user.restoreError",{defaultValue:"Failed to restore user",error:r.message}))},manual:!0}),{run:ue}=U(V.authorization.deleteUser,{onSuccess:()=>{i.success(s("user.deleteSuccess",{defaultValue:"User deleted successfully"})),k()},onError:r=>{i.error(s("user.deleteError",{defaultValue:"Failed to delete user",error:r.message}))},manual:!0}),ne=(r,t,C)=>{O.confirm({title:s("user.resetPasswordTitle",{defaultValue:"Reset Password"}),content:s("user.resetPasswordConfirm",{defaultValue:`Are you sure you want to reset the password for ${t}?`,username:t}),okText:a("confirm",{defaultValue:"Confirm"}),cancelText:a("cancel",{defaultValue:"Cancel"}),onOk:async()=>{try{const I=await V.authorization.resetUserPassword({id:r},{password:""});i.success(s("user.resetPasswordSuccess",{defaultValue:"Password reset successfully"})),I.new_password?O.info({title:s("user.resetPasswordSuccess",{defaultValue:"Password Reset Successfully"}),content:e.jsx(ae.Text,{copyable:{text:I.new_password},children:s("user.resetPasswordSuccessContent",{defaultValue:`New password: ${I.new_password}`,password:I.new_password})})}):O.info({title:s("user.resetPasswordSuccess",{defaultValue:"Password Reset Successfully"}),content:s("user.resetPasswordSuccessSendByEmail",{defaultValue:"The new password has been sent to the user email: {{email}}",email:C})})}catch(I){console.error("Reset password error:",I),i.error(s("user.resetPasswordError",{defaultValue:"Failed to reset password"}))}}})},oe=r=>{O.confirm({title:s("user.unlockTitle",{defaultValue:"Unlock User"}),content:s("user.unlockConfirm",{defaultValue:"Are you sure you want to unlock this user?"}),onOk:async()=>{try{await V.authorization.unlockUser({id:r}),i.success(s("user.unlockSuccess",{defaultValue:"User unlocked successfully"})),k()}catch(t){i.error(s("user.unlockError",{defaultValue:"Failed to unlock user: {{error}}",error:t.message??String(t)}))}}})},ie=[{title:s("user.username",{defaultValue:"Username"}),key:"user",render:(r,t)=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(re,{size:"small",icon:e.jsx(Y,{}),src:t.avatar,style:{marginRight:8}}),e.jsx(de,{to:`/authorization/users/${t.id}`,children:t.username})]})},{title:s("user.fullName",{defaultValue:"Full Name"}),dataIndex:"full_name",key:"full_name"},{title:s("user.email",{defaultValue:"Email"}),dataIndex:"email",key:"email"},{title:s("user.source",{defaultValue:"Source"}),dataIndex:"source",key:"source",render:(r,t)=>{switch(r){case"ldap":return t.ldap_dn?e.jsx(S,{color:"blue",children:s("user.sourceLdap",{defaultValue:"LDAP"})}):e.jsx(ce,{title:s("user.ldapUserNotBound",{defaultValue:"LDAP User is not bound to any local user, please bind it."}),children:e.jsx(S,{color:"red",children:s("user.sourceLdap",{defaultValue:"LDAP"})})});case"oauth2":return e.jsx(S,{color:"green",children:s("user.sourceOauth2",{defaultValue:"OAuth2"})});default:return e.jsx(S,{color:"default",children:s("user.sourceLocal",{defaultValue:"Local"})})}}},{title:s("user.status",{defaultValue:"Status"}),dataIndex:"status",key:"status",render:r=>{switch(r){case"disabled":return e.jsx(w,{status:"default",text:s("user.statusEnum.disabled",{defaultValue:"Disabled"})});case"password_expired":return e.jsx(w,{status:"warning",text:s("user.statusEnum.password_expired",{defaultValue:"Password Expired"})});case"active":return e.jsx(w,{status:"success",text:s("user.statusEnum.active",{defaultValue:"Active"})});case"locked":return e.jsx(w,{status:"warning",text:s("user.statusEnum.locked",{defaultValue:"Locked"})});case"deleted":return e.jsx(w,{status:"error",text:s("user.statusEnum.deleted",{defaultValue:"Deleted"})});default:return e.jsx(w,{status:"default",text:s(`user.statusEnum.${r}`,{defaultValue:r.charAt(0).toUpperCase()+r.slice(1)})})}}},{title:s("user.roles",{defaultValue:"Roles"}),dataIndex:"roles",key:"roles",render:r=>e.jsx("span",{children:r&&r.length>0?r.map(t=>e.jsx(S,{color:"blue",children:t.organization_id?f(t.organization_id,t):t.name},t.id)):e.jsx(S,{children:s("user.noRole",{defaultValue:"No Role"})})})},{title:s("user.mfa",{defaultValue:"MFA"}),dataIndex:"mfa_enabled",key:"mfa_enabled",render:r=>r?e.jsx(w,{status:"success",text:s("user.mfaEnabled",{defaultValue:"Enabled"})}):e.jsx(w,{status:"default",text:s("user.mfaDisabled",{defaultValue:"Disabled"})})},{title:s("user.lastLogin",{defaultValue:"Last Login"}),dataIndex:"last_login",key:"last_login",render:r=>r?N(r):s("user.neverLogin",{defaultValue:"Never"})},{title:a("actions",{defaultValue:"Actions"}),key:"action",width:150,render:(r,t)=>{const C=[{key:"view",permission:"authorization:user:view",icon:e.jsx(fe,{}),tooltip:s("user.viewDetail",{defaultValue:"View Detail"}),onClick:async()=>u(`/authorization/users/${t.id}`)},{key:"edit",permission:"authorization:user:update",icon:e.jsx(ee,{}),tooltip:s("user.edit",{defaultValue:"Edit"}),hidden:t.status==="locked"||t.status==="deleted",onClick:async()=>u(`/authorization/users/${t.id}/edit`)},{key:"unlock",permission:"authorization:user:update",icon:e.jsx(me,{}),tooltip:s("user.unlock",{defaultValue:"Unlock"}),hidden:t.status!=="locked",onClick:async()=>oe(t.id)},{key:"resetPassword",permission:"authorization:user:resetPassword",icon:e.jsx(he,{}),disabled:t.disable_change_password,tooltip:t.disable_change_password?s("user.resetPasswordDisabled",{defaultValue:"The current system prohibits modifying the password of this user."}):s("user.resetPassword",{defaultValue:"Reset Password"}),hidden:!((t.source==="local"||t.source==="ldap"&&t.ldap_dn)&&t.status!=="deleted"),onClick:async()=>ne(t.id,t.username,t.email)},{key:"fixUser",permission:"authorization:user:update",icon:e.jsx(pe,{}),tooltip:s("user.fixUser",{defaultValue:"Fix User"}),hidden:!(t.source==="ldap"&&!t.ldap_dn&&t.status!=="deleted"),onClick:async()=>x(t)},{key:"restore",permission:"authorization:user:update",icon:e.jsx(xe,{}),tooltip:s("user.restore",{defaultValue:"Restore"}),hidden:t.status!=="deleted",confirm:{title:s("user.restoreConfirm",{defaultValue:"Are you sure you want to restore this user?"}),onConfirm:async()=>le({id:t.id})}},{key:"delete",permission:"authorization:user:delete",icon:e.jsx(ge,{}),tooltip:s("user.delete",{defaultValue:"Delete"}),danger:!0,confirm:{title:s("user.deleteConfirm",{defaultValue:"Are you sure you want to delete this user?"}),onConfirm:()=>ue({id:t.id}),okText:a("confirm",{defaultValue:"Confirm"}),cancelText:a("cancel",{defaultValue:"Cancel"})}}];return e.jsx(be,{actions:C},"actions")}}];return e.jsxs("div",{children:[e.jsx(M,{style:{marginBottom:16},children:e.jsx(j,{form:m,layout:"inline",onFinish:o,style:{marginBottom:16},children:e.jsxs(W,{gutter:16,style:{width:"100%"},children:[e.jsx(T,{span:6,children:e.jsx(j.Item,{name:"keywords",children:e.jsx(F,{prefix:e.jsx(H,{}),placeholder:s("user.keywords",{defaultValue:"Search by username, full name, or email"}),allowClear:!0})})}),e.jsx(T,{span:6,children:e.jsx(j.Item,{name:"status",children:e.jsxs(L,{placeholder:s("user.status",{defaultValue:"Status"}),allowClear:!0,style:{width:"100%"},children:[e.jsx($,{value:"active",children:s("user.statusEnum.active",{defaultValue:"Active"})}),e.jsx($,{value:"disabled",children:s("user.statusEnum.disabled",{defaultValue:"Disabled"})}),e.jsx($,{value:"deleted",children:s("user.statusEnum.deleted",{defaultValue:"Deleted"})}),e.jsx($,{value:"locked",children:s("user.statusEnum.locked",{defaultValue:"Locked"})}),e.jsx($,{value:"password_expired",children:s("user.statusEnum.password_expired",{defaultValue:"Password Expired"})})]})})}),e.jsx(T,{span:6,children:e.jsxs(B,{children:[e.jsx(z,{type:"primary",icon:e.jsx(H,{}),htmlType:"submit",children:a("search",{defaultValue:"Search"})}),e.jsx(z,{icon:e.jsx(J,{}),onClick:A,children:a("reset",{defaultValue:"Reset"})})]})})]})})}),e.jsxs(M,{children:[e.jsxs(W,{justify:"space-between",align:"middle",gutter:[0,16],children:[e.jsx(T,{children:e.jsx(z,{type:"primary",icon:e.jsx(J,{}),onClick:k,children:a("refresh",{defaultValue:"Refresh"})})}),e.jsx(T,{children:e.jsx(_e,{permission:"authorization:user:create",children:e.jsx(z,{type:"primary",icon:e.jsx(je,{}),style:{marginBottom:16},onClick:()=>u("/authorization/users/create"),children:s("user.create",{defaultValue:"Create User"})})})})]}),e.jsx(Ve,{columns:ie,dataSource:h,rowKey:"id",loading:l,pagination:{current:g.current,pageSize:g.page_size,total:n,showSizeChanger:!0,showQuickJumper:!0,showTotal:r=>a("totalItems",{defaultValue:`Total ${r} items`,total:r}),onChange:K}})]}),e.jsx(Pe,{user:v,onClose:()=>x(null),onSuccess:()=>{x(null),k()}})]})},$e=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"})),{Title:Se}=ae,{TabPane:X}=te,Ce=()=>{const{id:u}=se(),s=Z(),{t:a}=R("authorization"),{t:m}=R("common"),[h,d]=y.useState(!1),[n,b]=y.useState(null),{hasPermission:P}=ke(),{enableMultiOrg:v}=Q(),{data:x,loading:g}=U(async()=>(await V.system.listOrganizations({current:1,page_size:1e3})).data||[],{refreshDeps:[v],onError:p=>{i.error(a("organizations.loadError",{defaultValue:"Failed to load organizations",error:p.message}))},cacheKey:"fetchAllOrganizations",cacheTime:1e3*60*10}),c=y.useCallback((p,f)=>{if(g)return e.jsxs(e.Fragment,{children:[e.jsx(q,{size:"small"}),":",f.name]});const k=x==null?void 0:x.find(l=>l.id===p);return k?`${k.name}:${f.name}`:f.name},[x,g]);if(y.useEffect(()=>{(async()=>{if(u){d(!0);try{const f=await V.authorization.getUser({id:u});b(f)}catch(f){f instanceof Ee&&f.code==="E4041"||(console.error("Failed to get user details:",f),i.error(a("user.detailLoadError",{defaultValue:"Failed to load user details"})))}finally{d(!1)}}})()},[u,a]),h)return e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(q,{size:"large"})});if(!n)return e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx(Se,{level:4,children:a("user.notFound",{defaultValue:"User not found"})}),e.jsx(z,{type:"primary",onClick:()=>s("/authorization/users"),children:a("user.backToList",{defaultValue:"Back to User List"})})]});const _=()=>n.mfa_enabled?e.jsx(w,{status:"success",text:a("user.mfaEnabled",{defaultValue:"Enabled"})}):n.mfa_enforced?e.jsx(w,{status:"warning",text:a("user.mfaEnforced",{defaultValue:"Enforced"})}):e.jsx(w,{status:"default",text:a("user.mfaDisabled",{defaultValue:"Disabled"})});return e.jsx(M,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(re,{size:64,icon:e.jsx(Y,{}),src:n.avatar,style:{marginRight:16}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:n.username}),e.jsx("div",{style:{color:"#888"},children:n.email})]})]}),extra:e.jsxs(B,{children:[e.jsx(z,{icon:e.jsx(we,{}),onClick:()=>s("/authorization/users"),children:m("back",{defaultValue:"Back"})}),e.jsx(z,{type:"primary",icon:e.jsx(ee,{}),onClick:()=>s(`/authorization/users/${u}/edit`),children:m("edit",{defaultValue:"Edit"})})]}),children:e.jsxs(te,{defaultActiveKey:"basic",children:[e.jsx(X,{tab:a("user.basicInfo",{defaultValue:"Basic Information"}),children:e.jsxs(E,{bordered:!0,column:2,style:{marginTop:16},children:[e.jsx(E.Item,{label:a("user.username",{defaultValue:"Username"}),children:n.username}),e.jsx(E.Item,{label:a("user.fullName",{defaultValue:"Full Name"}),children:n.full_name}),e.jsx(E.Item,{label:a("user.email",{defaultValue:"Email"}),children:n.email}),e.jsx(E.Item,{label:a("user.status",{defaultValue:"Status"}),children:n.status==="active"?e.jsx(w,{status:"success",text:a("user.statusActive",{defaultValue:"Active"})}):e.jsx(w,{status:"error",text:a(`user.statusEnum.${n.status}`,{defaultValue:n.status.charAt(0).toUpperCase()+n.status.slice(1)})})}),e.jsx(E.Item,{label:a("user.roles",{defaultValue:"Roles"}),span:2,children:n.roles&&n.roles.length>0?n.roles.map(p=>e.jsx(S,{color:"blue",children:v?c(p.organization_id,p):p.name},p.id)):e.jsx(S,{children:a("user.noRole",{defaultValue:"No Role"})})}),e.jsx(E.Item,{label:a("user.mfa",{defaultValue:"MFA"}),children:_()}),e.jsx(E.Item,{label:a("user.lastLogin",{defaultValue:"Last Login"}),children:n.last_login?N(n.last_login):a("user.neverLogin",{defaultValue:"Never"})}),e.jsx(E.Item,{label:a("user.createdAt",{defaultValue:"Created At"}),children:N(n.created_at)}),e.jsx(E.Item,{label:a("user.updatedAt",{defaultValue:"Updated At"}),children:N(n.updated_at)})]})},"basic"),e.jsx(X,{disabled:!P("authorization:user:view_audit_logs"),tab:a("user.auditLogs",{defaultValue:"Audit Logs"}),children:e.jsx(Ue,{userId:u||""})},"logs")]})})},Oe=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"})),{Option:G}=L,Ie=()=>{const{id:u=""}=se(),s=Z(),{t:a}=R("authorization"),{t:m}=R("common"),[h]=j.useForm(),d=!!u,{enableMultiOrg:n}=Q(),{data:b,loading:P}=U(async()=>(await V.system.listOrganizations({current:1,page_size:1e3})).data||[],{refreshDeps:[n],onError:l=>{i.error(a("organizations.loadError",{defaultValue:"Failed to load organizations",error:l.message}))},cacheKey:"fetchAllOrganizations",cacheTime:1e3*60*10}),v=y.useCallback((l,o)=>{if(P)return e.jsxs(e.Fragment,{children:[e.jsx(q,{size:"small"}),":",o.name]});const A=b==null?void 0:b.find(K=>K.id===l);return A?`${A.name}:${o.name}`:o.name},[b,P]),{data:x,loading:g}=U(async()=>(await V.authorization.listRoles({})).data.map(o=>({...o,label:o.name,value:o.id}))),{loading:c}=U(async()=>{if(!(!d||!h))try{const l=await V.authorization.getUser({id:u});return h.setFieldsValue({username:l.username,email:l.email,full_name:l.full_name,status:l.status,role_ids:l.roles?l.roles.map(o=>o.id):[],mfa_enforced:l.mfa_enforced}),l}catch{i.error(a("user.loadError",{defaultValue:"Failed to load user data"}))}},{refreshDeps:[u,h]}),{run:_,loading:p}=U(async l=>{try{if(d)await V.authorization.updateUser({id:u},{email:l.email,avatar:l.avatar,full_name:l.full_name,status:l.status,mfa_enforced:l.mfa_enforced,role_ids:l.role_ids}),i.success(a("user.updateSuccess",{defaultValue:"User updated successfully"})),s(`/authorization/users/${u}`);else{const o={username:l.username,avatar:l.avatar,password:l.password,email:l.email,full_name:l.full_name,mfa_enforced:l.mfa_enforced,role_ids:l.role_ids},A=await V.authorization.createUser(o);i.success(a("user.createSuccess",{defaultValue:"User created successfully"})),s(`/authorization/users/${A.id}`)}}catch(o){i.error(d?a("user.updateError",{defaultValue:"Failed to update user",error:o}):a("user.createError",{defaultValue:"Failed to create user",error:o}))}},{manual:!0}),f=(l,o)=>d?Promise.resolve():o?o.length<8?Promise.reject(new Error(a("user.passwordTooShort",{defaultValue:"Password must be at least 8 characters long"}))):Promise.resolve():Promise.reject(new Error(a("user.passwordRequired",{defaultValue:"Password is required"}))),k=(l,o)=>d?Promise.resolve():o?o!==h.getFieldValue("password")?Promise.reject(new Error(a("user.passwordMismatch",{defaultValue:"Passwords do not match"}))):Promise.resolve():Promise.reject(new Error(a("user.confirmPasswordRequired",{defaultValue:"Please confirm your password"})));return e.jsx(M,{title:d?a("user.editTitle",{defaultValue:"Edit User"}):a("user.createTitle",{defaultValue:"Create User"}),loading:c||g,children:e.jsxs(j,{form:h,layout:"horizontal",onFinish:_,labelCol:{sm:{span:24},md:{span:6}},wrapperCol:{sm:{span:24},md:{span:18}},size:"middle",style:{maxWidth:"500px",margin:"0 auto"},initialValues:{status:"active",role_ids:[]},children:[e.jsx(j.Item,{name:"avatar",label:a("user.avatar",{defaultValue:"Avatar"}),children:e.jsx(ze,{})}),e.jsx(j.Item,{name:"username",label:a("user.username",{defaultValue:"Username"}),rules:[{required:!d,message:a("user.usernameRequired",{defaultValue:"Username is required"})}],children:e.jsx(F,{disabled:d,placeholder:a("user.usernamePlaceholder",{defaultValue:"Enter username"})})}),e.jsx(j.Item,{name:"email",label:a("user.email",{defaultValue:"Email"}),rules:[{required:!0,message:a("user.emailRequired",{defaultValue:"Email is required"})},{type:"email",message:a("user.emailInvalid",{defaultValue:"Invalid email format"})}],children:e.jsx(F,{placeholder:a("user.emailPlaceholder",{defaultValue:"Enter email address"})})}),e.jsx(j.Item,{name:"full_name",label:a("user.fullName",{defaultValue:"Full Name"}),rules:[{required:!0,message:a("user.fullNameRequired",{defaultValue:"Full name is required"})}],children:e.jsx(F,{placeholder:a("user.fullNamePlaceholder",{defaultValue:"Enter full name"})})}),d&&e.jsx(j.Item,{name:"status",label:a("user.status",{defaultValue:"Status"}),rules:[{required:!0,message:a("user.statusRequired",{defaultValue:"Status is required"})}],children:e.jsxs(L,{placeholder:a("user.statusPlaceholder",{defaultValue:"Select status"}),children:[e.jsx(G,{value:"active",children:a("user.statusActive",{defaultValue:"Active"})}),e.jsx(G,{value:"disabled",children:a("user.statusDisabled",{defaultValue:"Disabled"})}),e.jsx(G,{value:"password_expired",children:a("user.statusEnum.password_expired",{defaultValue:"Password Expired"})})]})}),e.jsx(j.Item,{name:"mfa_enforced",label:a("user.mfaEnforced",{defaultValue:"MFA Enforced"}),children:e.jsx(ye,{})}),!d&&e.jsxs(e.Fragment,{children:[e.jsx(j.Item,{name:"password",label:a("user.password",{defaultValue:"Password"}),rules:[{validator:f}],children:e.jsx(F.Password,{visibilityToggle:!1,autoComplete:"new-password",placeholder:a("user.passwordPlaceholder",{defaultValue:"Enter password"})})}),e.jsx(j.Item,{name:"confirm_password",label:a("user.confirmPassword",{defaultValue:"Confirm Password"}),rules:[{validator:k}],dependencies:["password"],children:e.jsx(F.Password,{placeholder:a("user.confirmPasswordPlaceholder",{defaultValue:"Confirm password"})})})]}),e.jsx(j.Item,{name:"role_ids",label:a("user.roles",{defaultValue:"Roles"}),children:e.jsx(L,{mode:"multiple",placeholder:a("user.selectRoles",{defaultValue:"Select roles"}),options:x==null?void 0:x.map(l=>({...l,label:n?v(l.organization_id,l):l.name})),optionFilterProp:"label",loading:g})}),e.jsx(j.Item,{wrapperCol:{offset:9},children:e.jsxs(B,{children:[e.jsx(z,{type:"primary",htmlType:"submit",loading:p,children:d?m("update",{defaultValue:"Update"}):m("create",{defaultValue:"Create"})}),e.jsx(z,{onClick:()=>s(d?`/authorization/users/${u}`:"/authorization/users"),children:m("cancel",{defaultValue:"Cancel"})})]})})]})})},Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));export{$e as U,Oe as a,Ne as b};
