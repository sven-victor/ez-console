import{j as e,S as G,N as q,c as B,D as O,d as ee,u as I,A as te,r as d,I as se,U as ae,M as N,l as ne,e as T,P as re,R as ie,f as le,L as oe,g as J,h as ce,k as de,F as f,m as k,n as S,s as j,o as ue,C as _,p as H,q as me,t as he,v as pe,w as fe,x as K,Q as xe,y as X,z as ge,E as A,G as je,T as ye,H as Se,J as ve,K as we,O as z,V as $,W as Ie,X as U,Y as W,Z as C,_ as V,$ as be,a0 as Fe,a1 as ke,a2 as Ae}from"./vendor.Bo5zsZF4.js";import{u as Le,a as Z}from"./contexts.CmYLKDr7.js";import{u as Q,b as M,a as Ce,c as Te,A as Pe,d as Re,e as _e,f as ze,v as De,h as Me,t as Ee,i as $e,j as Ve,k as Be,l as Ne}from"./base.Dox78hP9.js";const lt=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100%"},children:e.jsx(G,{size:"large",tip:"Loading..."})}),ot=({element:t,requiredPermission:a,requiredPermissions:s})=>{const{user:n,loading:r}=Le(),{hasPermission:l,hasAllPermissions:o}=Z();return r?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(G,{size:"large",tip:"Loading..."})}):n?a&&!l(a)?e.jsx(q,{to:"/forbidden",replace:!0}):s&&!o(s)?e.jsx(q,{to:"/forbidden",replace:!0}):t:(window.location.href="/console/login?redirect="+encodeURIComponent(window.location.href),null)},Ue=B(({token:t,css:a})=>({container:a`
      ${a`
        @media screen and (max-width: ${t.screenXS}px) {
          width: 100% !important;
          > * {
            border-radius: 0 !important;
          }
        }
      `}
    > *{
      background-color: ${t.colorBgElevated};
      border-radius: 4px;
      box-shadow: ${t.boxShadowTertiary};
    }
    `,iconStyle:{cursor:"pointer",padding:"12px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:18,verticalAlign:"middle","&:hover":{color:t.colorPrimaryTextHover}}})),qe=({overlayClassName:t,overlay:a,children:s,...n})=>{const{styles:r}=Ue();return e.jsx(O,{dropdownRender:a,overlayClassName:ee(r.container,t),...n,children:e.jsx("span",{className:r.iconStyle,children:s})})},He=()=>e.jsxs("svg",{viewBox:"0 0 24 24",focusable:"false",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:[e.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z ",className:"css-c4d79v"})]}),Ke=B(()=>({menuItemStyle:{minWidth:"160px"},menuItemIconStyle:{marginRight:"8px"}})),We=[{lang:"en-US",label:"English",icon:"🇺🇸"},{lang:"sv-SE",label:"Svenska",icon:"🇸🇪"},{lang:"ar-AE",label:"العربية",icon:"🇦🇪"},{lang:"de-DE",label:"Deutsch",icon:"🇩🇪"},{lang:"es-ES",label:"Español",icon:"🇪🇸"},{lang:"fr-FR",label:"Français",icon:"🇫🇷"},{lang:"zh-CN",label:"中文",icon:"🇨🇳"}],ct=()=>{const{i18n:t}=I(),{styles:a}=Ke(),s=r=>{t.changeLanguage(r)},n={selectedKeys:[t.language],onClick:r=>{s(r.key)},items:We.map(r=>({key:r.lang,className:a.menuItemStyle,label:e.jsxs(e.Fragment,{children:[e.jsx("span",{role:"img","aria-label":(r==null?void 0:r.label)||"en-US",className:a.menuItemIconStyle,children:(r==null?void 0:r.icon)||"🌐"}),(r==null?void 0:r.label)||"en-US"]})}))};return e.jsx(qe,{menu:n,children:e.jsx(He,{})})},Qe=B(({css:t})=>({avatarItem:t`
    :hover {
      background: rgba(0, 0, 0, 0.12);
    }
    padding: 5px;
  `})),Y=t=>ne.isString(t)&&t.match(/^[-_a-zA-Z0-9]+$/)?M.endsWith("/")?M+`files/${t}`:M+`/files/${t}`:t,Ge=({src:t,...a})=>e.jsx(te,{src:Y(t),...a}),Je=({onChange:t,shape:a="square"})=>{const[s,n]=d.useState([]),{styles:r}=Qe(),[l,o]=d.useState(!1),[h,p]=d.useState(!0),[x,y]=d.useState(0),{run:c,loading:u}=T(()=>Ce(x+1,40,"avatar","public",""),{manual:!0,onSuccess:i=>{n([...s,...i]),p(i.length===40),y(x+1)}}),v=()=>{p(!0),y(0),n([])};return e.jsx(re,{style:{zIndex:1e3},onOpenChange:i=>{o(i),i?c():v()},open:l,content:e.jsx("div",{style:{width:360,height:200},children:e.jsx("div",{id:"iconsScrollableDiv",style:{height:"100%",overflow:"auto"},children:e.jsx(le,{dataLength:s.length,next:()=>{c()},hasMore:h,loader:e.jsx(ce,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:e.jsx(J,{plain:!0,children:"End"}),scrollableTarget:"iconsScrollableDiv",children:e.jsx(oe,{grid:{gutter:16,column:8},dataSource:s,style:{margin:"0 8px"},loading:u,renderItem:({id:i})=>e.jsx("div",{className:r.avatarItem,onClick:g=>{g.stopPropagation(),t==null||t(i),o(!1),v()},children:e.jsx(Ge,{shape:a,src:i})})})})})}),placement:"bottom",trigger:"hover",children:e.jsx(ie,{shape:a,style:{width:112,height:112,placeContent:"center"}})})},Xe=({value:t,onChange:a,shape:s,...n})=>{const[r,l]=d.useState(void 0),[o,h]=d.useState(!1),[p,x]=d.useState(void 0),y=async c=>{h(!0),x(c.url??c.preview)};return d.useEffect(()=>{l(t?{uid:t,name:t,url:Y(t)}:void 0)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(se,{beforeCrop:async c=>{if(c.type==="image/svg+xml"){const u=await Q(c,"avatar");return u.length>0&&(a==null||a(u[0].id)),!1}return!0},children:e.jsx(ae,{customRequest:async c=>{var v,i;const u=await Q(c.file,"avatar","public");u.length>0?((v=c.onSuccess)==null||v.call(c,u[0].id),a==null||a(u[0].id)):(i=c.onError)==null||i.call(c,new Error("Upload file failed"))},listType:"picture-card",onPreview:y,maxCount:1,onChange:({file:c})=>{switch(c.status){case"removed":a==null||a(void 0);break;case"done":break;default:l(c);break}},fileList:r?[r]:[],...n,children:r?void 0:e.jsx(Je,{shape:s,onChange:a})})}),e.jsx(N,{open:o,footer:null,onCancel:()=>h(!1),children:e.jsx("img",{style:{width:"100%"},src:p})})]})},Ze=de,Ye=t=>Ze[t],dt=({iconName:t})=>{if(!t)return null;const a=Ye(t);return a?e.jsx(d.Suspense,{fallback:null,children:e.jsx(a,{})}):null},ut=({onSuccess:t})=>{const{t:a}=I("authorization"),{t:s}=I("common"),[n]=f.useForm(),{run:r,loading:l}=T(Te,{manual:!0,onSuccess:()=>{j.success(a("user.passwordChanged")),n.resetFields(),t==null||t()},onError:o=>{if(o instanceof Pe){const h=o.code??"normal";j.error(a(`user.passwordChangeFailed.${h}`,{error:o.message,defaultValue:"Password change failed: {{error}}"}))}else j.error(a("user.passwordChangeFailed.normal",{error:o.message,defaultValue:"Password change failed: {{error}}"}));console.error("Failed to change password:",o)}});return e.jsxs(f,{form:n,layout:"vertical",onFinish:r,style:{maxWidth:500,margin:"0 auto"},children:[e.jsx(f.Item,{name:"old_password",label:a("user.oldPassword"),rules:[{required:!0,message:a("validation.oldPasswordRequired")}],children:e.jsx(k.Password,{})}),e.jsx(f.Item,{name:"new_password",label:a("user.newPassword"),rules:[{required:!0,message:a("validation.newPasswordRequired")},{min:8,message:a("validation.passwordMinLength")}],children:e.jsx(k.Password,{})}),e.jsx(f.Item,{name:"confirm_password",label:a("user.confirmPassword"),rules:[{required:!0,message:a("validation.confirmPasswordRequired")},({getFieldValue:o})=>({validator(h,p){return!p||o("new_password")===p?Promise.resolve():Promise.reject(new Error(a("validation.passwordMismatch")))}})],children:e.jsx(k.Password,{})}),e.jsx(f.Item,{children:e.jsx(S,{type:"primary",htmlType:"submit",loading:l,children:s("save")})})]})},mt=({user:t,onSuccess:a})=>{const{t:s}=I("authorization"),{t:n}=I("common"),[r]=f.useForm(),[l,o]=d.useState(!1);ue.useEffect(()=>{t&&r.setFieldsValue({username:t.username,email:t.email,full_name:t.full_name,phone:t.phone||"",avatar:t.avatar})},[t,r]);const h=async p=>{try{o(!0),await Re(p),j.success(n("updateSuccess")),a()}catch(x){j.error(n("updateFailed")),console.error("Failed to update user information:",x)}finally{o(!1)}};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("div",{style:{marginBottom:24,textAlign:"center"},children:[e.jsx("h2",{children:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)}),(t==null?void 0:t.roles)&&t.roles.length>0&&e.jsxs("div",{children:[s("user.roles"),": ",t.roles.map(p=>p.name).join(", ")]})]}),e.jsxs(f,{form:r,layout:"vertical",onFinish:h,style:{width:"100%",maxWidth:500},children:[e.jsx(f.Item,{style:{marginBottom:24,textAlign:"center",justifyItems:"center"},name:"avatar",children:e.jsx(Xe,{})}),e.jsx(f.Item,{name:"username",label:s("user.username"),children:e.jsx(k,{disabled:!0})}),e.jsx(f.Item,{name:"email",label:s("user.email"),rules:[{required:!0,message:s("validation.emailRequired")},{type:"email",message:s("validation.emailInvalid")}],children:e.jsx(k,{})}),e.jsx(f.Item,{name:"full_name",label:s("user.fullName"),rules:[{required:!0,message:s("validation.fullNameRequired")}],children:e.jsx(k,{})}),e.jsx(f.Item,{name:"phone",label:s("user.phone"),children:e.jsx(k,{})}),e.jsx(f.Item,{children:e.jsx(S,{type:"primary",htmlType:"submit",loading:l,children:n("save")})})]})]})},ht=({user:t,onSuccess:a})=>{const{t:s}=I("authorization"),{t:n}=I("common"),[r,l]=d.useState(0),[o,h]=d.useState(!1),[p,x]=d.useState(!0),[y,c]=d.useState(""),[u,v]=d.useState("totp"),{run:i,data:g={secret:"",qr_code:"",token:void 0}}=T(()=>_e(u),{manual:!0,onSuccess:()=>{l(1)},onBefore:()=>{h(!0)},onFinally:()=>{h(!1)}}),D=async()=>{if(!y){j.warning(s("mfa.enterVerificationCode"));return}const w={code:y,mfa_type:u};"token"in g&&(w.token=g.token);try{h(!0),await De(w),j.success(s("mfa.enableSuccess")),l(2),a()}catch(F){j.error(s("mfa.verificationFailed")),console.error("Failed to verify MFA:",F)}finally{h(!1)}},m=async()=>{try{h(!0),await ze(),j.success(s("mfa.disableSuccess")),a()}catch(w){j.error(n("operationFailed")),console.error("Failed to disable MFA:",w)}finally{h(!1)}},b=()=>{if(!t)return null;if(t.mfa_enabled)return e.jsx(H,{status:"success",title:s("mfa.enabled"),subTitle:s("mfa.enabledDescription"),extra:e.jsx(S,{danger:!0,onClick:()=>{N.confirm({title:s("mfa.confirmDisable"),content:s("mfa.disableWarning"),onOk:m,okButtonProps:{danger:!0}})},children:s("mfa.disable")})});const w=()=>{var F;switch(r){case 0:return e.jsxs("div",{style:{textAlign:"center",marginTop:20},children:[e.jsx(K,{message:e.jsxs("div",{children:[e.jsx("p",{children:s("mfa.setupInfo")}),e.jsx("p",{children:s(u==="totp"?"mfa.totpDescription":"mfa.emailDescription")})]}),type:"info",showIcon:!0,style:{marginBottom:20}}),e.jsx(S,{type:"primary",onClick:i,loading:o,children:s("mfa.startSetup")})]});case 1:return e.jsxs("div",{style:{textAlign:"center",marginTop:20},children:[e.jsx(K,{message:s("mfa.scanQrCode"),type:"info",showIcon:!0,style:{marginBottom:20,display:u==="totp"?"block":"none"}}),e.jsx("div",{style:{display:u==="totp"?"flex":"none",justifyContent:"center",marginBottom:24},children:e.jsx(xe,{value:g.qr_code??"",size:200})}),e.jsx("div",{style:{marginBottom:16,display:u==="email"?"block":"none"},children:e.jsxs("p",{children:[s("user.email"),": ",e.jsx("strong",{children:t==null?void 0:t.email})]})}),e.jsx("div",{style:{marginBottom:16,display:u==="totp"?"block":"none"},children:e.jsxs("p",{children:[s("mfa.secretKey"),": ",e.jsx("strong",{children:p?"*".repeat(((F=g.secret)==null?void 0:F.length)??0):g.secret}),e.jsx(S,{type:"link",onClick:()=>x(!p),icon:p?e.jsx(X,{}):e.jsx(ge,{})})]})}),e.jsx("div",{style:{marginBottom:24},children:e.jsx(k,{placeholder:s("mfa.enterCode"),style:{width:200},maxLength:6,value:y,onChange:P=>c(P.target.value)})}),e.jsxs(A,{children:[e.jsx(S,{onClick:()=>l(0),children:n("previous")}),e.jsx(S,{type:"primary",onClick:D,loading:o,children:n("verify")})]})]});case 2:return e.jsx(H,{status:"success",title:s("mfa.setupSuccess"),subTitle:s("mfa.setupSuccessDescription"),extra:e.jsx(S,{type:"primary",onClick:()=>l(0),children:n("done")})});default:return null}};return e.jsxs("div",{children:[e.jsxs("div",{style:{display:r===2?"none":"unset"},children:[e.jsx(me,{defaultValue:"totp",onChange:F=>{v(F),l(0)},value:u,options:[{value:"totp",icon:e.jsx(he,{}),label:s("mfa.totp",{defaultValue:"TOTP"})},{value:"email",icon:e.jsx(pe,{}),label:s("mfa.email",{defaultValue:"E-Mail"})}]}),e.jsx(J,{})]}),e.jsx(fe,{current:r,items:[{title:s(u==="totp"?"mfa.totpStep1":"mfa.emailStep1"),description:s(u==="totp"?"mfa.totpStep1Description":"mfa.emailStep1Description")},{title:s(u==="totp"?"mfa.totpStep2":"mfa.emailStep2"),description:s(u==="totp"?"mfa.totpStep2Description":"mfa.emailStep2Description")},{title:s(u==="totp"?"mfa.totpStep3":"mfa.emailStep3"),description:s(u==="totp"?"mfa.totpStep3Description":"mfa.emailStep3Description")}],style:{marginBottom:30}}),w()]})};return e.jsx(_,{title:s("mfa.title"),children:b()})},{Text:E}=ye,pt=()=>{const{t}=I("authorization"),{t:a}=I("common"),[s,n]=d.useState([]),[r,l]=d.useState(!1),[o,h]=d.useState(null),[p,x]=d.useState(!1),y=async()=>{try{l(!0);const i=await Me();n(i)}catch(i){j.error(t("session.getSessionsFailed",{error:i,defaultValue:"Failed to get session list: {{error}}"}))}finally{l(!1)}};d.useEffect(()=>{y()},[]);const c=async i=>{try{h(i),await Ee(i),n(s.filter(g=>g.id!==i)),j.success(t("session.terminateSuccess",{defaultValue:"Session terminated successfully"}))}catch(g){j.error(t("session.terminateFailed",{error:g,defaultValue:"Failed to terminate session: {{error}}"}))}finally{h(null)}},u=async()=>{try{x(!0),await $e(),n(s.filter(i=>i.is_current)),j.success(t("session.terminateAllSuccess",{defaultValue:"All other sessions terminated successfully"}))}catch(i){j.error(t("session.terminateAllFailed",{error:i,defaultValue:"Failed to terminate all other sessions: {{error}}"}))}finally{x(!1)}},v=[{title:t("session.device"),dataIndex:"user_agent",key:"device",render:(i,g)=>e.jsxs(A,{direction:"vertical",size:0,children:[e.jsxs(A,{children:[e.jsx(je,{}),e.jsx(E,{strong:!0,children:i})]}),e.jsxs(A,{children:[e.jsx(Se,{}),e.jsx(E,{type:"secondary",children:g.location})]})]})},{title:t("session.ipAddress"),dataIndex:"ip_address",key:"ip_address",render:i=>e.jsxs(A,{children:[e.jsx(ve,{}),e.jsx("span",{children:i})]})},{title:t("session.lastActive"),dataIndex:"last_active_at",key:"last_active",render:i=>e.jsxs(A,{children:[e.jsx(we,{}),e.jsx("span",{children:new Date(i).toLocaleString()})]})},{title:t("session.status"),key:"status",render:i=>i.is_current?e.jsx(z,{color:"green",children:t("session.current")}):e.jsx(z,{color:"blue",children:t("session.active")})},{title:a("actions"),key:"action",render:i=>i.is_current?e.jsx(E,{type:"secondary",children:t("session.currentSession")}):e.jsx($,{title:t("session.confirmTerminate"),onConfirm:()=>c(i.id),okText:a("confirm"),cancelText:a("cancel"),children:e.jsx(S,{type:"link",danger:!0,loading:o===i.id,children:t("session.terminate")})})}];return e.jsx(_,{title:t("session.title"),extra:s.length>1&&e.jsx($,{title:t("session.confirmTerminateAll"),onConfirm:u,okText:a("confirm"),cancelText:a("cancel"),children:e.jsx(S,{danger:!0,loading:p,children:t("session.terminateOthers")})}),children:s.length===0?e.jsx(Ie,{description:t("session.noSessions")}):e.jsx(U,{columns:v,dataSource:s,rowKey:"id",loading:r,pagination:!1})})},{RangePicker:Oe}=be,{Option:L}=V,et=t=>t||"N/A",tt=(t,a)=>t==="success"?e.jsx(z,{color:"success",children:a("statuses.success")}):e.jsx(z,{color:"error",children:a("statuses.failed")}),ft=({userId:t,request:a=n=>t?Ne(t,n):Be(n),columnsFilter:s=n=>n})=>{const{t:n}=I("authorization"),{t:r}=I("common"),[l,o]=d.useState({current:1,pageSize:10,total:0}),[h,p]=d.useState({}),[x]=f.useForm(),{loading:y,run:c,data:{data:u}={}}=T(async(m=h,b=1,w=10)=>a({...m,current:b??1,page_size:w??10}),{onError(m){j.error(n("auditLog.fetchFailed",{error:m}))},onSuccess({total:m}){o({...l,total:m})}});d.useEffect(()=>{c(h,1,l.pageSize)},[]);const v=m=>{o({...l,current:m.current,pageSize:m.pageSize}),c({},m.current,m.pageSize)},i=m=>{var b,w,F,P;c({...m,start_time:(w=(b=m.dateRange)==null?void 0:b[0])==null?void 0:w.toISOString(),end_time:(P=(F=m.dateRange)==null?void 0:F[1])==null?void 0:P.toISOString()},1,l.pageSize)},g=()=>{x.resetFields(),p({}),o({...l,current:1}),c({},1,l.pageSize)},D=[{title:n("auditLog.timestamp"),dataIndex:"timestamp",key:"timestamp",render:m=>Ve(m)},{title:n("auditLog.action"),dataIndex:"action",key:"action",render:(m,b)=>m?n(`action.${m.replace(":",".")}`,{defaultValue:b.action_name}):b.action_name??b.action},{title:n("auditLog.user_agent"),dataIndex:"user_agent",key:"user_agent"},{title:n("auditLog.ip"),dataIndex:"ip",key:"ip",render:m=>et(m)},{title:n("auditLog.status"),dataIndex:"status",key:"status",render:m=>tt(m,n)},{title:n("auditLog.details"),dataIndex:"details",key:"details",render:m=>e.jsx(S,{type:"link",icon:e.jsx(X,{}),onClick:()=>{N.info({title:n("auditLog.details"),content:JSON.stringify(m)})}})}];return e.jsxs("div",{children:[e.jsx(_,{style:{marginBottom:16},children:e.jsxs(f,{form:x,layout:"horizontal",onFinish:i,initialValues:h,children:[e.jsxs(W,{gutter:24,children:[e.jsx(C,{span:6,children:e.jsx(f.Item,{name:"search",label:n("auditLog.search"),children:e.jsx(k,{placeholder:n("auditLog.searchPlaceholder")})})}),e.jsx(C,{span:6,children:e.jsx(f.Item,{name:"action",label:n("auditLog.action"),children:e.jsxs(V,{allowClear:!0,placeholder:n("auditLog.selectAction"),children:[e.jsx(L,{value:"login",children:n("actions.login")}),e.jsx(L,{value:"logout",children:n("actions.logout")}),e.jsx(L,{value:"password_reset",children:n("actions.passwordReset")}),e.jsx(L,{value:"mfa_change",children:n("actions.mfaChange")})]})})}),e.jsx(C,{span:6,children:e.jsx(f.Item,{name:"status",label:n("auditLog.status"),children:e.jsxs(V,{allowClear:!0,placeholder:n("auditLog.selectStatus"),children:[e.jsx(L,{value:"success",children:n("statuses.success")}),e.jsx(L,{value:"failed",children:n("statuses.failed")})]})})}),e.jsx(C,{span:6,children:e.jsx(f.Item,{name:"dateRange",label:n("auditLog.dateRange"),children:e.jsx(Oe,{style:{width:"100%"}})})})]}),e.jsx(W,{children:e.jsx(C,{span:24,style:{textAlign:"right"},children:e.jsxs(A,{children:[e.jsx(S,{onClick:g,children:r("reset")}),e.jsx(S,{type:"primary",htmlType:"submit",icon:e.jsx(Fe,{}),children:r("search")})]})})})]})}),e.jsxs(_,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(S,{type:"primary",icon:e.jsx(ke,{}),onClick:g,style:{marginRight:8},children:r("refresh")})}),e.jsx(U,{rowKey:"id",columns:s(D),dataSource:u,pagination:{...l,showSizeChanger:!0,showTotal:m=>r("totalItems",{total:m})},loading:y,onChange:v,scroll:{x:"max-content"}})]})]})},st=({permission:t,permissions:a=[],checkAll:s=!1,fallback:n=null,children:r})=>{const{hasPermission:l,hasAnyPermission:o,hasAllPermissions:h,isAdmin:p,loading:x}=Z();return x?null:p?e.jsx(e.Fragment,{children:r}):t?l(t)?e.jsx(e.Fragment,{children:r}):e.jsx(e.Fragment,{children:n}):a.length>0?(s?h(a):o(a))?e.jsx(e.Fragment,{children:r}):e.jsx(e.Fragment,{children:n}):e.jsx(e.Fragment,{children:r})},R=t=>{const{permission:a,icon:s,tooltip:n,onClick:r,confirm:l,...o}=t;return a?e.jsx(st,{permission:a,children:R({icon:s,tooltip:n,onClick:r,confirm:l,...o})},t.key):l?e.jsx($,{title:l.title,onConfirm:l.onConfirm||r,okText:l.okText,cancelText:l.cancelText,children:R({icon:s,tooltip:n,...o})},t.key):n?e.jsx(Ae,{title:n,children:R({icon:s,onClick:r,...o})},t.key):d.createElement(S,{type:"text",size:"small",icon:s,onClick:r,...o,key:t.key})},xt=({actions:t})=>t.filter(a=>!a.hidden).map(a=>R(a)),at=({request:t,tableRef:a,...s},n)=>{const[r,l]=d.useState({current:1,pageSize:10}),[o,h]=d.useState(0),{data:p,loading:x,refresh:y}=T(async()=>{const c=await t({current:r.current,page_size:r.pageSize});return h(c.total),c.data},{refreshDeps:[r]});return d.useImperativeHandle(n,()=>({reload:()=>{y()}})),e.jsx(U,{rowKey:"id",loading:x,dataSource:p??[],pagination:{...r,total:o,onChange:(c,u)=>{l({current:c,pageSize:u})}},...s,ref:a})},gt=({actionRef:t,...a})=>{const[s,n]=d.useState();return d.useEffect(()=>{n(d.forwardRef(at))},[]),s?e.jsx(s,{...a,ref:t}):null};export{Ge as A,dt as D,qe as H,lt as L,ot as P,gt as T,ft as U,ct as a,ut as b,mt as c,ht as d,pt as e,st as f,We as g,xt as h,Xe as i};
