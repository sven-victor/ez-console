const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.B9OfxFVF.js","assets/vendor.JHmizRYD.js","assets/vite.BF1G3H_w.js","assets/vendor.D-Ncpkvi.css","assets/contexts.BmmqIIgB.js","assets/base.C-POyhJq.js","assets/components.CNDiCsnG.js","assets/login.BNZddzo9.js","assets/profile.D0mDQOSl.js","assets/not_found.BkFM4lQK.js","assets/forbidden.DIuDkBmm.js","assets/users.DSO8E6hS.js","assets/roles.2PMNADrC.js","assets/system-settings.C7aUnEcJ.js","assets/audit.DLBxn4YI.js","assets/service-accounts.J5FKTjbo.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./vite.BF1G3H_w.js";import{r as i,j as e,ad as Q,ae as G,af as z,ag as W,ah as Y,ai as J,aj as L,ak as E,u as I,al as X,ac as Z,am as y,an as ee,S as te,n as ae,ao as ne,ap as ie,aq as se,ar as oe,as as re,at as le,au as ce,av as ue,aw as he,ax as de,ay as me,az as pe,aA as S,aB as _e,aC as fe,aD as xe,aE as ge,aF as ve,aG as D,aH as je}from"./vendor.JHmizRYD.js";import{L as ye,H as O,A as V,a as ze,P as Ee}from"./components.CNDiCsnG.js";import{a as Re,u as Ae,A as we}from"./contexts.BmmqIIgB.js";import{w as Le}from"./base.C-POyhJq.js";const Ie=i.lazy(()=>c(()=>import("./dashboard.B9OfxFVF.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Se=i.lazy(()=>c(()=>import("./login.BNZddzo9.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),be=i.lazy(()=>c(()=>import("./profile.D0mDQOSl.js"),__vite__mapDeps([8,1,2,3,6,4,5]))),N=i.lazy(()=>c(()=>import("./not_found.BkFM4lQK.js"),__vite__mapDeps([9,1,2,3]))),Pe=i.lazy(()=>c(()=>import("./forbidden.DIuDkBmm.js"),__vite__mapDeps([10,1,2,3]))),$e=i.lazy(()=>c(()=>import("./users.DSO8E6hS.js").then(n=>n.U),__vite__mapDeps([11,1,2,3,6,4,5]))),De=i.lazy(()=>c(()=>import("./users.DSO8E6hS.js").then(n=>n.a),__vite__mapDeps([11,1,2,3,6,4,5]))),T=i.lazy(()=>c(()=>import("./users.DSO8E6hS.js").then(n=>n.b),__vite__mapDeps([11,1,2,3,6,4,5]))),Oe=i.lazy(()=>c(()=>import("./roles.2PMNADrC.js"),__vite__mapDeps([12,1,2,3,6,4,5]))),Ve=i.lazy(()=>c(()=>import("./system-settings.C7aUnEcJ.js").then(n=>n.i),__vite__mapDeps([13,1,2,3,5,6,4]))),Te=i.lazy(()=>c(()=>import("./system-settings.C7aUnEcJ.js").then(n=>n.O),__vite__mapDeps([13,1,2,3,5,6,4]))),ke=i.lazy(()=>c(()=>import("./audit.DLBxn4YI.js"),__vite__mapDeps([14,1,2,3,6,4,5]))),Ne=i.lazy(()=>c(()=>import("./service-accounts.J5FKTjbo.js").then(n=>n.S),__vite__mapDeps([15,1,2,3,6,4,5,9]))),Be=i.lazy(()=>c(()=>import("./service-accounts.J5FKTjbo.js").then(n=>n.a),__vite__mapDeps([15,1,2,3,6,4,5,9]))),l=n=>e.jsx(i.Suspense,{fallback:e.jsx(ye,{}),children:e.jsx(n,{})}),Ce=[{path:"/login",element:l(Se),index:!0},{path:"/404",element:l(N),index:!0},{path:"/403",element:l(Pe),index:!0},{path:"/system/settings/oauth/test-callback",element:l(Te),index:!0}],Fe=[{path:"/",is_private:!0,children:[{path:"/",element:l(Ie),name:"dashboard",icon:e.jsx(Q,{}),index:!0},{path:"/profile",element:l(be),name:void 0,index:!0},{name:"authorization",icon:e.jsx(z,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(G,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:l(Oe),permissions:["authorization:role:view"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(z,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:l($e),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:l(T),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:l(De),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:l(T),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(z,{}),permissions:["authorization:service_account:view"],children:[{element:l(Ne),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:l(Be),permissions:["authorization:service_account:view"],index:!0}]}]},{name:"system",icon:e.jsx(J,{}),permissions:["system:settings:view","system:settings:update","system:audit:view"],children:[{path:"/system/settings",icon:e.jsx(W,{}),index:!0,name:"settings",permissions:["system:settings:view","system:settings:update"],element:l(Ve)},{path:"/system/audit",icon:e.jsx(Y,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:l(ke)}]},{path:"*",element:l(N),index:!0}]}],R=[...Ce,...Fe],{Header:He,Content:Me,Footer:Ue,Sider:qe}=L,{SubMenu:Ke}=E,Qe=()=>{const{t:n,i18n:_}=I(),{t:f}=I("common"),[m,g]=i.useState(!1),h=X(),{hasPermission:s}=Re(),x=Z(),{logout:v,user:r}=Ae(),[B,b]=i.useState([]),[P,C]=i.useState(null),[A,F]=i.useState("Loading..."),[d,H]=i.useState(null);h.pathname!=="/profile"&&(r&&r.mfa_enforced&&!r.mfa_enabled?x("/profile#mfa"):r&&r.status==="password_expired"&&x("/profile#password"));const M=()=>{v(),window.location.href="/console/login?redirect="+encodeURIComponent(window.location.href)},U=[{key:"profile",label:e.jsx(y,{to:"/profile",children:f("profile")})},{key:"logout",label:f("logout"),onClick:M}];i.useEffect(()=>{Le().then(a=>{var t;const o=a.navigation.filter(u=>u.path!==a.home_page),p=[...a.home_page?[{name:"home",path:a.home_page}]:[],...o];p.length>1?b(p):b([]),C(a.logo),H(a),(t=document.getElementById("site-icon"))==null||t.setAttribute("href",a.logo)})},[]),i.useEffect(()=>{_.language&&F((d==null?void 0:d.name_i18n[_.language])||(d==null?void 0:d.name)||"")},[d,_.language]);const w=()=>{const a=le(R,h.pathname),o=[];if(a){for(const[p,t]of a.entries())if(t.route.path==="/"&&!t.route.name)o.push({href:t.route.path,title:f("home"),key:"home"});else if(t.route.name){const u=a.slice(0,p+1).map(j=>j.route.name).filter(Boolean).join(".");o.push({path:t.route.path,title:t.route.name?n(`breadcrumbs.${u}`):void 0,key:t.route.path})}}return o},q=a=>a.some(o=>s(o)),K=ee.flatMapDeep(R,a=>a.children).map(a=>a==null?void 0:a.name).filter(a=>a!==void 0),$=(a,o=[])=>{const p=t=>t&&t.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return a.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!q(t.permissions))return null;const u=p(t.name);if(!t.name)return null;if("children"in t&&t.children){const j=$(t.children,[...o,t.name]);return j.length==0&&t.path?e.jsx(E.Item,{icon:t.icon,children:e.jsx(y,{to:t.path,children:n(`menu.${[...o,t.name].join(".")}`,{defaultValue:u})})},t.path):e.jsx(Ke,{icon:t.icon,title:n(`menu.${[...o,t.name,t.name].join(".")}`,{defaultValue:u}),children:j},t.path??t.name)}return t.name&&t.path?e.jsx(E.Item,{icon:t.icon,children:e.jsx(y,{to:t.path,children:n(`menu.${[...o,t.name].join(".")}`,{defaultValue:u})})},t.path):null}).filter(Boolean)};return i.useEffect(()=>{const a=w().filter(o=>o.path!=="/").map(o=>o.title).join(" - ");a?document.title=`${A} | ${a}`:document.title=A},[w,h.pathname]),e.jsxs(L,{style:{minHeight:"100vh"},children:[e.jsxs(qe,{collapsible:!0,collapsed:m,onCollapse:g,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:P?e.jsx("img",{src:P,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(te,{size:"large",tip:"Loading..."})})}),e.jsx(E,{theme:"dark",defaultOpenKeys:K,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[h.pathname],children:$(R)})]}),e.jsxs(L,{className:"site-layout",children:[e.jsxs(He,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(ae,{type:"text",icon:m?e.jsx(ne,{}):e.jsx(ie,{}),onClick:()=>g(!m),style:{fontSize:"16px",width:64,height:64}}),e.jsxs("div",{style:{marginRight:"20px"},children:[e.jsx(O,{menu:{items:B.map(a=>({key:a.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:a.path,children:n(`menu.${a.name}`,{defaultValue:a.name})})}))},children:e.jsx(se,{})}),e.jsxs(O,{menu:{items:U},children:[r!=null&&r.avatar?e.jsx(V,{src:r.avatar}):e.jsx(V,{icon:e.jsx(z,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em"},children:(r==null?void 0:r.full_name)||(r==null?void 0:r.username)})]}),e.jsx(ze,{})]})]}),e.jsxs(Me,{style:{margin:"0 16px"},children:[e.jsx(oe,{style:{margin:"16px 0"},itemRender:a=>{const o=a.href||a.path;return o?e.jsx(y,{to:o,children:a.title}):e.jsx("span",{children:a.title})},items:w()}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:e.jsx(re,{})})]}),e.jsxs(Ue,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",A]})]})]})},Ge=new ce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),k={"zh-CN":_e,"en-US":S,"de-DE":pe,"es-ES":me,"fr-FR":de,"ar-AE":he,"sv-SE":ue};function We(){const{i18n:n}=I(),[_,f]=i.useState(k[n.language]||S);i.useEffect(()=>{f(k[n.language]||S)},[n.language]);const m=(g,h)=>g.flatMap(s=>s.is_private?[s]:"children"in s&&s.children?s.children:[s]).map((s,x)=>{const v=s.is_private?e.jsx(Ee,{element:e.jsx(Qe,{})}):s.element;if("children"in s&&s.children&&s.children.length>0)return e.jsx(D,{path:s.path,element:v,children:m(s.children,s)},s.path??s.name??x);const{path:r}=s;return e.jsx(D,{path:r,index:s.index,element:v},r??s.name??`${(h==null?void 0:h.path)??""}.${x}`)}).filter(Boolean);return e.jsx(fe,{client:Ge,children:e.jsx(xe,{locale:_,children:e.jsx(we,{children:e.jsx(ge,{basename:"/console/",children:e.jsx(ve,{children:m(R)})})})})})}je.createRoot(document.getElementById("root")).render(e.jsx(We,{}));
