const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.DyBMJ1Ml.js","assets/vendor.5VlR7AZZ.js","assets/vite.BF1G3H_w.js","assets/vendor.D-Ncpkvi.css","assets/contexts.B2_ihE-j.js","assets/client.Bxbi3rzc.js","assets/components.Hu8o1XqG.js","assets/base.BCJy1ny5.js","assets/authorization.BtxSOE4l.js","assets/system.BY_RKaj3.js","assets/oauth.CNxiEEVf.js","assets/login.BkRWmAMr.js","assets/profile.wVapbq3q.js","assets/not_found.DXHeq3fI.js","assets/forbidden.B9DJEbsH.js","assets/users.Cw5QkgA-.js","assets/roles.Bl0U-Olk.js","assets/system-settings.DUiLl1K_.js","assets/audit.dQfu8J94.js","assets/service-accounts.Cx19u737.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./vite.BF1G3H_w.js";import{r as i,j as e,ad as Q,ae as G,af as z,ag as W,ah as Y,ai as J,aj as w,ak as E,u as I,al as X,ac as Z,am as y,an as ee,S as te,n as ae,ao as ne,ap as ie,aq as se,ar as oe,as as re,at as le,au as ce,av as ue,aw as he,ax as de,ay as me,az as pe,aA as b,aB as _e,aC as fe,aD as xe,aE as ge,aF as ve,aG as O,aH as je}from"./vendor.5VlR7AZZ.js";import{L as ye,H as V,A as T,a as ze,P as Ee}from"./components.Hu8o1XqG.js";import{a as Re,u as Ae,A as Le}from"./contexts.B2_ihE-j.js";import{a as we}from"./authorization.BtxSOE4l.js";import{b as Ie}from"./base.BCJy1ny5.js";import{s as be}from"./system.BY_RKaj3.js";import{o as Se}from"./oauth.CNxiEEVf.js";import"./index.Cq3ia0Rf.js";import"./client.Bxbi3rzc.js";const Pe=i.lazy(()=>c(()=>import("./dashboard.DyBMJ1Ml.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),$e=i.lazy(()=>c(()=>import("./login.BkRWmAMr.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),De=i.lazy(()=>c(()=>import("./profile.wVapbq3q.js"),__vite__mapDeps([12,1,2,3,6,4,5,7,8,9,10]))),B=i.lazy(()=>c(()=>import("./not_found.DXHeq3fI.js"),__vite__mapDeps([13,1,2,3]))),Oe=i.lazy(()=>c(()=>import("./forbidden.B9DJEbsH.js"),__vite__mapDeps([14,1,2,3]))),Ve=i.lazy(()=>c(()=>import("./users.Cw5QkgA-.js").then(n=>n.U),__vite__mapDeps([15,1,2,3,6,4,5,7]))),Te=i.lazy(()=>c(()=>import("./users.Cw5QkgA-.js").then(n=>n.a),__vite__mapDeps([15,1,2,3,6,4,5,7]))),k=i.lazy(()=>c(()=>import("./users.Cw5QkgA-.js").then(n=>n.b),__vite__mapDeps([15,1,2,3,6,4,5,7]))),ke=i.lazy(()=>c(()=>import("./roles.Bl0U-Olk.js"),__vite__mapDeps([16,1,2,3,6,4,5,7,8,9,10]))),Ne=i.lazy(()=>c(()=>import("./system-settings.DUiLl1K_.js").then(n=>n.i),__vite__mapDeps([17,1,2,3,6,4,5,7]))),Be=i.lazy(()=>c(()=>import("./system-settings.DUiLl1K_.js").then(n=>n.O),__vite__mapDeps([17,1,2,3,6,4,5,7]))),Ce=i.lazy(()=>c(()=>import("./audit.dQfu8J94.js"),__vite__mapDeps([18,1,2,3,6,4,5,7,8,9,10]))),Fe=i.lazy(()=>c(()=>import("./service-accounts.Cx19u737.js").then(n=>n.S),__vite__mapDeps([19,1,2,3,6,4,5,7,13]))),He=i.lazy(()=>c(()=>import("./service-accounts.Cx19u737.js").then(n=>n.a),__vite__mapDeps([19,1,2,3,6,4,5,7,13]))),l=n=>e.jsx(i.Suspense,{fallback:e.jsx(ye,{}),children:e.jsx(n,{})}),Me=[{path:"/login",element:l($e),index:!0},{path:"/404",element:l(B),index:!0},{path:"/403",element:l(Oe),index:!0},{path:"/system/settings/oauth/test-callback",element:l(Be),index:!0}],Ue=[{path:"/",is_private:!0,children:[{path:"/",element:l(Pe),name:"dashboard",icon:e.jsx(Q,{}),index:!0},{path:"/profile",element:l(De),name:void 0,index:!0},{name:"authorization",icon:e.jsx(z,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(G,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:l(ke),permissions:["authorization:role:view"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(z,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:l(Ve),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:l(k),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:l(Te),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:l(k),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(z,{}),permissions:["authorization:service_account:view"],children:[{element:l(Fe),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:l(He),permissions:["authorization:service_account:view"],index:!0}]}]},{name:"system",icon:e.jsx(J,{}),permissions:["system:settings:view","system:settings:update","system:audit:view"],children:[{path:"/system/settings",icon:e.jsx(W,{}),index:!0,name:"settings",permissions:["system:settings:view","system:settings:update"],element:l(Ne)},{path:"/system/audit",icon:e.jsx(Y,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:l(Ce)}]},{path:"*",element:l(B),index:!0}]}],R=[...Me,...Ue],qe={authorization:we,base:Ie,system:be,oauth:Se},{Header:Ke,Content:Qe,Footer:Ge,Sider:We}=w,{SubMenu:Ye}=E,Je=()=>{const{t:n,i18n:_}=I(),{t:f}=I("common"),[m,g]=i.useState(!1),h=X(),{hasPermission:s}=Re(),x=Z(),{logout:v,user:r}=Ae(),[S,P]=i.useState([]),[$,C]=i.useState(null),[A,F]=i.useState("Loading..."),[d,H]=i.useState(null);h.pathname!=="/profile"&&(r&&r.mfa_enforced&&!r.mfa_enabled?x("/profile#mfa"):r&&r.status==="password_expired"&&x("/profile#password"));const M=()=>{v(),window.location.href="/console/login?redirect="+encodeURIComponent(window.location.href)},U=[{key:"profile",label:e.jsx(y,{to:"/profile",children:f("profile")})},{key:"logout",label:f("logout"),onClick:M}];i.useEffect(()=>{qe.system.getSiteConfig().then(a=>{var t;const o=a.navigation.filter(u=>u.path!==a.home_page),p=[...a.home_page?[{name:"home",path:a.home_page}]:[],...o];p.length>1?P(p):P([]),C(a.logo),H(a),(t=document.getElementById("site-icon"))==null||t.setAttribute("href",a.logo)})},[]),i.useEffect(()=>{_.language&&F((d==null?void 0:d.name_i18n[_.language])||(d==null?void 0:d.name)||"")},[d,_.language]);const L=()=>{const a=le(R,h.pathname),o=[];if(a){for(const[p,t]of a.entries())if(t.route.path==="/"&&!t.route.name)o.push({href:t.route.path,title:f("home"),key:"home"});else if(t.route.name){const u=a.slice(0,p+1).map(j=>j.route.name).filter(Boolean).join(".");o.push({path:t.route.path,title:t.route.name?n(`breadcrumbs.${u}`):void 0,key:t.route.path})}}return o},q=a=>a.some(o=>s(o)),K=ee.flatMapDeep(R,a=>a.children).map(a=>a==null?void 0:a.name).filter(a=>a!==void 0),D=(a,o=[])=>{const p=t=>t&&t.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return a.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!q(t.permissions))return null;const u=p(t.name);if(!t.name)return null;if("children"in t&&t.children){const j=D(t.children,[...o,t.name]);return j.length==0&&t.path?e.jsx(E.Item,{icon:t.icon,children:e.jsx(y,{to:t.path,children:n(`menu.${[...o,t.name].join(".")}`,{defaultValue:u})})},t.path):e.jsx(Ye,{icon:t.icon,title:n(`menu.${[...o,t.name,t.name].join(".")}`,{defaultValue:u}),children:j},t.path??t.name)}return t.name&&t.path?e.jsx(E.Item,{icon:t.icon,children:e.jsx(y,{to:t.path,children:n(`menu.${[...o,t.name].join(".")}`,{defaultValue:u})})},t.path):null}).filter(Boolean)};return i.useEffect(()=>{const a=L().filter(o=>o.path!=="/").map(o=>o.title).join(" - ");a?document.title=`${A} | ${a}`:document.title=A},[L,h.pathname]),e.jsxs(w,{style:{minHeight:"100vh"},children:[e.jsxs(We,{collapsible:!0,collapsed:m,onCollapse:g,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:$?e.jsx("img",{src:$,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(te,{size:"large",tip:"Loading..."})})}),e.jsx(E,{theme:"dark",defaultOpenKeys:K,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[h.pathname],children:D(R)})]}),e.jsxs(w,{className:"site-layout",children:[e.jsxs(Ke,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(ae,{type:"text",icon:m?e.jsx(ne,{}):e.jsx(ie,{}),onClick:()=>g(!m),style:{fontSize:"16px",width:64,height:64}}),e.jsxs("div",{style:{marginRight:"20px"},children:[e.jsx(V,{hidden:S.length<=1,menu:{items:S.map(a=>({key:a.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:a.path,children:n(`menu.${a.name}`,{defaultValue:a.name})})}))},children:e.jsx(se,{})}),e.jsxs(V,{menu:{items:U},children:[r!=null&&r.avatar?e.jsx(T,{src:r.avatar}):e.jsx(T,{icon:e.jsx(z,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em"},children:(r==null?void 0:r.full_name)||(r==null?void 0:r.username)})]}),e.jsx(ze,{})]})]}),e.jsxs(Qe,{style:{margin:"0 16px"},children:[e.jsx(oe,{style:{margin:"16px 0"},itemRender:a=>{const o=a.href||a.path;return o?e.jsx(y,{to:o,children:a.title}):e.jsx("span",{children:a.title})},items:L()}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:e.jsx(re,{})})]}),e.jsxs(Ge,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",A]})]})]})},Xe=new ce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),N={"zh-CN":_e,"en-US":b,"de-DE":pe,"es-ES":me,"fr-FR":de,"ar-AE":he,"sv-SE":ue};function Ze(){const{i18n:n}=I(),[_,f]=i.useState(N[n.language]||b);i.useEffect(()=>{f(N[n.language]||b)},[n.language]);const m=(g,h)=>g.flatMap(s=>s.is_private?[s]:"children"in s&&s.children?s.children:[s]).map((s,x)=>{const v=s.is_private?e.jsx(Ee,{element:e.jsx(Je,{})}):s.element;if("children"in s&&s.children&&s.children.length>0)return e.jsx(O,{path:s.path,element:v,children:m(s.children,s)},s.path??s.name??x);const{path:r}=s;return e.jsx(O,{path:r,index:s.index,element:v},r??s.name??`${(h==null?void 0:h.path)??""}.${x}`)}).filter(Boolean);return e.jsx(fe,{client:Xe,children:e.jsx(xe,{locale:_,children:e.jsx(Le,{children:e.jsx(ge,{basename:"/console/",children:e.jsx(ve,{children:m(R)})})})})})}je.createRoot(document.getElementById("root")).render(e.jsx(Ze,{}));export{qe as a};
