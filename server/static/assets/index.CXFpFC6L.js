const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.YFpFnCVT.js","assets/vendor.Bo5zsZF4.js","assets/vite.BF1G3H_w.js","assets/vendor.D-Ncpkvi.css","assets/contexts.CZ9vuarb.js","assets/base.C1oMHUIk.js","assets/components.CK8RYgUg.js","assets/login.Co4jJzw6.js","assets/profile.DlSpinsn.js","assets/not_found.GTNqQCqU.js","assets/forbidden.CmmB0i8g.js","assets/users.Dod22zUY.js","assets/roles.DLlYdZC6.js","assets/system-settings.CGbb9IgO.js","assets/audit.Brc5Fi8n.js","assets/service-accounts.BBt2wXl3.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./vite.BF1G3H_w.js";import{r as n,j as e,ad as Q,ae as G,af as z,ag as W,ah as Y,ai as J,aj as L,ak as E,u as I,al as X,ac as Z,am as y,an as ee,S as te,n as ae,ao as ne,ap as ie,aq as se,ar as oe,as as re,at as le,au as ce,av as ue,aw as de,ax as he,ay as me,az as pe,aA as S,aB as _e,aC as fe,aD as xe,aE as ge,aF as ve,aG as D,aH as je,o as ye}from"./vendor.Bo5zsZF4.js";import{L as ze,H as O,A as V,a as Ee,P as Re}from"./components.CK8RYgUg.js";import{a as we,u as Ae,A as Le}from"./contexts.CZ9vuarb.js";import{w as Ie}from"./base.C1oMHUIk.js";const Se=n.lazy(()=>c(()=>import("./dashboard.YFpFnCVT.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),be=n.lazy(()=>c(()=>import("./login.Co4jJzw6.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),Pe=n.lazy(()=>c(()=>import("./profile.DlSpinsn.js"),__vite__mapDeps([8,1,2,3,6,4,5]))),N=n.lazy(()=>c(()=>import("./not_found.GTNqQCqU.js"),__vite__mapDeps([9,1,2,3]))),$e=n.lazy(()=>c(()=>import("./forbidden.CmmB0i8g.js"),__vite__mapDeps([10,1,2,3]))),De=n.lazy(()=>c(()=>import("./users.Dod22zUY.js").then(s=>s.U),__vite__mapDeps([11,1,2,3,6,4,5]))),Oe=n.lazy(()=>c(()=>import("./users.Dod22zUY.js").then(s=>s.a),__vite__mapDeps([11,1,2,3,6,4,5]))),T=n.lazy(()=>c(()=>import("./users.Dod22zUY.js").then(s=>s.b),__vite__mapDeps([11,1,2,3,6,4,5]))),Ve=n.lazy(()=>c(()=>import("./roles.DLlYdZC6.js"),__vite__mapDeps([12,1,2,3,6,4,5]))),Te=n.lazy(()=>c(()=>import("./system-settings.CGbb9IgO.js"),__vite__mapDeps([13,1,2,3,5,6,4]))),ke=n.lazy(()=>c(()=>import("./audit.Brc5Fi8n.js"),__vite__mapDeps([14,1,2,3,6,4,5]))),Ne=n.lazy(()=>c(()=>import("./service-accounts.BBt2wXl3.js").then(s=>s.S),__vite__mapDeps([15,1,2,3,6,4,5,9]))),Be=n.lazy(()=>c(()=>import("./service-accounts.BBt2wXl3.js").then(s=>s.a),__vite__mapDeps([15,1,2,3,6,4,5,9]))),l=s=>e.jsx(n.Suspense,{fallback:e.jsx(ze,{}),children:e.jsx(s,{})}),Ce=[{path:"/login",element:l(be),index:!0},{path:"/404",element:l(N),index:!0},{path:"/403",element:l($e),index:!0}],Fe=[{path:"/",is_private:!0,children:[{path:"/",element:l(Se),name:"dashboard",icon:e.jsx(Q,{}),index:!0},{path:"/profile",element:l(Pe),name:void 0,index:!0},{name:"authorization",icon:e.jsx(z,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(G,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:l(Ve),permissions:["authorization:role:view"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(z,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:l(De),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/create",element:l(T),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:l(Oe),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:l(T),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(z,{}),permissions:["authorization:service_account:view"],children:[{element:l(Ne),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:l(Be),permissions:["authorization:service_account:view"],index:!0}]}]},{name:"system",icon:e.jsx(J,{}),permissions:["system:settings:view","system:settings:update","system:audit:view"],children:[{path:"/system/settings",icon:e.jsx(W,{}),index:!0,name:"settings",permissions:["system:settings:view","system:settings:update"],element:l(Te)},{path:"/system/audit",icon:e.jsx(Y,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:l(ke)}]},{path:"*",element:l(N),index:!0}]}],R=[...Ce,...Fe],{Header:Me,Content:He,Footer:Ue,Sider:qe}=L,{SubMenu:Ke}=E,Qe=()=>{const{t:s,i18n:_}=I(),{t:f}=I("common"),[m,g]=n.useState(!1),d=X(),{hasPermission:i}=we(),x=Z(),{logout:v,user:r}=Ae(),[B,b]=n.useState([]),[P,C]=n.useState(null),[w,F]=n.useState("Loading..."),[h,M]=n.useState(null);d.pathname!=="/profile"&&(r&&r.mfa_enforced&&!r.mfa_enabled?x("/profile#mfa"):r&&r.status==="password_expired"&&x("/profile#password"));const H=()=>{v(),window.location.href="/console/login?redirect="+encodeURIComponent(window.location.href)},U=[{key:"profile",label:e.jsx(y,{to:"/profile",children:f("profile")})},{key:"logout",label:f("logout"),onClick:H}];n.useEffect(()=>{Ie().then(a=>{var t;const o=a.navigation.filter(u=>u.path!==a.home_page),p=[...a.home_page?[{name:"home",path:a.home_page}]:[],...o];p.length>1?b(p):b([]),C(a.logo),M(a),(t=document.getElementById("site-icon"))==null||t.setAttribute("href",a.logo)})},[]),n.useEffect(()=>{_.language&&F((h==null?void 0:h.name_i18n[_.language])||(h==null?void 0:h.name)||"")},[h,_.language]);const A=()=>{const a=le(R,d.pathname),o=[];if(a){for(const[p,t]of a.entries())if(t.route.path==="/"&&!t.route.name)o.push({href:t.route.path,title:f("home"),key:"home"});else if(t.route.name){const u=a.slice(0,p+1).map(j=>j.route.name).filter(Boolean).join(".");o.push({path:t.route.path,title:t.route.name?s(`breadcrumbs.${u}`):void 0,key:t.route.path})}}return o},q=a=>a.some(o=>i(o)),K=ee.flatMapDeep(R,a=>a.children).map(a=>a==null?void 0:a.name).filter(a=>a!==void 0),$=(a,o=[])=>{const p=t=>t&&t.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return a.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!q(t.permissions))return null;const u=p(t.name);if(!t.name)return null;if("children"in t&&t.children){const j=$(t.children,[...o,t.name]);return j.length==0&&t.path?e.jsx(E.Item,{icon:t.icon,children:e.jsx(y,{to:t.path,children:s(`menu.${[...o,t.name].join(".")}`,{defaultValue:u})})},t.path):e.jsx(Ke,{icon:t.icon,title:s(`menu.${[...o,t.name,t.name].join(".")}`,{defaultValue:u}),children:j},t.path??t.name)}return t.name&&t.path?e.jsx(E.Item,{icon:t.icon,children:e.jsx(y,{to:t.path,children:s(`menu.${[...o,t.name].join(".")}`,{defaultValue:u})})},t.path):null}).filter(Boolean)};return n.useEffect(()=>{const a=A().filter(o=>o.path!=="/").map(o=>o.title).join(" - ");a?document.title=`${w} | ${a}`:document.title=w},[A,d.pathname]),e.jsxs(L,{style:{minHeight:"100vh"},children:[e.jsxs(qe,{collapsible:!0,collapsed:m,onCollapse:g,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:P?e.jsx("img",{src:P,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(te,{size:"large",tip:"Loading..."})})}),e.jsx(E,{theme:"dark",defaultOpenKeys:K,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[d.pathname],children:$(R)})]}),e.jsxs(L,{className:"site-layout",children:[e.jsxs(Me,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(ae,{type:"text",icon:m?e.jsx(ne,{}):e.jsx(ie,{}),onClick:()=>g(!m),style:{fontSize:"16px",width:64,height:64}}),e.jsxs("div",{style:{marginRight:"20px"},children:[e.jsx(O,{menu:{items:B.map(a=>({key:a.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:a.path,children:s(`menu.${a.name}`,{defaultValue:a.name})})}))},children:e.jsx(se,{})}),e.jsxs(O,{menu:{items:U},children:[r!=null&&r.avatar?e.jsx(V,{src:r.avatar}):e.jsx(V,{icon:e.jsx(z,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em"},children:(r==null?void 0:r.full_name)||(r==null?void 0:r.username)})]}),e.jsx(Ee,{})]})]}),e.jsxs(He,{style:{margin:"0 16px"},children:[e.jsx(oe,{style:{margin:"16px 0"},itemRender:a=>{const o=a.href||a.path;return o?e.jsx(y,{to:o,children:a.title}):e.jsx("span",{children:a.title})},items:A()}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:e.jsx(re,{})})]}),e.jsxs(Ue,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",w]})]})]})},Ge=new ce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),k={"zh-CN":_e,"en-US":S,"de-DE":pe,"es-ES":me,"fr-FR":he,"ar-AE":de,"sv-SE":ue};function We(){const{i18n:s}=I(),[_,f]=n.useState(k[s.language]||S);n.useEffect(()=>{f(k[s.language]||S)},[s.language]);const m=(g,d)=>g.flatMap(i=>i.is_private?[i]:"children"in i&&i.children?i.children:[i]).map((i,x)=>{const v=i.is_private?e.jsx(Re,{element:e.jsx(Qe,{})}):i.element;if("children"in i&&i.children&&i.children.length>0)return e.jsx(D,{path:i.path,element:v,children:m(i.children,i)},i.path??i.name??x);const{path:r}=i;return e.jsx(D,{path:r,index:i.index,element:v},r??i.name??`${(d==null?void 0:d.path)??""}.${x}`)}).filter(Boolean);return e.jsx(fe,{client:Ge,children:e.jsx(xe,{locale:_,children:e.jsx(Le,{children:e.jsx(ge,{basename:"/console/",children:e.jsx(ve,{children:m(R)})})})})})}je.createRoot(document.getElementById("root")).render(e.jsx(ye.StrictMode,{children:e.jsx(We,{})}));
