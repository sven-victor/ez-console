const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.BBAnwV-9.js","assets/vendor.B4UNC6a-.js","assets/vite.BF1G3H_w.js","assets/lodash.B3dv3_Tr.js","assets/highlight.BslI14e2.js","assets/vendor.D-Ncpkvi.css","assets/contexts.B1iwwl_4.js","assets/client.Bx1ZQKAq.js","assets/base.BitSj1X2.js","assets/chartjs.DaaCImvT.js","assets/components.BbXPg4FP.js","assets/ai.B8y9V9Sv.js","assets/authorization.CidYPuil.js","assets/system.DL6bykak.js","assets/oauth.f57Azrzi.js","assets/ai-chat-layout.OOcMoNgS.js","assets/login.HZC2gyCn.js","assets/profile.BNz3L-E-.js","assets/not_found.fWrW-5T_.js","assets/forbidden.BIJEPu8x.js","assets/users.R1vGZQNF.js","assets/roles.CPrmsPV6.js","assets/system-settings.OxqKZKRV.js","assets/audit.hY8Pqclv.js","assets/service-accounts.BTApMnwN.js"])))=>i.map(i=>d[i]);
import{a as _e}from"./ai.B8y9V9Sv.js";import{a as ve}from"./authorization.CidYPuil.js";import{b as ye,g as oe}from"./base.BitSj1X2.js";import{s as be}from"./system.DL6bykak.js";import{o as je}from"./oauth.f57Azrzi.js";import{_ as m}from"./vite.BF1G3H_w.js";import{r as o,j as e,ba as ze,bb as we,bc as D,bd as Ie,be as Le,bf as Ee,bg as C,bh as O,c as Re,bi as Ae,u as M,bj as Se,b5 as Ne,bk as $,bl as J,bm as Pe,o as h,bn as X,bo as Z,bp as $e,S as De,i as Oe,B as Te,bq as Ve,br as ke,bs as Be,bt as Ce,bu as Me,bv as Fe,bw as Ue,bx as Ke,by as qe,bz as F,bA as He,bB as Qe,bC as Ge,C as We,bD as Ye,bE as Je,bF as ee,bG as Xe}from"./vendor.B4UNC6a-.js";import{L as Ze,H as B,O as et,A as te,a as tt,P as at}from"./components.BbXPg4FP.js";import{u as nt,b as it,a as st,c as ot,A as rt,S as lt,e as ct}from"./contexts.B1iwwl_4.js";import{A as dt,a as mt,b as ut}from"./ai-chat-layout.OOcMoNgS.js";import{f as ht}from"./lodash.B3dv3_Tr.js";import"./client.Bx1ZQKAq.js";import"./highlight.BslI14e2.js";import"./index.Cy1JO93W.js";const pt=o.lazy(()=>m(()=>import("./dashboard.BBAnwV-9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),xt=o.lazy(()=>m(()=>import("./login.HZC2gyCn.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,10,11,12,13,14,15]))),ft=o.lazy(()=>m(()=>import("./profile.BNz3L-E-.js"),__vite__mapDeps([17,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),ae=o.lazy(()=>m(()=>import("./not_found.fWrW-5T_.js"),__vite__mapDeps([18,1,2,3,4,5]))),gt=o.lazy(()=>m(()=>import("./forbidden.BIJEPu8x.js"),__vite__mapDeps([19,1,2,3,4,5]))),_t=o.lazy(()=>m(()=>import("./users.R1vGZQNF.js").then(n=>n.U),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),vt=o.lazy(()=>m(()=>import("./users.R1vGZQNF.js").then(n=>n.a),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),ne=o.lazy(()=>m(()=>import("./users.R1vGZQNF.js").then(n=>n.b),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),yt=o.lazy(()=>m(()=>import("./roles.CPrmsPV6.js").then(n=>n.R),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),ie=o.lazy(()=>m(()=>import("./roles.CPrmsPV6.js").then(n=>n.a),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),bt=o.lazy(()=>m(()=>import("./system-settings.OxqKZKRV.js").then(n=>n.i),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),jt=o.lazy(()=>m(()=>import("./system-settings.OxqKZKRV.js").then(n=>n.O),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),zt=o.lazy(()=>m(()=>import("./system-settings.OxqKZKRV.js").then(n=>n.a),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),wt=o.lazy(()=>m(()=>import("./audit.hY8Pqclv.js"),__vite__mapDeps([23,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),It=o.lazy(()=>m(()=>import("./service-accounts.BTApMnwN.js").then(n=>n.S),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18]))),Lt=o.lazy(()=>m(()=>import("./service-accounts.BTApMnwN.js").then(n=>n.a),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18])));function c(n,r){return e.jsx(o.Suspense,{fallback:e.jsx(Ze,{}),children:e.jsx(n,{...r})})}const Et=({transformSettingTabs:n,transformLangConfig:r,extraPrivateRoutes:g=[],extraPublicRoutes:I=[]})=>{const j=[{path:"/login",element:c(xt,{transformLangConfig:r}),index:!0},{path:"/404",element:c(ae),index:!0},{path:"/403",element:c(gt),index:!0},{path:"/system/settings/oauth/test-callback",element:c(zt),index:!0},...I],L=[{path:"/",is_private:!0,children:[{path:"/",element:c(pt),name:"dashboard",icon:e.jsx(ze,{}),index:!0},{path:"/profile",element:c(ft),name:void 0,index:!0},{name:"authorization",icon:e.jsx(D,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(we,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:c(yt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:c(ie),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:c(ie),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(D,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:c(_t),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:c(ne),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:c(vt),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:c(ne),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(D,{}),permissions:["authorization:service_account:view"],children:[{element:c(It),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:c(Lt),permissions:["authorization:service_account:view"],index:!0}]}]},...g,{name:"system",icon:e.jsx(Ee,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(Ie,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:c(bt,{transformItems:n})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:c(jt),index:!0}]},{path:"/system/audit",icon:e.jsx(Le,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:c(wt)}]},{path:"*",element:c(ae),index:!0}]}];return[...j,...L]},Xt={ai:_e,authorization:ve,base:ye,system:be,oauth:je},{Header:Rt,Content:At,Footer:St,Sider:Nt}=C,{SubMenu:Pt}=O,$t=Re(({token:n,css:r})=>({layout:r`
      min-height: 100vh;
      display: flex;
      flex-direction: row;
    `,header:r`
      padding: 0;
      display: flex;
      justify-content: space-between;
      background-color: ${n.colorBgContainer};
      border-block-end: 1px solid ${n.colorBorderSecondary};
    `,footer:r`
      text-align: center;
      padding: 15px 50px;
    `,contentContainer:r`
      padding: 24px;
      background-color: ${n.colorBgContainer};
    `,content:r`
      margin: 0 16px;
      height: calc(100vh - 120px);
      overflow: auto;
    `,mainLayout:r`
      flex: 1;
      min-width: 0;
      background-color: ${n.colorBgContainer};
    `,breadcrumb:r`
      margin-left: 8px;
    `,headerItems:r`
      margin-right: 20px;
    `,userName:r`
      height: 1em;
      line-height: 1em;
      margin-left: 5px;
    `,themeSwitch:r`
      display: inline-flex;
    `,menuSider:r`
      .ant-layout-sider-children{
        display: flex;
        flex-direction: column;
      }
    `,menuToggleButton:r`
      &&{
        font-size: 16px;
        width: 64px;
        height: 64px;
      }
    `,layoutLogo:r`
      margin: 8px;
      display: flex;
    `,layoutLogoContainer:r`
      width: 100%;
      height: 100%;
      text-align: center;
    `,layoutLogoImage:r`
      height: 32px;
      width: 32px;
    `,menu:r`
      flex: 1 1 0%;
    `})),Dt=({element:n,siderWidth:r=250,routes:g,transformLangConfig:I,menuStyle:j="dark",transformHeaderItems:L=z=>z,renderLayout:T})=>{const{themeMode:z,setThemeMode:p,isDarkMode:S}=Ae(),{styles:d}=$t(),{layout:w,visible:E,loaded:R}=nt(),{t:_,i18n:x}=M(),{t:i}=M("common"),v=Se(),{hasPermission:N}=it(),A=Ne(),{logout:re,user:u}=st(),{siteConfig:s,clearCurrentOrgId:le}=ot(),[U,K]=o.useState([]),[ce,de]=o.useState(null),[V,me]=o.useState("Loading...");v.pathname!=="/profile"&&(u&&u.mfa_enforced&&!u.mfa_enabled?A("/profile#mfa"):u&&u.status==="password_expired"&&A("/profile#password"));const ue=()=>{re(),le(),window.location.href=oe("/login?redirect="+encodeURIComponent(window.location.href))},he=[{key:"profile",label:e.jsx($,{to:"/profile",children:i("profile")})},{key:"logout",label:i("logout"),onClick:ue}];o.useEffect(()=>{var a,l;if(s){const b=((a=s.navigation)==null?void 0:a.filter(f=>f.path!==s.home_page))??[],t=[...s.home_page?[{name:"home",path:s.home_page}]:[],...b];t.length>1?K(t):K([]),de(s.logo),(l=document.getElementById("site-icon"))==null||l.setAttribute("href",s.logo)}},[s]),o.useEffect(()=>{x.language&&me((s==null?void 0:s.name_i18n[x.language])||(s==null?void 0:s.name)||"")},[s,x.language]);const k=()=>{const a=J(g,v.pathname),l=[];if(a){for(const[b,t]of a.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:i("home"),key:"home"});else if(t.route.name){const f=a.slice(0,b+1).map(y=>y.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?_(`breadcrumbs.${f}`):void 0,key:t.route.path})}}return l},pe=a=>a.some(l=>N(l)),xe=ht(g,a=>a.children).map(a=>a==null?void 0:a.name).filter(a=>a!==void 0),q=(a,l=[])=>{const b=t=>t&&t.replace(/_/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return a.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!pe(t.permissions))return null;const f=b(t.name);if(!t.name)return null;if("children"in t&&t.children){const y=q(t.children,[...l,t.name]);return y.length==0&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx($,{to:t.path,children:_(`menu.${[...l,t.name].join(".")}`,{defaultValue:f})})},t.path):e.jsx(Pt,{icon:t.icon,title:_(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:f}),children:y},t.path??t.name)}return t.name&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx($,{to:t.path,children:_(`menu.${[...l,t.name].join(".")}`,{defaultValue:f})})},t.path):null}).filter(Boolean)};o.useEffect(()=>{const a=k().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");a?document.title=`${V} | ${a}`:document.title=V},[k,v.pathname]);const fe=o.useMemo(()=>{const a=J(g,v.pathname);if(a){for(const l of a.reverse())if(l.route.path&&l.route.name)return l.route.path}return v.pathname},[v.pathname]),ge=[e.jsx(B,{className:"header-item navigation-dropdown",hidden:U.length<=1,menu:{items:U.map(a=>({key:a.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:a.path,children:_(`menu.${a.name}`,{defaultValue:a.name})})}))},children:e.jsx(Pe,{})},"navigation-dropdown"),...s!=null&&s.enable_multi_org?[e.jsx(et,{className:"header-item org-switcher"},"org-switcher")]:[],e.jsxs(B,{className:"header-item user-dropdown",menu:{items:he},children:[u!=null&&u.avatar?e.jsx(te,{src:u.avatar}):e.jsx(te,{icon:e.jsx(D,{})}),e.jsx("span",{className:h("header-user-name",d.userName),children:(u==null?void 0:u.full_name)||(u==null?void 0:u.username)})]},"user-dropdown"),e.jsx(tt,{className:"header-item language-switch",transformLangConfig:I},"language-switch"),e.jsx(B,{className:"header-item theme-switch",menu:{items:[{key:"light",label:e.jsxs("span",{children:[e.jsx(X,{})," ",i("light",{defaultValue:"Light Mode"})]})},{key:"dark",label:e.jsxs("span",{children:[e.jsx(Z,{})," ",i("dark",{defaultValue:"Dark Mode"})]})}],onClick:({key:a})=>{p(a)},selectedKeys:[z]},children:z==="light"?e.jsx(X,{}):e.jsx(Z,{})},"theme-switch")];return(T??((a,l,b,t,f)=>{var Q,G,W;const[y,H]=o.useState(!1);return e.jsxs(C,{className:h("main-layout",d.layout),children:[e.jsxs(Nt,{width:r,collapsible:!0,collapsed:y,onCollapse:H,className:h(d.menuSider,"layout-menu-sider"),theme:S?"light":j,children:[e.jsx("div",{className:h("logo",d.layoutLogo),children:e.jsx("div",{className:h("layout-logo-container",d.layoutLogoContainer),children:a?e.jsx("img",{src:a,alt:"logo",className:d.layoutLogoImage}):e.jsx(De,{size:"large",tip:"Loading..."})})}),e.jsx(O,{className:h("layout-menu",d.menu),theme:S?"light":j,defaultOpenKeys:xe,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[fe],children:l})]}),e.jsxs(C,{className:h("site-layout","main-layout",d.mainLayout),children:[e.jsxs(Rt,{className:h("site-header",d.header),children:[e.jsxs(Oe,{children:[e.jsx(Te,{type:"text",icon:y?e.jsx(Ve,{}):e.jsx(ke,{}),onClick:()=>H(!y),className:h("layout-menu-toggle",d.menuToggleButton)}),e.jsx(Be,{className:h("site-breadcrumb",d.breadcrumb),itemRender:P=>{const Y=P.href||P.path;return Y?e.jsx($,{to:Y,children:P.title}):e.jsx("span",{children:P.title})},items:t})]}),e.jsx("div",{className:h("header-items",d.headerItems),children:b})]}),e.jsxs(At,{className:h("site-content",d.content),children:[e.jsx("div",{className:h("site-content-container",d.contentContainer),children:f}),((Q=s==null?void 0:s.attrs)==null?void 0:Q.ai_enabled)&&e.jsx(dt,{}),((G=s==null?void 0:s.attrs)==null?void 0:G.ai_enabled)&&w==="classic"&&(E||R)&&e.jsx(mt,{})]}),e.jsxs(St,{className:h("site-footer",d.footer),children:[" Â©",new Date().getFullYear()," ",V]})]}),((W=s==null?void 0:s.attrs)==null?void 0:W.ai_enabled)&&(w==="sidebar"||w==="float-sidebar")&&(E||R)&&e.jsx(ut,{})]})}))(ce,q(g),L(ge),k(),n??e.jsx($e,{}))},Ot=new Ce({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),se={"zh-CN":He,"en-US":F,"de-DE":qe,"es-ES":Ke,"fr-FR":Ue,"ar-AE":Fe,"sv-SE":Me};function Tt({transformRouter:n=p=>p,transformSettingTabs:r=p=>p,transformLangConfig:g=p=>p,extraPrivateRoutes:I=[],extraPublicRoutes:j=[],menuStyle:L="dark",transformHeaderItems:T=p=>p,renderLayout:z}){const{i18n:p}=M(),[S,d]=o.useState(se[p.language]||F);o.useEffect(()=>{d(se[p.language]||F)},[p.language]);const w=_=>_.map(x=>x.children===void 0?x:{...x,children:w(x.children)}),E=n(w(Et({transformSettingTabs:r,transformLangConfig:g,extraPrivateRoutes:I,extraPublicRoutes:j}))),R=(_,x)=>_.flatMap(i=>i.is_private?[i]:"children"in i&&i.children?i.children:[i]).map((i,v)=>{const N=i.is_private?e.jsx(at,{element:e.jsx(Dt,{routes:E,element:i.element,transformLangConfig:g,menuStyle:L,transformHeaderItems:T,renderLayout:z})}):i.element;if("children"in i&&i.children&&i.children.length>0)return e.jsx(ee,{path:i.path,element:N,children:R(i.children,i)},i.path??i.name??v);const{path:A}=i;return e.jsx(ee,{path:A,index:i.index,element:N},A??i.name??`${(x==null?void 0:x.path)??""}.${v}`)}).filter(Boolean);return e.jsx(Qe,{client:Ot,children:e.jsx(Ge,{children:e.jsx(We,{locale:S,children:e.jsx(rt,{children:e.jsx(lt,{children:e.jsx(ct,{children:e.jsx(Ye,{basename:oe(),children:e.jsx(Je,{children:R(E)})})})})})})})})}Xe.createRoot(document.getElementById("root")).render(e.jsx(Tt,{}));export{Xt as a,c as w};
