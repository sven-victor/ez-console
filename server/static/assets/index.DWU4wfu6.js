const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.YWt6IIzH.js","assets/vendor.CPU8FhsP.js","assets/vite.BF1G3H_w.js","assets/vendor.D-Ncpkvi.css","assets/contexts.CiLf3bbw.js","assets/client.BCH7Jt5A.js","assets/base.CSbpsOj9.js","assets/components.CKk2t6DJ.js","assets/ai.Dz8cWxwg.js","assets/authorization.DUoATmgP.js","assets/system.DNuBkrZ7.js","assets/oauth.CcPWkZZ3.js","assets/login.DmteQJiG.js","assets/profile.LTf7cvdk.js","assets/not_found.anXX7b94.js","assets/forbidden.na75Gsrx.js","assets/users.BgFcbYVV.js","assets/roles.XmhjYof3.js","assets/system-settings.DD522Qlk.js","assets/audit.Cuz2ToVE.js","assets/service-accounts.Cbj11Whe.js"])))=>i.map(i=>d[i]);
import{a as te}from"./ai.Dz8cWxwg.js";import{a as ae}from"./authorization.DUoATmgP.js";import{b as ie,g as W}from"./base.CSbpsOj9.js";import{s as ne}from"./system.DNuBkrZ7.js";import{o as se}from"./oauth.CcPWkZZ3.js";import{_ as u}from"./vite.BF1G3H_w.js";import{r as n,j as e,at as oe,au as re,av as S,aw as le,ax as ce,ay as ue,az as V,aA as O,u as T,aB as de,as as he,aC as P,aD as me,aE as pe,aF as _e,aG as fe,S as xe,s as ge,aH as ve,aI as ye,aJ as je,aK as ze,aL as Ee,aM as Re,aN as we,aO as Le,aP as Ae,aQ as k,aR as Ie,aS as be,aT as Pe,aU as Se,aV as Oe,aW as F,aX as De}from"./vendor.CPU8FhsP.js";import{L as $e,H as M,O as Ve,A as U,a as Te,b as ke,P as Ce}from"./components.CKk2t6DJ.js";import{a as Ne,u as Be,b as Fe,A as Me,S as Ue}from"./contexts.CiLf3bbw.js";import"./client.BCH7Jt5A.js";import"./index.DWU4wfu6.js";const He=n.lazy(()=>u(()=>import("./dashboard.YWt6IIzH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ke=n.lazy(()=>u(()=>import("./login.DmteQJiG.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11]))),Qe=n.lazy(()=>u(()=>import("./profile.LTf7cvdk.js"),__vite__mapDeps([13,1,2,3,7,4,5,6,8,9,10,11]))),H=n.lazy(()=>u(()=>import("./not_found.anXX7b94.js"),__vite__mapDeps([14,1,2,3]))),qe=n.lazy(()=>u(()=>import("./forbidden.na75Gsrx.js"),__vite__mapDeps([15,1,2,3]))),We=n.lazy(()=>u(()=>import("./users.BgFcbYVV.js").then(i=>i.U),__vite__mapDeps([16,1,2,3,7,4,5,6]))),Ge=n.lazy(()=>u(()=>import("./users.BgFcbYVV.js").then(i=>i.a),__vite__mapDeps([16,1,2,3,7,4,5,6]))),K=n.lazy(()=>u(()=>import("./users.BgFcbYVV.js").then(i=>i.b),__vite__mapDeps([16,1,2,3,7,4,5,6]))),Je=n.lazy(()=>u(()=>import("./roles.XmhjYof3.js").then(i=>i.R),__vite__mapDeps([17,1,2,3,7,4,5,6]))),Q=n.lazy(()=>u(()=>import("./roles.XmhjYof3.js").then(i=>i.a),__vite__mapDeps([17,1,2,3,7,4,5,6]))),Xe=n.lazy(()=>u(()=>import("./system-settings.DD522Qlk.js").then(i=>i.i),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),Ye=n.lazy(()=>u(()=>import("./system-settings.DD522Qlk.js").then(i=>i.O),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),Ze=n.lazy(()=>u(()=>import("./system-settings.DD522Qlk.js").then(i=>i.a),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),et=n.lazy(()=>u(()=>import("./audit.Cuz2ToVE.js"),__vite__mapDeps([19,1,2,3,7,4,5,6,8,9,10,11]))),tt=n.lazy(()=>u(()=>import("./service-accounts.Cbj11Whe.js").then(i=>i.S),__vite__mapDeps([20,1,2,3,7,4,5,6,14]))),at=n.lazy(()=>u(()=>import("./service-accounts.Cbj11Whe.js").then(i=>i.a),__vite__mapDeps([20,1,2,3,7,4,5,6,14])));function r(i,p){return e.jsx(n.Suspense,{fallback:e.jsx($e,{}),children:e.jsx(i,{...p})})}const it=({transformSettingTabs:i,transformLangConfig:p,extraPrivateRoutes:g=[],extraPublicRoutes:v=[]})=>{const z=[{path:"/login",element:r(Ke,{transformLangConfig:p}),index:!0},{path:"/404",element:r(H),index:!0},{path:"/403",element:r(qe),index:!0},{path:"/system/settings/oauth/test-callback",element:r(Ze),index:!0},...v],E=[{path:"/",is_private:!0,children:[{path:"/",element:r(He),name:"dashboard",icon:e.jsx(oe,{}),index:!0},{path:"/profile",element:r(Qe),name:void 0,index:!0},{name:"authorization",icon:e.jsx(S,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(re,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:r(Je),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:r(Q),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:r(Q),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(S,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:r(We),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:r(K),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:r(Ge),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:r(K),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(S,{}),permissions:["authorization:service_account:view"],children:[{element:r(tt),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:r(at),permissions:["authorization:service_account:view"],index:!0}]}]},...g,{name:"system",icon:e.jsx(ue,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(le,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:r(Xe,{transformItems:i})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:r(Ye),index:!0}]},{path:"/system/audit",icon:e.jsx(ce,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:r(et)}]},{path:"*",element:r(H),index:!0}]}];return[...z,...E]},Rt={ai:te,authorization:ae,base:ie,system:ne,oauth:se},{Header:nt,Content:st,Footer:ot,Sider:rt}=V,{SubMenu:lt}=O,ct=({element:i,routes:p,transformLangConfig:g,menuStyle:v="dark",transformHeaderItems:z=_=>_,renderLayout:E})=>{const{t:_,i18n:R}=T(),{t:d}=T("common"),y=de(),{hasPermission:D}=Ne(),w=he(),{logout:L,user:l}=Be(),{siteConfig:o}=Fe(),[h,s]=n.useState([]),[A,I]=n.useState(null),[j,G]=n.useState("Loading...");y.pathname!=="/profile"&&(l&&l.mfa_enforced&&!l.mfa_enabled?w("/profile#mfa"):l&&l.status==="password_expired"&&w("/profile#password"));const J=()=>{L(),window.location.href=W("/login?redirect="+encodeURIComponent(window.location.href))},X=[{key:"profile",label:e.jsx(P,{to:"/profile",children:d("profile")})},{key:"logout",label:d("logout"),onClick:J}];n.useEffect(()=>{var a;if(o){const c=o.navigation.filter(t=>t.path!==o.home_page),f=[...o.home_page?[{name:"home",path:o.home_page}]:[],...c];f.length>1?s(f):s([]),I(o.logo),(a=document.getElementById("site-icon"))==null||a.setAttribute("href",o.logo)}},[o]),n.useEffect(()=>{R.language&&G((o==null?void 0:o.name_i18n[R.language])||(o==null?void 0:o.name)||"")},[o,R.language]);const $=()=>{const a=fe(p,y.pathname),c=[];if(a){for(const[f,t]of a.entries())if(t.route.path==="/"&&!t.route.name)c.push({href:t.route.path,title:d("home"),key:"home"});else if(t.route.name){const m=a.slice(0,f+1).map(x=>x.route.name).filter(Boolean).join(".");c.push({path:t.route.path,title:t.route.name?_(`breadcrumbs.${m}`):void 0,key:t.route.path})}}return c},Y=a=>a.some(c=>D(c)),Z=me.flatMapDeep(p,a=>a.children).map(a=>a==null?void 0:a.name).filter(a=>a!==void 0),C=(a,c=[])=>{const f=t=>t&&t.replace(/_/g," ").split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ");return a.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!Y(t.permissions))return null;const m=f(t.name);if(!t.name)return null;if("children"in t&&t.children){const x=C(t.children,[...c,t.name]);return x.length==0&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx(P,{to:t.path,children:_(`menu.${[...c,t.name].join(".")}`,{defaultValue:m})})},t.path):e.jsx(lt,{icon:t.icon,title:_(`menu.${[...c,t.name,t.name].join(".")}`,{defaultValue:m}),children:x},t.path??t.name)}return t.name&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx(P,{to:t.path,children:_(`menu.${[...c,t.name].join(".")}`,{defaultValue:m})})},t.path):null}).filter(Boolean)};n.useEffect(()=>{const a=$().filter(c=>c.path!=="/").map(c=>c.title).join(" - ");a?document.title=`${j} | ${a}`:document.title=j},[$,y.pathname]);const ee=[e.jsx(M,{hidden:h.length<=1,menu:{items:h.map(a=>({key:a.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:a.path,children:_(`menu.${a.name}`,{defaultValue:a.name})})}))},children:e.jsx(pe,{})}),...o!=null&&o.enable_multi_org?[e.jsx(Ve,{},"org-switcher")]:[],e.jsxs(M,{menu:{items:X},children:[l!=null&&l.avatar?e.jsx(U,{src:l.avatar}):e.jsx(U,{icon:e.jsx(S,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(l==null?void 0:l.full_name)||(l==null?void 0:l.username)})]}),e.jsx(Te,{transformLangConfig:g})];return(E??((a,c,f,t,m)=>{const[x,N]=n.useState(!1);return e.jsxs(V,{style:{minHeight:"100vh"},children:[e.jsxs(rt,{collapsible:!0,collapsed:x,onCollapse:N,theme:v,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:a?e.jsx("img",{src:a,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(xe,{size:"large",tip:"Loading..."})})}),e.jsx(O,{theme:v,defaultOpenKeys:Z,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[y.pathname],children:c})]}),e.jsxs(V,{className:"site-layout",children:[e.jsxs(nt,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(ge,{type:"text",icon:x?e.jsx(ve,{}):e.jsx(ye,{}),onClick:()=>N(!x),style:{fontSize:"16px",width:64,height:64}}),e.jsx("div",{style:{marginRight:"20px"},children:f})]}),e.jsxs(st,{style:{margin:"0 16px"},children:[e.jsx(je,{style:{margin:"16px 0"},itemRender:b=>{const B=b.href||b.path;return B?e.jsx(P,{to:B,children:b.title}):e.jsx("span",{children:b.title})},items:t}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:m}),e.jsx(ke,{})]}),e.jsxs(ot,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",j]})]})]})}))(A,C(p),z(ee),$(),i??e.jsx(_e,{}))},ut=new ze({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),q={"zh-CN":Ie,"en-US":k,"de-DE":Ae,"es-ES":Le,"fr-FR":we,"ar-AE":Re,"sv-SE":Ee};function dt({transformRouter:i=d=>d,transformSettingTabs:p=d=>d,transformLangConfig:g=d=>d,extraPrivateRoutes:v=[],extraPublicRoutes:z=[],menuStyle:E="dark",transformHeaderItems:_=d=>d,renderLayout:R}){const{i18n:d}=T(),[y,D]=n.useState(q[d.language]||k);n.useEffect(()=>{D(q[d.language]||k)},[d.language]);const w=o=>o.map(h=>h.children===void 0?h:{...h,children:w(h.children)}),L=i(w(it({transformSettingTabs:p,transformLangConfig:g,extraPrivateRoutes:v,extraPublicRoutes:z}))),l=(o,h)=>o.flatMap(s=>s.is_private?[s]:"children"in s&&s.children?s.children:[s]).map((s,A)=>{const I=s.is_private?e.jsx(Ce,{element:e.jsx(ct,{routes:L,element:s.element,transformLangConfig:g,menuStyle:E,transformHeaderItems:_,renderLayout:R})}):s.element;if("children"in s&&s.children&&s.children.length>0)return e.jsx(F,{path:s.path,element:I,children:l(s.children,s)},s.path??s.name??A);const{path:j}=s;return e.jsx(F,{path:j,index:s.index,element:I},j??s.name??`${(h==null?void 0:h.path)??""}.${A}`)}).filter(Boolean);return e.jsx(be,{client:ut,children:e.jsx(Pe,{locale:y,children:e.jsx(Me,{children:e.jsx(Ue,{children:e.jsx(Se,{basename:W(),children:e.jsx(Oe,{children:l(L)})})})})})})}De.createRoot(document.getElementById("root")).render(e.jsx(dt,{}));export{Rt as a,r as w};
