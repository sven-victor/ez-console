const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.DgqPxpCV.js","assets/vendor.DHCYHP4R.js","assets/vite.BF1G3H_w.js","assets/vendor.D-Ncpkvi.css","assets/contexts.BzChg4ue.js","assets/client.DzGu0hjX.js","assets/base.DvGzzH9P.js","assets/components.VqHsQNix.js","assets/ai.-S2UhY0j.js","assets/authorization.CwloSs6h.js","assets/system.Dg-NRINg.js","assets/oauth.BHPX_dj5.js","assets/login.DTH2pIux.js","assets/profile.DRrp2Xfw.js","assets/not_found.DqY91n6T.js","assets/forbidden.CsefN4Mz.js","assets/users.DR_t1Xw1.js","assets/roles.Bcp1gDha.js","assets/system-settings.CLQY-OlF.js","assets/audit.DU2jmhI2.js","assets/service-accounts.DOFrzhr5.js"])))=>i.map(i=>d[i]);
import{a as ae}from"./ai.-S2UhY0j.js";import{a as ie}from"./authorization.CwloSs6h.js";import{b as ne,g as Y}from"./base.DvGzzH9P.js";import{s as se}from"./system.Dg-NRINg.js";import{o as oe}from"./oauth.BHPX_dj5.js";import{_ as d}from"./vite.BF1G3H_w.js";import{r as n,j as e,aw as re,ax as le,ay as S,az as ce,aA as de,aB as ue,aC as T,aD as O,u as k,aE as he,av as me,aF as P,aG as pe,aH as _e,aI as fe,aJ as xe,S as ge,s as ve,aK as ye,aL as je,aM as ze,aN as Ee,aO as Re,aP as we,aQ as Le,aR as Ae,aS as Ie,aT as C,aU as be,aV as Pe,aW as Se,aX as Oe,aY as De,aZ as M,a_ as $e}from"./vendor.DHCYHP4R.js";import{L as Ve,H as U,O as Te,A as H,a as ke,b as Ce,P as Ne}from"./components.VqHsQNix.js";import{a as Be,u as Fe,b as Me,A as Ue,S as He}from"./contexts.BzChg4ue.js";import"./client.DzGu0hjX.js";import"./index.pc5l3h4m.js";const Ke=n.lazy(()=>d(()=>import("./dashboard.DgqPxpCV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Qe=n.lazy(()=>d(()=>import("./login.DTH2pIux.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11]))),qe=n.lazy(()=>d(()=>import("./profile.DRrp2Xfw.js"),__vite__mapDeps([13,1,2,3,7,4,5,6,8,9,10,11]))),K=n.lazy(()=>d(()=>import("./not_found.DqY91n6T.js"),__vite__mapDeps([14,1,2,3]))),We=n.lazy(()=>d(()=>import("./forbidden.CsefN4Mz.js"),__vite__mapDeps([15,1,2,3]))),Ye=n.lazy(()=>d(()=>import("./users.DR_t1Xw1.js").then(i=>i.U),__vite__mapDeps([16,1,2,3,7,4,5,6]))),Ge=n.lazy(()=>d(()=>import("./users.DR_t1Xw1.js").then(i=>i.a),__vite__mapDeps([16,1,2,3,7,4,5,6]))),Q=n.lazy(()=>d(()=>import("./users.DR_t1Xw1.js").then(i=>i.b),__vite__mapDeps([16,1,2,3,7,4,5,6]))),Je=n.lazy(()=>d(()=>import("./roles.Bcp1gDha.js").then(i=>i.R),__vite__mapDeps([17,1,2,3,7,4,5,6]))),q=n.lazy(()=>d(()=>import("./roles.Bcp1gDha.js").then(i=>i.a),__vite__mapDeps([17,1,2,3,7,4,5,6]))),Xe=n.lazy(()=>d(()=>import("./system-settings.CLQY-OlF.js").then(i=>i.i),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),Ze=n.lazy(()=>d(()=>import("./system-settings.CLQY-OlF.js").then(i=>i.O),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),et=n.lazy(()=>d(()=>import("./system-settings.CLQY-OlF.js").then(i=>i.a),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),tt=n.lazy(()=>d(()=>import("./audit.DU2jmhI2.js"),__vite__mapDeps([19,1,2,3,7,4,5,6,8,9,10,11]))),at=n.lazy(()=>d(()=>import("./service-accounts.DOFrzhr5.js").then(i=>i.S),__vite__mapDeps([20,1,2,3,7,4,5,6,14]))),it=n.lazy(()=>d(()=>import("./service-accounts.DOFrzhr5.js").then(i=>i.a),__vite__mapDeps([20,1,2,3,7,4,5,6,14])));function r(i,p){return e.jsx(n.Suspense,{fallback:e.jsx(Ve,{}),children:e.jsx(i,{...p})})}const nt=({transformSettingTabs:i,transformLangConfig:p,extraPrivateRoutes:g=[],extraPublicRoutes:v=[]})=>{const j=[{path:"/login",element:r(Qe,{transformLangConfig:p}),index:!0},{path:"/404",element:r(K),index:!0},{path:"/403",element:r(We),index:!0},{path:"/system/settings/oauth/test-callback",element:r(et),index:!0},...v],z=[{path:"/",is_private:!0,children:[{path:"/",element:r(Ke),name:"dashboard",icon:e.jsx(re,{}),index:!0},{path:"/profile",element:r(qe),name:void 0,index:!0},{name:"authorization",icon:e.jsx(S,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(le,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:r(Je),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:r(q),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:r(q),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(S,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:r(Ye),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:r(Q),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:r(Ge),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:r(Q),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(S,{}),permissions:["authorization:service_account:view"],children:[{element:r(at),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:r(it),permissions:["authorization:service_account:view"],index:!0}]}]},...g,{name:"system",icon:e.jsx(ue,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(ce,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:r(Xe,{transformItems:i})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:r(Ze),index:!0}]},{path:"/system/audit",icon:e.jsx(de,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:r(tt)}]},{path:"*",element:r(K),index:!0}]}];return[...j,...z]},wt={ai:ae,authorization:ie,base:ne,system:se,oauth:oe},{Header:st,Content:ot,Footer:rt,Sider:lt}=T,{SubMenu:ct}=O,dt=({element:i,routes:p,transformLangConfig:g,menuStyle:v="dark",transformHeaderItems:j=_=>_,renderLayout:z})=>{const{t:_,i18n:E}=k(),{t:u}=k("common"),y=he(),{hasPermission:D}=Be(),R=me(),{logout:L,user:l}=Fe(),{siteConfig:o,clearCurrentOrgId:h}=Me(),[s,w]=n.useState([]),[A,I]=n.useState(null),[$,G]=n.useState("Loading...");y.pathname!=="/profile"&&(l&&l.mfa_enforced&&!l.mfa_enabled?R("/profile#mfa"):l&&l.status==="password_expired"&&R("/profile#password"));const J=()=>{L(),h(),window.location.href=Y("/login?redirect="+encodeURIComponent(window.location.href))},X=[{key:"profile",label:e.jsx(P,{to:"/profile",children:u("profile")})},{key:"logout",label:u("logout"),onClick:J}];n.useEffect(()=>{var a;if(o){const c=o.navigation.filter(t=>t.path!==o.home_page),f=[...o.home_page?[{name:"home",path:o.home_page}]:[],...c];f.length>1?w(f):w([]),I(o.logo),(a=document.getElementById("site-icon"))==null||a.setAttribute("href",o.logo)}},[o]),n.useEffect(()=>{E.language&&G((o==null?void 0:o.name_i18n[E.language])||(o==null?void 0:o.name)||"")},[o,E.language]);const V=()=>{const a=xe(p,y.pathname),c=[];if(a){for(const[f,t]of a.entries())if(t.route.path==="/"&&!t.route.name)c.push({href:t.route.path,title:u("home"),key:"home"});else if(t.route.name){const m=a.slice(0,f+1).map(x=>x.route.name).filter(Boolean).join(".");c.push({path:t.route.path,title:t.route.name?_(`breadcrumbs.${m}`):void 0,key:t.route.path})}}return c},Z=a=>a.some(c=>D(c)),ee=pe.flatMapDeep(p,a=>a.children).map(a=>a==null?void 0:a.name).filter(a=>a!==void 0),N=(a,c=[])=>{const f=t=>t&&t.replace(/_/g," ").split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ");return a.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!Z(t.permissions))return null;const m=f(t.name);if(!t.name)return null;if("children"in t&&t.children){const x=N(t.children,[...c,t.name]);return x.length==0&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx(P,{to:t.path,children:_(`menu.${[...c,t.name].join(".")}`,{defaultValue:m})})},t.path):e.jsx(ct,{icon:t.icon,title:_(`menu.${[...c,t.name,t.name].join(".")}`,{defaultValue:m}),children:x},t.path??t.name)}return t.name&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx(P,{to:t.path,children:_(`menu.${[...c,t.name].join(".")}`,{defaultValue:m})})},t.path):null}).filter(Boolean)};n.useEffect(()=>{const a=V().filter(c=>c.path!=="/").map(c=>c.title).join(" - ");a?document.title=`${$} | ${a}`:document.title=$},[V,y.pathname]);const te=[e.jsx(U,{hidden:s.length<=1,menu:{items:s.map(a=>({key:a.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:a.path,children:_(`menu.${a.name}`,{defaultValue:a.name})})}))},children:e.jsx(_e,{})}),...o!=null&&o.enable_multi_org?[e.jsx(Te,{},"org-switcher")]:[],e.jsxs(U,{menu:{items:X},children:[l!=null&&l.avatar?e.jsx(H,{src:l.avatar}):e.jsx(H,{icon:e.jsx(S,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(l==null?void 0:l.full_name)||(l==null?void 0:l.username)})]}),e.jsx(ke,{transformLangConfig:g})];return(z??((a,c,f,t,m)=>{const[x,B]=n.useState(!1);return e.jsxs(T,{style:{minHeight:"100vh"},children:[e.jsxs(lt,{collapsible:!0,collapsed:x,onCollapse:B,theme:v,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:a?e.jsx("img",{src:a,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(ge,{size:"large",tip:"Loading..."})})}),e.jsx(O,{theme:v,defaultOpenKeys:ee,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[y.pathname],children:c})]}),e.jsxs(T,{className:"site-layout",children:[e.jsxs(st,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(ve,{type:"text",icon:x?e.jsx(ye,{}):e.jsx(je,{}),onClick:()=>B(!x),style:{fontSize:"16px",width:64,height:64}}),e.jsx("div",{style:{marginRight:"20px"},children:f})]}),e.jsxs(ot,{style:{margin:"0 16px"},children:[e.jsx(ze,{style:{margin:"16px 0"},itemRender:b=>{const F=b.href||b.path;return F?e.jsx(P,{to:F,children:b.title}):e.jsx("span",{children:b.title})},items:t}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:m}),e.jsx(Ce,{})]}),e.jsxs(rt,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",$]})]})]})}))(A,N(p),j(te),V(),i??e.jsx(fe,{}))},ut=new Ee({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),W={"zh-CN":be,"en-US":C,"de-DE":Ie,"es-ES":Ae,"fr-FR":Le,"ar-AE":we,"sv-SE":Re};function ht({transformRouter:i=u=>u,transformSettingTabs:p=u=>u,transformLangConfig:g=u=>u,extraPrivateRoutes:v=[],extraPublicRoutes:j=[],menuStyle:z="dark",transformHeaderItems:_=u=>u,renderLayout:E}){const{i18n:u}=k(),[y,D]=n.useState(W[u.language]||C);n.useEffect(()=>{D(W[u.language]||C)},[u.language]);const R=o=>o.map(h=>h.children===void 0?h:{...h,children:R(h.children)}),L=i(R(nt({transformSettingTabs:p,transformLangConfig:g,extraPrivateRoutes:v,extraPublicRoutes:j}))),l=(o,h)=>o.flatMap(s=>s.is_private?[s]:"children"in s&&s.children?s.children:[s]).map((s,w)=>{const A=s.is_private?e.jsx(Ne,{element:e.jsx(dt,{routes:L,element:s.element,transformLangConfig:g,menuStyle:z,transformHeaderItems:_,renderLayout:E})}):s.element;if("children"in s&&s.children&&s.children.length>0)return e.jsx(M,{path:s.path,element:A,children:l(s.children,s)},s.path??s.name??w);const{path:I}=s;return e.jsx(M,{path:I,index:s.index,element:A},I??s.name??`${(h==null?void 0:h.path)??""}.${w}`)}).filter(Boolean);return e.jsx(Pe,{client:ut,children:e.jsx(Se,{locale:y,children:e.jsx(Ue,{children:e.jsx(He,{children:e.jsx(Oe,{basename:Y(),children:e.jsx(De,{children:l(L)})})})})})})}$e.createRoot(document.getElementById("root")).render(e.jsx(ht,{}));export{wt as a,r as w};
