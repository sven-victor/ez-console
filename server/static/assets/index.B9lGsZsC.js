const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.Crh32yWl.js","assets/vendor.C3-MmzV0.js","assets/vite.BF1G3H_w.js","assets/lodash.B3dv3_Tr.js","assets/highlight.BslI14e2.js","assets/vendor.D-Ncpkvi.css","assets/contexts.C5V5t5I9.js","assets/client.BcGekk65.js","assets/base.CXR2-cK8.js","assets/chartjs.BekiM2vT.js","assets/components.Bav2S6ej.js","assets/ai.sbVCL2nz.js","assets/authorization.Cm4TVmEJ.js","assets/system.BupHtmRt.js","assets/oauth.DTXnBMRT.js","assets/ai-chat-layout.DNW5YjPB.js","assets/login.DbBjnQHq.js","assets/profile.De9jOTq5.js","assets/not_found.B7trzo7j.js","assets/forbidden.D9fahVc_.js","assets/users.BFyH8uT1.js","assets/roles.BB2Kn8LW.js","assets/system-settings.bZ5yBPO9.js","assets/audit.CNyZzsmT.js","assets/service-accounts.D__iWetu.js"])))=>i.map(i=>d[i]);
import{a as ue}from"./ai.sbVCL2nz.js";import{a as me}from"./authorization.Cm4TVmEJ.js";import{b as pe,g as ae}from"./base.CXR2-cK8.js";import{s as xe}from"./system.BupHtmRt.js";import{o as fe}from"./oauth.DTXnBMRT.js";import{_ as d}from"./vite.BF1G3H_w.js";import{r as o,j as e,ba as _e,bb as ge,bc as O,bd as ve,be,bf as ye,bg as N,bh as V,c as je,bi as ze,u as C,bj as we,b5 as Re,bk as $,bl as Ee,bm as G,bn as W,bo as Ae,bp as Ie,S as Le,o as D,i as Se,B as Pe,bq as $e,br as De,bs as Oe,bt as Ve,bu as ke,bv as Te,bw as Be,bx as Me,by as Ne,bz as F,bA as Ce,bB as Fe,bC as Ue,C as He,bD as Ke,bE as qe,bF as Y,bG as Qe}from"./vendor.C3-MmzV0.js";import{L as Ge,H as M,O as We,A as J,a as Ye,P as Je}from"./components.Bav2S6ej.js";import{u as Xe,b as Ze,a as et,c as tt,A as at,S as it,e as nt}from"./contexts.C5V5t5I9.js";import{A as st,a as ot,b as rt}from"./ai-chat-layout.DNW5YjPB.js";import{f as lt}from"./lodash.B3dv3_Tr.js";import"./client.BcGekk65.js";import"./highlight.BslI14e2.js";import"./index.B9lGsZsC.js";const ct=o.lazy(()=>d(()=>import("./dashboard.Crh32yWl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),dt=o.lazy(()=>d(()=>import("./login.DbBjnQHq.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,10,11,12,13,14,15]))),ht=o.lazy(()=>d(()=>import("./profile.De9jOTq5.js"),__vite__mapDeps([17,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),X=o.lazy(()=>d(()=>import("./not_found.B7trzo7j.js"),__vite__mapDeps([18,1,2,3,4,5]))),ut=o.lazy(()=>d(()=>import("./forbidden.D9fahVc_.js"),__vite__mapDeps([19,1,2,3,4,5]))),mt=o.lazy(()=>d(()=>import("./users.BFyH8uT1.js").then(a=>a.U),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),pt=o.lazy(()=>d(()=>import("./users.BFyH8uT1.js").then(a=>a.a),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),Z=o.lazy(()=>d(()=>import("./users.BFyH8uT1.js").then(a=>a.b),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),xt=o.lazy(()=>d(()=>import("./roles.BB2Kn8LW.js").then(a=>a.R),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),ee=o.lazy(()=>d(()=>import("./roles.BB2Kn8LW.js").then(a=>a.a),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),ft=o.lazy(()=>d(()=>import("./system-settings.bZ5yBPO9.js").then(a=>a.i),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),_t=o.lazy(()=>d(()=>import("./system-settings.bZ5yBPO9.js").then(a=>a.O),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),gt=o.lazy(()=>d(()=>import("./system-settings.bZ5yBPO9.js").then(a=>a.a),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),vt=o.lazy(()=>d(()=>import("./audit.CNyZzsmT.js"),__vite__mapDeps([23,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),bt=o.lazy(()=>d(()=>import("./service-accounts.D__iWetu.js").then(a=>a.S),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18]))),yt=o.lazy(()=>d(()=>import("./service-accounts.D__iWetu.js").then(a=>a.a),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18])));function r(a,c){return e.jsx(o.Suspense,{fallback:e.jsx(Ge,{}),children:e.jsx(a,{...c})})}const jt=({transformSettingTabs:a,transformLangConfig:c,extraPrivateRoutes:b=[],extraPublicRoutes:y=[]})=>{const z=[{path:"/login",element:r(dt,{transformLangConfig:c}),index:!0},{path:"/404",element:r(X),index:!0},{path:"/403",element:r(ut),index:!0},{path:"/system/settings/oauth/test-callback",element:r(gt),index:!0},...y],w=[{path:"/",is_private:!0,children:[{path:"/",element:r(ct),name:"dashboard",icon:e.jsx(_e,{}),index:!0},{path:"/profile",element:r(ht),name:void 0,index:!0},{name:"authorization",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(ge,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:r(xt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:r(ee),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:r(ee),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:r(mt),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:r(Z),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:r(pt),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:r(Z),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(O,{}),permissions:["authorization:service_account:view"],children:[{element:r(bt),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:r(yt),permissions:["authorization:service_account:view"],index:!0}]}]},...b,{name:"system",icon:e.jsx(ye,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(ve,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:r(ft,{transformItems:a})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:r(_t),index:!0}]},{path:"/system/audit",icon:e.jsx(be,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:r(vt)}]},{path:"*",element:r(X),index:!0}]}];return[...z,...w]},Qt={ai:ue,authorization:me,base:pe,system:xe,oauth:fe},{Header:zt,Content:wt,Footer:Rt,Sider:Et}=N,{SubMenu:At}=V,It=je(({token:a,css:c})=>({header:c`
      padding: 0;
      display: flex;
      justify-content: space-between;
      background-color: ${a.colorBgContainer};
      border-block-end: 1px solid ${a.colorBorderSecondary};
    `,content:c`
      padding: 24px;
      min-height: calc(100vh - 190px);
      background-color: ${a.colorBgContainer};
    `,mainLayout:c`
      flex: 1;
      min-width: 0;
      background-color: ${a.colorBgContainer};
    `,breadcrumb:c`
      margin-left: 8px;
    `,themeSwitch:c`
      display: inline-flex;
    `,menuSider:c`
      .ant-layout-sider-children{
        display: flex;
        flex-direction: column;
      }
    `,menu:c`
      flex: 1 1 0%;
    `})),Lt=({element:a,routes:c,transformLangConfig:b,menuStyle:y="dark",transformHeaderItems:z=j=>j,renderLayout:w})=>{const{themeMode:j,setThemeMode:k,isDarkMode:u}=ze(),{styles:x}=It(),{layout:R,visible:E,loaded:A}=Xe(),{t:f,i18n:v}=C(),{t:m}=C("common"),s=we(),{hasPermission:L}=Ze(),I=Re(),{logout:S,user:h}=et(),{siteConfig:n,clearCurrentOrgId:ie}=tt(),[U,H]=o.useState([]),[ne,se]=o.useState(null),[T,oe]=o.useState("Loading...");s.pathname!=="/profile"&&(h&&h.mfa_enforced&&!h.mfa_enabled?I("/profile#mfa"):h&&h.status==="password_expired"&&I("/profile#password"));const re=()=>{S(),ie(),window.location.href=ae("/login?redirect="+encodeURIComponent(window.location.href))},le=[{key:"profile",label:e.jsx($,{to:"/profile",children:m("profile")})},{key:"logout",label:m("logout"),onClick:re}];o.useEffect(()=>{var i;if(n){const l=n.navigation.filter(t=>t.path!==n.home_page),_=[...n.home_page?[{name:"home",path:n.home_page}]:[],...l];_.length>1?H(_):H([]),se(n.logo),(i=document.getElementById("site-icon"))==null||i.setAttribute("href",n.logo)}},[n]),o.useEffect(()=>{v.language&&oe((n==null?void 0:n.name_i18n[v.language])||(n==null?void 0:n.name)||"")},[n,v.language]);const B=()=>{const i=Ie(c,s.pathname),l=[];if(i){for(const[_,t]of i.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:m("home"),key:"home"});else if(t.route.name){const p=i.slice(0,_+1).map(g=>g.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?f(`breadcrumbs.${p}`):void 0,key:t.route.path})}}return l},ce=i=>i.some(l=>L(l)),de=lt(c,i=>i.children).map(i=>i==null?void 0:i.name).filter(i=>i!==void 0),K=(i,l=[])=>{const _=t=>t&&t.replace(/_/g," ").split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return i.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!ce(t.permissions))return null;const p=_(t.name);if(!t.name)return null;if("children"in t&&t.children){const g=K(t.children,[...l,t.name]);return g.length==0&&t.path?e.jsx(V.Item,{icon:t.icon,children:e.jsx($,{to:t.path,children:f(`menu.${[...l,t.name].join(".")}`,{defaultValue:p})})},t.path):e.jsx(At,{icon:t.icon,title:f(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:p}),children:g},t.path??t.name)}return t.name&&t.path?e.jsx(V.Item,{icon:t.icon,children:e.jsx($,{to:t.path,children:f(`menu.${[...l,t.name].join(".")}`,{defaultValue:p})})},t.path):null}).filter(Boolean)};o.useEffect(()=>{const i=B().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");i?document.title=`${T} | ${i}`:document.title=T},[B,s.pathname]);const he=[e.jsx(M,{hidden:U.length<=1,menu:{items:U.map(i=>({key:i.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:i.path,children:f(`menu.${i.name}`,{defaultValue:i.name})})}))},children:e.jsx(Ee,{})},"navigation-dropdown"),...n!=null&&n.enable_multi_org?[e.jsx(We,{},"org-switcher")]:[],e.jsxs(M,{menu:{items:le},children:[h!=null&&h.avatar?e.jsx(J,{src:h.avatar}):e.jsx(J,{icon:e.jsx(O,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(h==null?void 0:h.full_name)||(h==null?void 0:h.username)})]},"user-dropdown"),e.jsx(Ye,{transformLangConfig:b},"language-switch"),e.jsx(M,{menu:{items:[{key:"light",label:e.jsxs("span",{children:[e.jsx(G,{})," ",m("light",{defaultValue:"Light Mode"})]})},{key:"dark",label:e.jsxs("span",{children:[e.jsx(W,{})," ",m("dark",{defaultValue:"Dark Mode"})]})}],onClick:({key:i})=>{k(i)},selectedKeys:[j]},children:j==="light"?e.jsx(G,{}):e.jsx(W,{})},"theme-switch")];return(w??((i,l,_,t,p)=>{const[g,q]=o.useState(!1);return e.jsxs(N,{style:{minHeight:"100vh",display:"flex",flexDirection:"row"},children:[e.jsxs(Et,{collapsible:!0,collapsed:g,onCollapse:q,className:x.menuSider,theme:u?"light":y,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:i?e.jsx("img",{src:i,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(Le,{size:"large",tip:"Loading..."})})}),e.jsx(V,{className:x.menu,theme:u?"light":y,defaultOpenKeys:de,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[s.pathname],children:l})]}),e.jsxs(N,{className:D("site-layout","main-layout",x.mainLayout),children:[e.jsxs(zt,{className:D("site-header",x.header),children:[e.jsxs(Se,{children:[e.jsx(Pe,{type:"text",icon:g?e.jsx($e,{}):e.jsx(De,{}),onClick:()=>q(!g),style:{fontSize:"16px",width:64,height:64}}),e.jsx(Oe,{className:D("site-breadcrumb",x.breadcrumb),itemRender:P=>{const Q=P.href||P.path;return Q?e.jsx($,{to:Q,children:P.title}):e.jsx("span",{children:P.title})},items:t})]}),e.jsx("div",{style:{marginRight:"20px"},children:_})]}),e.jsxs(wt,{style:{margin:"0 16px",height:"calc(100vh - 170px)",overflow:"auto"},children:[e.jsx("div",{className:D("site-content",x.content),children:p}),(n==null?void 0:n.attrs.ai_enabled)&&e.jsx(st,{}),(n==null?void 0:n.attrs.ai_enabled)&&R==="classic"&&(E||A)&&e.jsx(ot,{})]}),e.jsxs(Rt,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",T]})]}),(n==null?void 0:n.attrs.ai_enabled)&&(R==="sidebar"||R==="float-sidebar")&&(E||A)&&e.jsx(rt,{})]})}))(ne,K(c),z(he),B(),a??e.jsx(Ae,{}))},St=new Ve({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),te={"zh-CN":Ce,"en-US":F,"de-DE":Ne,"es-ES":Me,"fr-FR":Be,"ar-AE":Te,"sv-SE":ke};function Pt({transformRouter:a=u=>u,transformSettingTabs:c=u=>u,transformLangConfig:b=u=>u,extraPrivateRoutes:y=[],extraPublicRoutes:z=[],menuStyle:w="dark",transformHeaderItems:j=u=>u,renderLayout:k}){const{i18n:u}=C(),[x,R]=o.useState(te[u.language]||F);o.useEffect(()=>{R(te[u.language]||F)},[u.language]);const E=v=>v.map(m=>m.children===void 0?m:{...m,children:E(m.children)}),A=a(E(jt({transformSettingTabs:c,transformLangConfig:b,extraPrivateRoutes:y,extraPublicRoutes:z}))),f=(v,m)=>v.flatMap(s=>s.is_private?[s]:"children"in s&&s.children?s.children:[s]).map((s,L)=>{const I=s.is_private?e.jsx(Je,{element:e.jsx(Lt,{routes:A,element:s.element,transformLangConfig:b,menuStyle:w,transformHeaderItems:j,renderLayout:k})}):s.element;if("children"in s&&s.children&&s.children.length>0)return e.jsx(Y,{path:s.path,element:I,children:f(s.children,s)},s.path??s.name??L);const{path:S}=s;return e.jsx(Y,{path:S,index:s.index,element:I},S??s.name??`${(m==null?void 0:m.path)??""}.${L}`)}).filter(Boolean);return e.jsx(Fe,{client:St,children:e.jsx(Ue,{children:e.jsx(He,{locale:x,children:e.jsx(at,{children:e.jsx(it,{children:e.jsx(nt,{children:e.jsx(Ke,{basename:ae(),children:e.jsx(qe,{children:f(A)})})})})})})})})}Qe.createRoot(document.getElementById("root")).render(e.jsx(Pt,{}));export{Qt as a,r as w};
