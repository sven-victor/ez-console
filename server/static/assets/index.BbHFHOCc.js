const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.C8E-yHNC.js","assets/vendor.C3-MmzV0.js","assets/vite.BF1G3H_w.js","assets/lodash.B3dv3_Tr.js","assets/highlight.BslI14e2.js","assets/vendor.D-Ncpkvi.css","assets/contexts.BDuZ7_5Z.js","assets/client.DfIbwIFN.js","assets/base.CC34Xq3r.js","assets/chartjs.BekiM2vT.js","assets/components.Cc_ooeJj.js","assets/ai.BLyTPS8Y.js","assets/authorization.DyRvPRel.js","assets/system.DV_znQ7G.js","assets/oauth.C6OXLVAD.js","assets/ai-chat-layout.DFgR8h6d.js","assets/login.KsZa-7xk.js","assets/profile.BmSMr0B4.js","assets/not_found.B7trzo7j.js","assets/forbidden.D9fahVc_.js","assets/users.Ctjs2Mi6.js","assets/roles.BunuRq1x.js","assets/system-settings.T8Cn3n6Z.js","assets/audit.BDOv2FEt.js","assets/service-accounts.BoPe4VVw.js"])))=>i.map(i=>d[i]);
import{a as xe}from"./ai.BLyTPS8Y.js";import{a as fe}from"./authorization.DyRvPRel.js";import{b as _e,g as se}from"./base.CC34Xq3r.js";import{s as ge}from"./system.DV_znQ7G.js";import{o as ve}from"./oauth.C6OXLVAD.js";import{_ as d}from"./vite.BF1G3H_w.js";import{r as o,j as e,ba as be,bb as ye,bc as O,bd as je,be as ze,bf as we,bg as N,bh as V,c as Re,bi as Ee,u as C,bj as Ae,b5 as Ie,bk as $,bl as Le,bm as J,bn as X,bo as Se,bp as Pe,S as $e,o as D,i as De,B as Oe,bq as Ve,br as ke,bs as Te,bt as Be,bu as Me,bv as Ne,bw as Ce,bx as Fe,by as Ue,bz as F,bA as He,bB as Ke,bC as qe,C as Qe,bD as Ge,bE as We,bF as Z,bG as Ye}from"./vendor.C3-MmzV0.js";import{L as Je,H as M,O as Xe,A as ee,a as Ze,P as et}from"./components.Cc_ooeJj.js";import{u as tt,b as at,a as it,c as nt,A as st,S as ot,e as rt}from"./contexts.BDuZ7_5Z.js";import{A as lt,a as ct,b as dt}from"./ai-chat-layout.DFgR8h6d.js";import{f as ht}from"./lodash.B3dv3_Tr.js";import"./client.DfIbwIFN.js";import"./highlight.BslI14e2.js";import"./index.BbHFHOCc.js";const ut=o.lazy(()=>d(()=>import("./dashboard.C8E-yHNC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),mt=o.lazy(()=>d(()=>import("./login.KsZa-7xk.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,10,11,12,13,14,15]))),pt=o.lazy(()=>d(()=>import("./profile.BmSMr0B4.js"),__vite__mapDeps([17,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),te=o.lazy(()=>d(()=>import("./not_found.B7trzo7j.js"),__vite__mapDeps([18,1,2,3,4,5]))),xt=o.lazy(()=>d(()=>import("./forbidden.D9fahVc_.js"),__vite__mapDeps([19,1,2,3,4,5]))),ft=o.lazy(()=>d(()=>import("./users.Ctjs2Mi6.js").then(a=>a.U),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),_t=o.lazy(()=>d(()=>import("./users.Ctjs2Mi6.js").then(a=>a.a),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),ae=o.lazy(()=>d(()=>import("./users.Ctjs2Mi6.js").then(a=>a.b),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),gt=o.lazy(()=>d(()=>import("./roles.BunuRq1x.js").then(a=>a.R),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),ie=o.lazy(()=>d(()=>import("./roles.BunuRq1x.js").then(a=>a.a),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),vt=o.lazy(()=>d(()=>import("./system-settings.T8Cn3n6Z.js").then(a=>a.i),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),bt=o.lazy(()=>d(()=>import("./system-settings.T8Cn3n6Z.js").then(a=>a.O),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),yt=o.lazy(()=>d(()=>import("./system-settings.T8Cn3n6Z.js").then(a=>a.a),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),jt=o.lazy(()=>d(()=>import("./audit.BDOv2FEt.js"),__vite__mapDeps([23,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),zt=o.lazy(()=>d(()=>import("./service-accounts.BoPe4VVw.js").then(a=>a.S),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18]))),wt=o.lazy(()=>d(()=>import("./service-accounts.BoPe4VVw.js").then(a=>a.a),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18])));function l(a,c){return e.jsx(o.Suspense,{fallback:e.jsx(Je,{}),children:e.jsx(a,{...c})})}const Rt=({transformSettingTabs:a,transformLangConfig:c,extraPrivateRoutes:b=[],extraPublicRoutes:y=[]})=>{const z=[{path:"/login",element:l(mt,{transformLangConfig:c}),index:!0},{path:"/404",element:l(te),index:!0},{path:"/403",element:l(xt),index:!0},{path:"/system/settings/oauth/test-callback",element:l(yt),index:!0},...y],w=[{path:"/",is_private:!0,children:[{path:"/",element:l(ut),name:"dashboard",icon:e.jsx(be,{}),index:!0},{path:"/profile",element:l(pt),name:void 0,index:!0},{name:"authorization",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(ye,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:l(gt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:l(ie),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:l(ie),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:l(ft),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:l(ae),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:l(_t),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:l(ae),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(O,{}),permissions:["authorization:service_account:view"],children:[{element:l(zt),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:l(wt),permissions:["authorization:service_account:view"],index:!0}]}]},...b,{name:"system",icon:e.jsx(we,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(je,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:l(vt,{transformItems:a})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:l(bt),index:!0}]},{path:"/system/audit",icon:e.jsx(ze,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:l(jt)}]},{path:"*",element:l(te),index:!0}]}];return[...z,...w]},Yt={ai:xe,authorization:fe,base:_e,system:ge,oauth:ve},{Header:Et,Content:At,Footer:It,Sider:Lt}=N,{SubMenu:St}=V,Pt=Re(({token:a,css:c})=>({header:c`
      padding: 0;
      display: flex;
      justify-content: space-between;
      background-color: ${a.colorBgContainer};
      border-block-end: 1px solid ${a.colorBorderSecondary};
    `,content:c`
      padding: 24px;
      min-height: calc(100vh - 190px);
      background-color: ${a.colorBgContainer};
    `,mainLayout:c`
      flex: 1;
      min-width: 0;
      background-color: ${a.colorBgContainer};
    `,breadcrumb:c`
      margin-left: 8px;
    `,themeSwitch:c`
      display: inline-flex;
    `,menuSider:c`
      .ant-layout-sider-children{
        display: flex;
        flex-direction: column;
      }
    `,menu:c`
      flex: 1 1 0%;
    `})),$t=({element:a,routes:c,transformLangConfig:b,menuStyle:y="dark",transformHeaderItems:z=j=>j,renderLayout:w})=>{const{themeMode:j,setThemeMode:k,isDarkMode:u}=Ee(),{styles:x}=Pt(),{layout:R,visible:E,loaded:A}=tt(),{t:f,i18n:g}=C(),{t:m}=C("common"),s=Ae(),{hasPermission:L}=at(),I=Ie(),{logout:S,user:h}=it(),{siteConfig:n,clearCurrentOrgId:oe}=nt(),[U,H]=o.useState([]),[re,le]=o.useState(null),[T,ce]=o.useState("Loading...");s.pathname!=="/profile"&&(h&&h.mfa_enforced&&!h.mfa_enabled?I("/profile#mfa"):h&&h.status==="password_expired"&&I("/profile#password"));const de=()=>{S(),oe(),window.location.href=se("/login?redirect="+encodeURIComponent(window.location.href))},he=[{key:"profile",label:e.jsx($,{to:"/profile",children:m("profile")})},{key:"logout",label:m("logout"),onClick:de}];o.useEffect(()=>{var i,r;if(n){const v=((i=n.navigation)==null?void 0:i.filter(p=>p.path!==n.home_page))??[],t=[...n.home_page?[{name:"home",path:n.home_page}]:[],...v];t.length>1?H(t):H([]),le(n.logo),(r=document.getElementById("site-icon"))==null||r.setAttribute("href",n.logo)}},[n]),o.useEffect(()=>{g.language&&ce((n==null?void 0:n.name_i18n[g.language])||(n==null?void 0:n.name)||"")},[n,g.language]);const B=()=>{const i=Pe(c,s.pathname),r=[];if(i){for(const[v,t]of i.entries())if(t.route.path==="/"&&!t.route.name)r.push({href:t.route.path,title:m("home"),key:"home"});else if(t.route.name){const p=i.slice(0,v+1).map(_=>_.route.name).filter(Boolean).join(".");r.push({path:t.route.path,title:t.route.name?f(`breadcrumbs.${p}`):void 0,key:t.route.path})}}return r},ue=i=>i.some(r=>L(r)),me=ht(c,i=>i.children).map(i=>i==null?void 0:i.name).filter(i=>i!==void 0),K=(i,r=[])=>{const v=t=>t&&t.replace(/_/g," ").split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return i.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!ue(t.permissions))return null;const p=v(t.name);if(!t.name)return null;if("children"in t&&t.children){const _=K(t.children,[...r,t.name]);return _.length==0&&t.path?e.jsx(V.Item,{icon:t.icon,children:e.jsx($,{to:t.path,children:f(`menu.${[...r,t.name].join(".")}`,{defaultValue:p})})},t.path):e.jsx(St,{icon:t.icon,title:f(`menu.${[...r,t.name,t.name].join(".")}`,{defaultValue:p}),children:_},t.path??t.name)}return t.name&&t.path?e.jsx(V.Item,{icon:t.icon,children:e.jsx($,{to:t.path,children:f(`menu.${[...r,t.name].join(".")}`,{defaultValue:p})})},t.path):null}).filter(Boolean)};o.useEffect(()=>{const i=B().filter(r=>r.path!=="/").map(r=>r.title).join(" - ");i?document.title=`${T} | ${i}`:document.title=T},[B,s.pathname]);const pe=[e.jsx(M,{hidden:U.length<=1,menu:{items:U.map(i=>({key:i.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:i.path,children:f(`menu.${i.name}`,{defaultValue:i.name})})}))},children:e.jsx(Le,{})},"navigation-dropdown"),...n!=null&&n.enable_multi_org?[e.jsx(Xe,{},"org-switcher")]:[],e.jsxs(M,{menu:{items:he},children:[h!=null&&h.avatar?e.jsx(ee,{src:h.avatar}):e.jsx(ee,{icon:e.jsx(O,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(h==null?void 0:h.full_name)||(h==null?void 0:h.username)})]},"user-dropdown"),e.jsx(Ze,{transformLangConfig:b},"language-switch"),e.jsx(M,{menu:{items:[{key:"light",label:e.jsxs("span",{children:[e.jsx(J,{})," ",m("light",{defaultValue:"Light Mode"})]})},{key:"dark",label:e.jsxs("span",{children:[e.jsx(X,{})," ",m("dark",{defaultValue:"Dark Mode"})]})}],onClick:({key:i})=>{k(i)},selectedKeys:[j]},children:j==="light"?e.jsx(J,{}):e.jsx(X,{})},"theme-switch")];return(w??((i,r,v,t,p)=>{var Q,G,W;const[_,q]=o.useState(!1);return e.jsxs(N,{style:{minHeight:"100vh",display:"flex",flexDirection:"row"},children:[e.jsxs(Lt,{collapsible:!0,collapsed:_,onCollapse:q,className:x.menuSider,theme:u?"light":y,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:i?e.jsx("img",{src:i,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx($e,{size:"large",tip:"Loading..."})})}),e.jsx(V,{className:x.menu,theme:u?"light":y,defaultOpenKeys:me,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[s.pathname],children:r})]}),e.jsxs(N,{className:D("site-layout","main-layout",x.mainLayout),children:[e.jsxs(Et,{className:D("site-header",x.header),children:[e.jsxs(De,{children:[e.jsx(Oe,{type:"text",icon:_?e.jsx(Ve,{}):e.jsx(ke,{}),onClick:()=>q(!_),style:{fontSize:"16px",width:64,height:64}}),e.jsx(Te,{className:D("site-breadcrumb",x.breadcrumb),itemRender:P=>{const Y=P.href||P.path;return Y?e.jsx($,{to:Y,children:P.title}):e.jsx("span",{children:P.title})},items:t})]}),e.jsx("div",{style:{marginRight:"20px"},children:v})]}),e.jsxs(At,{style:{margin:"0 16px",height:"calc(100vh - 120px)",overflow:"auto"},children:[e.jsx("div",{className:D("site-content",x.content),children:p}),((Q=n==null?void 0:n.attrs)==null?void 0:Q.ai_enabled)&&e.jsx(lt,{}),((G=n==null?void 0:n.attrs)==null?void 0:G.ai_enabled)&&R==="classic"&&(E||A)&&e.jsx(ct,{})]}),e.jsxs(It,{style:{textAlign:"center",padding:"15px 50px"},children:[" Â©",new Date().getFullYear()," ",T]})]}),((W=n==null?void 0:n.attrs)==null?void 0:W.ai_enabled)&&(R==="sidebar"||R==="float-sidebar")&&(E||A)&&e.jsx(dt,{})]})}))(re,K(c),z(pe),B(),a??e.jsx(Se,{}))},Dt=new Be({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),ne={"zh-CN":He,"en-US":F,"de-DE":Ue,"es-ES":Fe,"fr-FR":Ce,"ar-AE":Ne,"sv-SE":Me};function Ot({transformRouter:a=u=>u,transformSettingTabs:c=u=>u,transformLangConfig:b=u=>u,extraPrivateRoutes:y=[],extraPublicRoutes:z=[],menuStyle:w="dark",transformHeaderItems:j=u=>u,renderLayout:k}){const{i18n:u}=C(),[x,R]=o.useState(ne[u.language]||F);o.useEffect(()=>{R(ne[u.language]||F)},[u.language]);const E=g=>g.map(m=>m.children===void 0?m:{...m,children:E(m.children)}),A=a(E(Rt({transformSettingTabs:c,transformLangConfig:b,extraPrivateRoutes:y,extraPublicRoutes:z}))),f=(g,m)=>g.flatMap(s=>s.is_private?[s]:"children"in s&&s.children?s.children:[s]).map((s,L)=>{const I=s.is_private?e.jsx(et,{element:e.jsx($t,{routes:A,element:s.element,transformLangConfig:b,menuStyle:w,transformHeaderItems:j,renderLayout:k})}):s.element;if("children"in s&&s.children&&s.children.length>0)return e.jsx(Z,{path:s.path,element:I,children:f(s.children,s)},s.path??s.name??L);const{path:S}=s;return e.jsx(Z,{path:S,index:s.index,element:I},S??s.name??`${(m==null?void 0:m.path)??""}.${L}`)}).filter(Boolean);return e.jsx(Ke,{client:Dt,children:e.jsx(qe,{children:e.jsx(Qe,{locale:x,children:e.jsx(st,{children:e.jsx(ot,{children:e.jsx(rt,{children:e.jsx(Ge,{basename:se(),children:e.jsx(We,{children:f(A)})})})})})})})})}Ye.createRoot(document.getElementById("root")).render(e.jsx(Ot,{}));export{Yt as a,l as w};
