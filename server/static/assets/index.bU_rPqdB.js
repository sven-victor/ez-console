const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.2NT9cjtK.js","assets/vendor.XZpclBr-.js","assets/vite.BF1G3H_w.js","assets/vendor.DN_eLDEa.css","assets/contexts.DfU85HX9.js","assets/client.CQPv28OP.js","assets/base.BZ5t96GY.js","assets/components.DpTwgd7F.js","assets/ai.CmaQfZO2.js","assets/authorization.BhchN0WB.js","assets/system.ZTj8gnyd.js","assets/oauth.DEgb4hxr.js","assets/login.B7j0VqHI.js","assets/profile.DUJKDKdK.js","assets/not_found.axQZmQYC.js","assets/forbidden.CJ1ItYST.js","assets/users.yn7zaVHH.js","assets/roles.C3BtL51l.js","assets/system-settings.68N6OiyK.js","assets/audit.DnwhmW6y.js","assets/service-accounts.BrOZ0Gyv.js"])))=>i.map(i=>d[i]);
import{a as ne}from"./ai.CmaQfZO2.js";import{a as se}from"./authorization.BhchN0WB.js";import{b as oe,g as Y}from"./base.BZ5t96GY.js";import{s as re}from"./system.ZTj8gnyd.js";import{o as le}from"./oauth.DEgb4hxr.js";import{_ as d}from"./vite.BF1G3H_w.js";import{r as s,j as e,aC as ce,aD as de,aE as S,aF as he,aG as ue,aH as me,aI as T,aJ as O,u as k,aK as pe,aB as _e,aL as P,aM as fe,aN as xe,aO as ge,aP as ve,S as ye,s as je,aQ as ze,aR as Ee,aS as Re,aT as we,aU as Ie,aV as Ae,aW as be,aX as Le,aY as Pe,aZ as C,a_ as Se,a$ as Oe,b0 as De,b1 as $e,b2 as Ve,b3 as M,b4 as Te}from"./vendor.XZpclBr-.js";import{L as ke,H as U,O as Ce,A as H,a as Ne,b as Be,c as Fe,d as Me,P as Ue}from"./components.DpTwgd7F.js";import{c as He,a as Ke,u as Qe,b as We,A as qe,S as Ye,e as Ge}from"./contexts.DfU85HX9.js";import"./client.CQPv28OP.js";import"./index.bU_rPqdB.js";const Je=s.lazy(()=>d(()=>import("./dashboard.2NT9cjtK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Xe=s.lazy(()=>d(()=>import("./login.B7j0VqHI.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11]))),Ze=s.lazy(()=>d(()=>import("./profile.DUJKDKdK.js"),__vite__mapDeps([13,1,2,3,7,4,5,6,8,9,10,11]))),K=s.lazy(()=>d(()=>import("./not_found.axQZmQYC.js"),__vite__mapDeps([14,1,2,3]))),et=s.lazy(()=>d(()=>import("./forbidden.CJ1ItYST.js"),__vite__mapDeps([15,1,2,3]))),tt=s.lazy(()=>d(()=>import("./users.yn7zaVHH.js").then(n=>n.U),__vite__mapDeps([16,1,2,3,7,4,5,6]))),at=s.lazy(()=>d(()=>import("./users.yn7zaVHH.js").then(n=>n.a),__vite__mapDeps([16,1,2,3,7,4,5,6]))),Q=s.lazy(()=>d(()=>import("./users.yn7zaVHH.js").then(n=>n.b),__vite__mapDeps([16,1,2,3,7,4,5,6]))),it=s.lazy(()=>d(()=>import("./roles.C3BtL51l.js").then(n=>n.R),__vite__mapDeps([17,1,2,3,7,4,5,6]))),W=s.lazy(()=>d(()=>import("./roles.C3BtL51l.js").then(n=>n.a),__vite__mapDeps([17,1,2,3,7,4,5,6]))),nt=s.lazy(()=>d(()=>import("./system-settings.68N6OiyK.js").then(n=>n.i),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),st=s.lazy(()=>d(()=>import("./system-settings.68N6OiyK.js").then(n=>n.O),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),ot=s.lazy(()=>d(()=>import("./system-settings.68N6OiyK.js").then(n=>n.a),__vite__mapDeps([18,1,2,3,6,5,7,4,10,9]))),rt=s.lazy(()=>d(()=>import("./audit.DnwhmW6y.js"),__vite__mapDeps([19,1,2,3,7,4,5,6,8,9,10,11]))),lt=s.lazy(()=>d(()=>import("./service-accounts.BrOZ0Gyv.js").then(n=>n.S),__vite__mapDeps([20,1,2,3,7,4,5,6,14]))),ct=s.lazy(()=>d(()=>import("./service-accounts.BrOZ0Gyv.js").then(n=>n.a),__vite__mapDeps([20,1,2,3,7,4,5,6,14])));function r(n,u){return e.jsx(s.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(n,{...u})})}const dt=({transformSettingTabs:n,transformLangConfig:u,extraPrivateRoutes:x=[],extraPublicRoutes:g=[]})=>{const v=[{path:"/login",element:r(Xe,{transformLangConfig:u}),index:!0},{path:"/404",element:r(K),index:!0},{path:"/403",element:r(et),index:!0},{path:"/system/settings/oauth/test-callback",element:r(ot),index:!0},...g],y=[{path:"/",is_private:!0,children:[{path:"/",element:r(Je),name:"dashboard",icon:e.jsx(ce,{}),index:!0},{path:"/profile",element:r(Ze),name:void 0,index:!0},{name:"authorization",icon:e.jsx(S,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(de,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:r(it),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:r(W),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:r(W),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(S,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:r(tt),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:r(Q),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:r(at),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:r(Q),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(S,{}),permissions:["authorization:service_account:view"],children:[{element:r(lt),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:r(ct),permissions:["authorization:service_account:view"],index:!0}]}]},...x,{name:"system",icon:e.jsx(me,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(he,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:r(nt,{transformItems:n})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:r(st),index:!0}]},{path:"/system/audit",icon:e.jsx(ue,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:r(rt)}]},{path:"*",element:r(K),index:!0}]}];return[...v,...y]},St={ai:ne,authorization:se,base:oe,system:re,oauth:le},{Header:ht,Content:ut,Footer:mt,Sider:pt}=T,{SubMenu:_t}=O,ft=({element:n,routes:u,transformLangConfig:x,menuStyle:g="dark",transformHeaderItems:v=_=>_,renderLayout:y})=>{const{layout:_,visible:D}=He(),{t:c,i18n:j}=k(),{t:z}=k("common"),f=pe(),{hasPermission:A}=Ke(),E=_e(),{logout:R,user:o}=Qe(),{siteConfig:a,clearCurrentOrgId:b}=We(),[w,I]=s.useState([]),[G,J]=s.useState(null),[$,X]=s.useState("Loading...");f.pathname!=="/profile"&&(o&&o.mfa_enforced&&!o.mfa_enabled?E("/profile#mfa"):o&&o.status==="password_expired"&&E("/profile#password"));const Z=()=>{R(),b(),window.location.href=Y("/login?redirect="+encodeURIComponent(window.location.href))},ee=[{key:"profile",label:e.jsx(P,{to:"/profile",children:z("profile")})},{key:"logout",label:z("logout"),onClick:Z}];s.useEffect(()=>{var i;if(a){const l=a.navigation.filter(t=>t.path!==a.home_page),m=[...a.home_page?[{name:"home",path:a.home_page}]:[],...l];m.length>1?I(m):I([]),J(a.logo),(i=document.getElementById("site-icon"))==null||i.setAttribute("href",a.logo)}},[a]),s.useEffect(()=>{j.language&&X((a==null?void 0:a.name_i18n[j.language])||(a==null?void 0:a.name)||"")},[a,j.language]);const V=()=>{const i=ve(u,f.pathname),l=[];if(i){for(const[m,t]of i.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:z("home"),key:"home"});else if(t.route.name){const h=i.slice(0,m+1).map(p=>p.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?c(`breadcrumbs.${h}`):void 0,key:t.route.path})}}return l},te=i=>i.some(l=>A(l)),ae=fe.flatMapDeep(u,i=>i.children).map(i=>i==null?void 0:i.name).filter(i=>i!==void 0),N=(i,l=[])=>{const m=t=>t&&t.replace(/_/g," ").split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ");return i.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!te(t.permissions))return null;const h=m(t.name);if(!t.name)return null;if("children"in t&&t.children){const p=N(t.children,[...l,t.name]);return p.length==0&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx(P,{to:t.path,children:c(`menu.${[...l,t.name].join(".")}`,{defaultValue:h})})},t.path):e.jsx(_t,{icon:t.icon,title:c(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:h}),children:p},t.path??t.name)}return t.name&&t.path?e.jsx(O.Item,{icon:t.icon,children:e.jsx(P,{to:t.path,children:c(`menu.${[...l,t.name].join(".")}`,{defaultValue:h})})},t.path):null}).filter(Boolean)};s.useEffect(()=>{const i=V().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");i?document.title=`${$} | ${i}`:document.title=$},[V,f.pathname]);const ie=[e.jsx(U,{hidden:w.length<=1,menu:{items:w.map(i=>({key:i.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:i.path,children:c(`menu.${i.name}`,{defaultValue:i.name})})}))},children:e.jsx(xe,{})}),...a!=null&&a.enable_multi_org?[e.jsx(Ce,{},"org-switcher")]:[],e.jsxs(U,{menu:{items:ee},children:[o!=null&&o.avatar?e.jsx(H,{src:o.avatar}):e.jsx(H,{icon:e.jsx(S,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(o==null?void 0:o.full_name)||(o==null?void 0:o.username)})]}),e.jsx(Ne,{transformLangConfig:x})];return(y??((i,l,m,t,h)=>{const[p,B]=s.useState(!1);return e.jsxs(T,{style:{minHeight:"100vh",display:"flex",flexDirection:"row"},children:[e.jsxs(pt,{collapsible:!0,collapsed:p,onCollapse:B,theme:g,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:i?e.jsx("img",{src:i,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(ye,{size:"large",tip:"Loading..."})})}),e.jsx(O,{theme:g,defaultOpenKeys:ae,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[f.pathname],children:l})]}),e.jsxs(T,{className:"site-layout main-layout",style:{flex:1,minWidth:0},children:[e.jsxs(ht,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(je,{type:"text",icon:p?e.jsx(ze,{}):e.jsx(Ee,{}),onClick:()=>B(!p),style:{fontSize:"16px",width:64,height:64}}),e.jsx("div",{style:{marginRight:"20px"},children:m})]}),e.jsxs(ut,{style:{margin:"0 16px",height:"calc(100vh - 170px)",overflow:"auto"},children:[e.jsx(Re,{style:{margin:"16px 0"},itemRender:L=>{const F=L.href||L.path;return F?e.jsx(P,{to:F,children:L.title}):e.jsx("span",{children:L.title})},items:t}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:"calc(100vh - 190px)"},children:h}),e.jsx(Be,{}),_==="classic"&&e.jsx(Fe,{})]}),e.jsxs(mt,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",$]})]}),(_==="sidebar"||_==="float-sidebar")&&D&&e.jsx(Me,{})]})}))(G,N(u),v(ie),V(),n??e.jsx(ge,{}))},xt=new we({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),q={"zh-CN":Se,"en-US":C,"de-DE":Pe,"es-ES":Le,"fr-FR":be,"ar-AE":Ae,"sv-SE":Ie};function gt({transformRouter:n=c=>c,transformSettingTabs:u=c=>c,transformLangConfig:x=c=>c,extraPrivateRoutes:g=[],extraPublicRoutes:v=[],menuStyle:y="dark",transformHeaderItems:_=c=>c,renderLayout:D}){const{i18n:c}=k(),[j,z]=s.useState(q[c.language]||C);s.useEffect(()=>{z(q[c.language]||C)},[c.language]);const f=R=>R.map(o=>o.children===void 0?o:{...o,children:f(o.children)}),A=n(f(dt({transformSettingTabs:u,transformLangConfig:x,extraPrivateRoutes:g,extraPublicRoutes:v}))),E=(R,o)=>R.flatMap(a=>a.is_private?[a]:"children"in a&&a.children?a.children:[a]).map((a,b)=>{const w=a.is_private?e.jsx(Ue,{element:e.jsx(ft,{routes:A,element:a.element,transformLangConfig:x,menuStyle:y,transformHeaderItems:_,renderLayout:D})}):a.element;if("children"in a&&a.children&&a.children.length>0)return e.jsx(M,{path:a.path,element:w,children:E(a.children,a)},a.path??a.name??b);const{path:I}=a;return e.jsx(M,{path:I,index:a.index,element:w},I??a.name??`${(o==null?void 0:o.path)??""}.${b}`)}).filter(Boolean);return e.jsx(Oe,{client:xt,children:e.jsx(De,{locale:j,children:e.jsx(qe,{children:e.jsx(Ye,{children:e.jsx(Ge,{children:e.jsx($e,{basename:Y(),children:e.jsx(Ve,{children:E(A)})})})})})})})}Te.createRoot(document.getElementById("root")).render(e.jsx(gt,{}));export{St as a,r as w};
