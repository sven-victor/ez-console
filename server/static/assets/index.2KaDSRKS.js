const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard.BBzlHZ18.js","assets/vendor.CdlQoPOM.js","assets/vite.BF1G3H_w.js","assets/lodash.B3dv3_Tr.js","assets/highlight.BslI14e2.js","assets/vendor.D-Ncpkvi.css","assets/contexts.B4_vdADT.js","assets/client.BfeV-JA7.js","assets/base.C8I1ybNa.js","assets/chartjs.DCdISLDj.js","assets/components.Co_PlEf9.js","assets/ai.xJcyrPeY.js","assets/authorization.8Nkwo-ML.js","assets/system.BZxE0B8S.js","assets/oauth.JbXcvXlU.js","assets/ai-chat-layout.DQSku3V8.js","assets/login.DhO34WEt.js","assets/profile.BqHCDXfq.js","assets/not_found.6LHLoMsI.js","assets/forbidden.PFRJLCZ9.js","assets/users.Byx5Vmer.js","assets/roles.CVaXz6J_.js","assets/system-settings.CDSyV_E1.js","assets/audit.CJNBkKS8.js","assets/service-accounts.B5vST6Dd.js"])))=>i.map(i=>d[i]);
import{a as se}from"./ai.xJcyrPeY.js";import{a as oe}from"./authorization.8Nkwo-ML.js";import{b as re,g as G}from"./base.C8I1ybNa.js";import{s as le}from"./system.BZxE0B8S.js";import{o as ce}from"./oauth.JbXcvXlU.js";import{_ as c}from"./vite.BF1G3H_w.js";import{r as o,j as e,ba as de,bb as he,bc as O,bd as ue,be as me,bf as pe,bg as T,bh as D,u as k,bi as _e,b5 as xe,bj as S,bk as fe,bl as ge,bm as ve,S as ye,B as je,bn as be,bo as ze,bp as we,bq as Ee,br as Re,bs as Ae,bt as Ie,bu as Le,bv as Pe,bw as B,bx as Se,by as Oe,C as De,bz as $e,bA as Ve,bB as U,bC as Te}from"./vendor.CdlQoPOM.js";import{L as ke,H,O as Be,A as q,a as Ne,P as Ce}from"./components.Co_PlEf9.js";import{u as Fe,b as Me,a as Ue,c as He,A as qe,S as Ke,e as Qe}from"./contexts.B4_vdADT.js";import{A as We,a as Ye,b as Ge}from"./ai-chat-layout.DQSku3V8.js";import{f as Je}from"./lodash.B3dv3_Tr.js";import"./client.BfeV-JA7.js";import"./highlight.BslI14e2.js";import"./index.2KaDSRKS.js";const Xe=o.lazy(()=>c(()=>import("./dashboard.BBzlHZ18.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),Ze=o.lazy(()=>c(()=>import("./login.DhO34WEt.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,10,11,12,13,14,15]))),et=o.lazy(()=>c(()=>import("./profile.BqHCDXfq.js"),__vite__mapDeps([17,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),K=o.lazy(()=>c(()=>import("./not_found.6LHLoMsI.js"),__vite__mapDeps([18,1,2,3,4,5]))),tt=o.lazy(()=>c(()=>import("./forbidden.PFRJLCZ9.js"),__vite__mapDeps([19,1,2,3,4,5]))),it=o.lazy(()=>c(()=>import("./users.Byx5Vmer.js").then(s=>s.U),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),at=o.lazy(()=>c(()=>import("./users.Byx5Vmer.js").then(s=>s.a),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),Q=o.lazy(()=>c(()=>import("./users.Byx5Vmer.js").then(s=>s.b),__vite__mapDeps([20,1,2,3,4,5,10,6,7,8]))),nt=o.lazy(()=>c(()=>import("./roles.CVaXz6J_.js").then(s=>s.R),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),W=o.lazy(()=>c(()=>import("./roles.CVaXz6J_.js").then(s=>s.a),__vite__mapDeps([21,1,2,3,4,5,10,6,7,8]))),st=o.lazy(()=>c(()=>import("./system-settings.CDSyV_E1.js").then(s=>s.i),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),ot=o.lazy(()=>c(()=>import("./system-settings.CDSyV_E1.js").then(s=>s.O),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),rt=o.lazy(()=>c(()=>import("./system-settings.CDSyV_E1.js").then(s=>s.a),__vite__mapDeps([22,1,2,3,4,5,8,7,10,6,13,12]))),lt=o.lazy(()=>c(()=>import("./audit.CJNBkKS8.js"),__vite__mapDeps([23,1,2,3,4,5,10,6,7,8,11,12,13,14,15]))),ct=o.lazy(()=>c(()=>import("./service-accounts.B5vST6Dd.js").then(s=>s.S),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18]))),dt=o.lazy(()=>c(()=>import("./service-accounts.B5vST6Dd.js").then(s=>s.a),__vite__mapDeps([24,1,2,3,4,5,10,6,7,8,18])));function r(s,m){return e.jsx(o.Suspense,{fallback:e.jsx(ke,{}),children:e.jsx(s,{...m})})}const ht=({transformSettingTabs:s,transformLangConfig:m,extraPrivateRoutes:v=[],extraPublicRoutes:y=[]})=>{const z=[{path:"/login",element:r(Ze,{transformLangConfig:m}),index:!0},{path:"/404",element:r(K),index:!0},{path:"/403",element:r(tt),index:!0},{path:"/system/settings/oauth/test-callback",element:r(rt),index:!0},...y],w=[{path:"/",is_private:!0,children:[{path:"/",element:r(Xe),name:"dashboard",icon:e.jsx(de,{}),index:!0},{path:"/profile",element:r(et),name:void 0,index:!0},{name:"authorization",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:create","authorization:user:update","authorization:user:delete","authorization:service_account:view","authorization:service_account:create","authorization:service_account:update","authorization:service_account:delete","authorization:role:view"],children:[{path:"/authorization/roles",name:"roles",icon:e.jsx(he,{}),permissions:["authorization:role:view","authorization:role:create","authorization:role:update","authorization:role:delete"],children:[{element:r(nt),permissions:["authorization:role:view"],index:!0},{path:"/authorization/roles/create",element:r(W),permissions:["authorization:role:create"],index:!0},{path:"/authorization/roles/:id/edit",element:r(W),permissions:["authorization:role:update"],index:!0}]},{path:"/authorization/users",name:"users",icon:e.jsx(O,{}),permissions:["authorization:user:view","authorization:user:list","authorization:user:create","authorization:user:update","authorization:user:delete"],children:[{element:r(it),permissions:["authorization:user:list"],index:!0},{path:"/authorization/users/create",element:r(Q),permissions:["authorization:user:create"],index:!0},{path:"/authorization/users/:id",element:r(at),permissions:["authorization:user:view"],index:!0},{path:"/authorization/users/:id/edit",element:r(Q),permissions:["authorization:user:update"],index:!0}]},{path:"/authorization/service-accounts",name:"serviceAccounts",icon:e.jsx(O,{}),permissions:["authorization:service_account:view"],children:[{element:r(ct),permissions:["authorization:service_account:view"],index:!0},{path:"/authorization/service-accounts/:id",element:r(dt),permissions:["authorization:service_account:view"],index:!0}]}]},...v,{name:"system",icon:e.jsx(pe,{}),permissions:["system:settings:view","system:settings:update","system:audit:view","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",icon:e.jsx(ue,{}),name:"settings",permissions:["system:settings:view","system:settings:update","system:organization:view","ai:models:view","ai:toolsets:view"],children:[{path:"/system/settings",index:!0,element:r(st,{transformItems:s})},{path:"/system/settings/organizations/:id",permissions:["system:organization:view"],element:r(ot),index:!0}]},{path:"/system/audit",icon:e.jsx(me,{}),name:"audit",permissions:["system:audit:view"],index:!0,element:r(lt)}]},{path:"*",element:r(K),index:!0}]}];return[...z,...w]},Vt={ai:se,authorization:oe,base:re,system:le,oauth:ce},{Header:ut,Content:mt,Footer:pt,Sider:_t}=T,{SubMenu:xt}=D,ft=({element:s,routes:m,transformLangConfig:v,menuStyle:y="dark",transformHeaderItems:z=x=>x,renderLayout:w})=>{const{layout:x,visible:A,loaded:d}=Fe(),{t:f,i18n:E}=k(),{t:j}=k("common"),g=_e(),{hasPermission:I}=Me(),b=xe(),{logout:h,user:i}=Ue(),{siteConfig:a,clearCurrentOrgId:L}=He(),[R,N]=o.useState([]),[J,X]=o.useState(null),[$,Z]=o.useState("Loading...");g.pathname!=="/profile"&&(i&&i.mfa_enforced&&!i.mfa_enabled?b("/profile#mfa"):i&&i.status==="password_expired"&&b("/profile#password"));const ee=()=>{h(),L(),window.location.href=G("/login?redirect="+encodeURIComponent(window.location.href))},te=[{key:"profile",label:e.jsx(S,{to:"/profile",children:j("profile")})},{key:"logout",label:j("logout"),onClick:ee}];o.useEffect(()=>{var n;if(a){const l=a.navigation.filter(t=>t.path!==a.home_page),p=[...a.home_page?[{name:"home",path:a.home_page}]:[],...l];p.length>1?N(p):N([]),X(a.logo),(n=document.getElementById("site-icon"))==null||n.setAttribute("href",a.logo)}},[a]),o.useEffect(()=>{E.language&&Z((a==null?void 0:a.name_i18n[E.language])||(a==null?void 0:a.name)||"")},[a,E.language]);const V=()=>{const n=ve(m,g.pathname),l=[];if(n){for(const[p,t]of n.entries())if(t.route.path==="/"&&!t.route.name)l.push({href:t.route.path,title:j("home"),key:"home"});else if(t.route.name){const u=n.slice(0,p+1).map(_=>_.route.name).filter(Boolean).join(".");l.push({path:t.route.path,title:t.route.name?f(`breadcrumbs.${u}`):void 0,key:t.route.path})}}return l},ie=n=>n.some(l=>I(l)),ae=Je(m,n=>n.children).map(n=>n==null?void 0:n.name).filter(n=>n!==void 0),C=(n,l=[])=>{const p=t=>t&&t.replace(/_/g," ").split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return n.flatMap(t=>"children"in t&&t.children&&!t.name?t.children:[t]).map(t=>{if(t.permissions&&!ie(t.permissions))return null;const u=p(t.name);if(!t.name)return null;if("children"in t&&t.children){const _=C(t.children,[...l,t.name]);return _.length==0&&t.path?e.jsx(D.Item,{icon:t.icon,children:e.jsx(S,{to:t.path,children:f(`menu.${[...l,t.name].join(".")}`,{defaultValue:u})})},t.path):e.jsx(xt,{icon:t.icon,title:f(`menu.${[...l,t.name,t.name].join(".")}`,{defaultValue:u}),children:_},t.path??t.name)}return t.name&&t.path?e.jsx(D.Item,{icon:t.icon,children:e.jsx(S,{to:t.path,children:f(`menu.${[...l,t.name].join(".")}`,{defaultValue:u})})},t.path):null}).filter(Boolean)};o.useEffect(()=>{const n=V().filter(l=>l.path!=="/").map(l=>l.title).join(" - ");n?document.title=`${$} | ${n}`:document.title=$},[V,g.pathname]);const ne=[e.jsx(H,{hidden:R.length<=1,menu:{items:R.map(n=>({key:n.path,style:{paddingRight:"20px"},label:e.jsx("a",{href:n.path,children:f(`menu.${n.name}`,{defaultValue:n.name})})}))},children:e.jsx(fe,{})},"navigation-dropdown"),...a!=null&&a.enable_multi_org?[e.jsx(Be,{},"org-switcher")]:[],e.jsxs(H,{menu:{items:te},children:[i!=null&&i.avatar?e.jsx(q,{src:i.avatar}):e.jsx(q,{icon:e.jsx(O,{})}),e.jsx("span",{style:{height:"1em",lineHeight:"1em",marginLeft:"5px"},children:(i==null?void 0:i.full_name)||(i==null?void 0:i.username)})]},"user-dropdown"),e.jsx(Ne,{transformLangConfig:v},"language-switch")];return(w??((n,l,p,t,u)=>{const[_,F]=o.useState(!1);return e.jsxs(T,{style:{minHeight:"100vh",display:"flex",flexDirection:"row"},children:[e.jsxs(_t,{collapsible:!0,collapsed:_,onCollapse:F,theme:y,children:[e.jsx("div",{className:"logo",style:{margin:"8px",display:"flex"},children:e.jsx("div",{style:{width:"100%",height:"100%",textAlign:"center"},children:n?e.jsx("img",{src:n,alt:"logo",style:{height:"32px",width:"32px"}}):e.jsx(ye,{size:"large",tip:"Loading..."})})}),e.jsx(D,{theme:y,defaultOpenKeys:ae,defaultSelectedKeys:["1"],mode:"inline",selectedKeys:[g.pathname],children:l})]}),e.jsxs(T,{className:"site-layout main-layout",style:{flex:1,minWidth:0},children:[e.jsxs(ut,{className:"site-layout-background",style:{padding:0,display:"flex",justifyContent:"space-between"},children:[e.jsx(je,{type:"text",icon:_?e.jsx(be,{}):e.jsx(ze,{}),onClick:()=>F(!_),style:{fontSize:"16px",width:64,height:64}}),e.jsx("div",{style:{marginRight:"20px"},children:p})]}),e.jsxs(mt,{style:{margin:"0 16px",height:"calc(100vh - 170px)",overflow:"auto"},children:[e.jsx(we,{style:{margin:"16px 0"},itemRender:P=>{const M=P.href||P.path;return M?e.jsx(S,{to:M,children:P.title}):e.jsx("span",{children:P.title})},items:t}),e.jsx("div",{className:"site-layout-background",style:{padding:24,minHeight:"calc(100vh - 190px)"},children:u}),(a==null?void 0:a.attrs.ai_enabled)&&e.jsx(We,{}),(a==null?void 0:a.attrs.ai_enabled)&&x==="classic"&&(A||d)&&e.jsx(Ye,{})]}),e.jsxs(pt,{style:{textAlign:"center"},children:[" Â©",new Date().getFullYear()," ",$]})]}),(a==null?void 0:a.attrs.ai_enabled)&&(x==="sidebar"||x==="float-sidebar")&&(A||d)&&e.jsx(Ge,{})]})}))(J,C(m),z(ne),V(),s??e.jsx(ge,{}))},gt=new Ee({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),Y={"zh-CN":Se,"en-US":B,"de-DE":Pe,"es-ES":Le,"fr-FR":Ie,"ar-AE":Ae,"sv-SE":Re};function vt({transformRouter:s=d=>d,transformSettingTabs:m=d=>d,transformLangConfig:v=d=>d,extraPrivateRoutes:y=[],extraPublicRoutes:z=[],menuStyle:w="dark",transformHeaderItems:x=d=>d,renderLayout:A}){const{i18n:d}=k(),[f,E]=o.useState(Y[d.language]||B);o.useEffect(()=>{E(Y[d.language]||B)},[d.language]);const j=b=>b.map(h=>h.children===void 0?h:{...h,children:j(h.children)}),g=s(j(ht({transformSettingTabs:m,transformLangConfig:v,extraPrivateRoutes:y,extraPublicRoutes:z}))),I=(b,h)=>b.flatMap(i=>i.is_private?[i]:"children"in i&&i.children?i.children:[i]).map((i,a)=>{const L=i.is_private?e.jsx(Ce,{element:e.jsx(ft,{routes:g,element:i.element,transformLangConfig:v,menuStyle:w,transformHeaderItems:x,renderLayout:A})}):i.element;if("children"in i&&i.children&&i.children.length>0)return e.jsx(U,{path:i.path,element:L,children:I(i.children,i)},i.path??i.name??a);const{path:R}=i;return e.jsx(U,{path:R,index:i.index,element:L},R??i.name??`${(h==null?void 0:h.path)??""}.${a}`)}).filter(Boolean);return e.jsx(Oe,{client:gt,children:e.jsx(De,{locale:f,children:e.jsx(qe,{children:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx($e,{basename:G(),children:e.jsx(Ve,{children:I(g)})})})})})})})}Te.createRoot(document.getElementById("root")).render(e.jsx(vt,{}));export{Vt as a,r as w};
