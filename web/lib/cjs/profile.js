"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("./vendor.js"),c=require("react"),i=require("antd"),u=require("react-i18next"),a=require("./components.js"),g=require("./contexts.js"),j=require("./index.js"),d=require("react-router-dom"),y=()=>{const{t}=u.useTranslation("authorization"),{t:f}=u.useTranslation("common"),{user:s,updateUser:h}=g.useAuth$1(),[x,n]=c.useState(!1),p=d.useNavigate(),l=d.useLocation(),m=l.hash.replace("#","")||"basic",r=async()=>{try{n(!0);const o=await j.api.authorization.getCurrentUser();h(o)}catch(o){i.message.error(f("fetchFailed",{defaultValue:"Failed to fetch data"})),console.error("Failed to fetch user profile:",o)}finally{n(!1)}};c.useEffect(()=>{r()},[]);const b=[{key:"basic",label:t("profile.basic",{defaultValue:"Basic Information"}),children:e.jsxRuntimeExports.jsx(a.ProfileBasic,{user:s,onSuccess:r})},{key:"password",label:t("profile.password",{defaultValue:"Password"}),disabled:s==null?void 0:s.disable_change_password,children:e.jsxRuntimeExports.jsx(a.ProfilePassword,{})},{key:"mfa",label:t("profile.mfa",{defaultValue:"Multi-Factor Authentication"}),children:e.jsxRuntimeExports.jsx(a.ProfileMFA,{user:s,onSuccess:r})},{key:"sessions",label:t("profile.sessions",{defaultValue:"Sessions"}),children:e.jsxRuntimeExports.jsx(a.ProfileSessions,{})},{key:"auditLogs",label:t("profile.auditLogs",{defaultValue:"Audit Logs"}),children:e.jsxRuntimeExports.jsx(a.UserAuditLogs,{})}];return e.jsxRuntimeExports.jsx(i.Card,{title:t("profile.title",{defaultValue:"Profile Settings"}),loading:x,children:e.jsxRuntimeExports.jsx(i.Tabs,{defaultActiveKey:m,onChange:o=>{p(`${l.pathname}#${o}`)},items:b,destroyInactiveTabPane:!0})})};exports.default=y;
