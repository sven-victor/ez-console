"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("./vendor.js"),l=require("react"),a=require("./components.js"),m=require("./contexts.js"),b=require("./index.js"),c=require("react-router-dom"),j=()=>{const{t}=e.useTranslation("authorization"),{t:u}=e.useTranslation("common"),{user:s,updateUser:d}=m.useAuth$1(),[f,r]=l.useState(!1),h=c.useNavigate(),n=c.useLocation(),p=n.hash.replace("#","")||"basic",i=async()=>{try{r(!0);const o=await b.api.authorization.getCurrentUser();d(o)}catch(o){e.staticMethods.error(u("fetchFailed",{defaultValue:"Failed to fetch data"})),console.error("Failed to fetch user profile:",o)}finally{r(!1)}};l.useEffect(()=>{i()},[]);const x=[{key:"basic",label:t("profile.basic",{defaultValue:"Basic Information"}),children:e.jsxRuntimeExports.jsx(a.ProfileBasic,{user:s,onSuccess:i})},{key:"password",label:t("profile.password",{defaultValue:"Password"}),disabled:s==null?void 0:s.disable_change_password,children:e.jsxRuntimeExports.jsx(a.ProfilePassword,{})},{key:"mfa",label:t("profile.mfa",{defaultValue:"Multi-Factor Authentication"}),children:e.jsxRuntimeExports.jsx(a.ProfileMFA,{user:s,onSuccess:i})},{key:"sessions",label:t("profile.sessions",{defaultValue:"Sessions"}),children:e.jsxRuntimeExports.jsx(a.ProfileSessions,{})},{key:"auditLogs",label:t("profile.auditLogs",{defaultValue:"Audit Logs"}),children:e.jsxRuntimeExports.jsx(a.UserAuditLogs,{})}];return e.jsxRuntimeExports.jsx(e.Card,{title:t("profile.title",{defaultValue:"Profile Settings"}),loading:f,children:e.jsxRuntimeExports.jsx(e.Tabs,{defaultActiveKey:p,onChange:o=>{h(`${n.pathname}#${o}`)},items:x,destroyInactiveTabPane:!0})})};exports.default=j;
