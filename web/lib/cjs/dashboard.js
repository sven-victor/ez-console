"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("./vendor.js"),o=require("antd"),c=require("./contexts.js"),d=require("react-i18next"),s=require("chart.js"),x=require("react-chartjs-2"),m=require("./components.js"),p=require("ahooks"),j=require("./index.js"),b=require("./base.js");s.Chart.register(s.CategoryScale,s.LinearScale,s.BarElement,s.Title,s.Tooltip,s.Legend);const g=()=>{const{user:n}=c.useAuth(),{t:i}=d.useTranslation(),{data:a=[],loading:l}=p.useRequest(j.api.base.getStatistics,{onError:e=>{o.message.error(i("dashboard.fetchStatisticsError",{defaultValue:"Error fetching statistics: {{error}}",error:e.message}))}}),u=e=>"value"in e?r.jsxRuntimeExports.jsx(o.Card,{children:r.jsxRuntimeExports.jsx(o.Statistic,{title:e.title,value:e.value,prefix:r.jsxRuntimeExports.jsx(m.DynamicIcon,{iconName:e.icon}),valueStyle:{color:e.color}})}):r.jsxRuntimeExports.jsx(o.Card,{children:r.jsxRuntimeExports.jsx(x.Bar,{data:{labels:e.labels,datasets:e.datasets.map(t=>({label:t.label,data:t.data,borderColor:t.color,backgroundColor:b.transparentize(t.color,.5),borderRadius:5,borderWidth:2}))},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})});return r.jsxRuntimeExports.jsxs(o.Skeleton,{active:!0,loading:l,children:[r.jsxRuntimeExports.jsx("p",{children:i("dashboard.welcome",{defaultValue:"Welcome, {{name}}!",name:(n==null?void 0:n.full_name)||(n==null?void 0:n.username)})}),a==null?void 0:a.map(e=>r.jsxRuntimeExports.jsx(o.Row,{gutter:16,style:{marginTop:20},children:e.map(t=>r.jsxRuntimeExports.jsx(o.Col,{span:t.width,children:u(t)}))}))]})};exports.default=g;
