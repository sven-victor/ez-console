"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("./vendor.js"),t=require("antd"),x=require("./contexts.js"),m=require("react-i18next"),o=require("chart.js"),p=require("react-chartjs-2"),j=require("./components.js"),b=require("ahooks"),g=require("./index.js"),E=require("./base.js");o.Chart.register(o.CategoryScale,o.LinearScale,o.BarElement,o.Title,o.Tooltip,o.Legend);const h=()=>{const{user:s}=x.useAuth(),{t:i}=m.useTranslation(),{data:a=[],loading:u}=b.useRequest(g.api.base.getStatistics,{onError:e=>{t.message.error(i("dashboard.fetchStatisticsError",{defaultValue:"Error fetching statistics: {{error}}",error:e.message}))}}),c=e=>"value"in e?r.jsxRuntimeExports.jsx(t.Card,{children:r.jsxRuntimeExports.jsx(t.Statistic,{title:e.title,value:e.value,prefix:r.jsxRuntimeExports.jsx(j.DynamicIcon,{iconName:e.icon}),valueStyle:{color:e.color}})}):r.jsxRuntimeExports.jsx(t.Card,{children:r.jsxRuntimeExports.jsx(p.Bar,{data:{labels:e.labels,datasets:e.datasets.map(n=>({label:n.label,data:n.data,borderColor:n.color,backgroundColor:E.transparentize(n.color,.5),borderRadius:5,borderWidth:2}))},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})});return r.jsxRuntimeExports.jsxs(t.Skeleton,{active:!0,loading:u,children:[r.jsxRuntimeExports.jsx("p",{children:i("dashboard.welcome",{defaultValue:"Welcome, {{name}}!",name:(s==null?void 0:s.full_name)||(s==null?void 0:s.username)})}),a==null?void 0:a.map((e,n)=>r.jsxRuntimeExports.jsx(t.Row,{gutter:16,style:{marginTop:20},children:e.map((l,d)=>r.jsxRuntimeExports.jsx(t.Col,{span:l.width,children:c(l)},d))},n))]})};exports.default=h;
