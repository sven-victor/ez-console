"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("./vendor.js"),o=require("antd"),x=require("./contexts.js"),p=require("react-i18next"),t=require("./chartjs.js"),m=require("./components.js"),j=require("ahooks"),g=require("./index.js"),b=require("./base.js");t.Chart.register(t.CategoryScale,t.LinearScale,t.BarElement,t.plugin_title,t.plugin_tooltip,t.plugin_legend);const E=()=>{const{user:s}=x.useAuth(),{t:a}=p.useTranslation(),{data:i=[],loading:u}=j.useRequest(g.api.base.getStatistics,{onError:e=>{o.message.error(a("dashboard.fetchStatisticsError",{defaultValue:"Error fetching statistics: {{error}}",error:e.message}))}}),c=e=>"value"in e?r.jsxRuntimeExports.jsx(o.Card,{children:r.jsxRuntimeExports.jsx(o.Statistic,{title:e.title,value:e.value,prefix:r.jsxRuntimeExports.jsx(m.DynamicIcon,{iconName:e.icon}),valueStyle:{color:e.color}})}):r.jsxRuntimeExports.jsx(o.Card,{children:r.jsxRuntimeExports.jsx(t.Bar,{data:{labels:e.labels,datasets:e.datasets.map(n=>({label:n.label,data:n.data,borderColor:n.color,backgroundColor:b.transparentize(n.color,.5),borderRadius:5,borderWidth:2}))},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})});return r.jsxRuntimeExports.jsxs(o.Skeleton,{active:!0,loading:u,children:[r.jsxRuntimeExports.jsx("p",{children:a("dashboard.welcome",{defaultValue:"Welcome, {{name}}!",name:(s==null?void 0:s.full_name)||(s==null?void 0:s.username)})}),i==null?void 0:i.map((e,n)=>r.jsxRuntimeExports.jsx(o.Row,{gutter:16,style:{marginTop:20},children:e.map((l,d)=>r.jsxRuntimeExports.jsx(o.Col,{span:l.width,children:c(l)},d))},n))]})};exports.default=E;
