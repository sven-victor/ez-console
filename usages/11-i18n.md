# Internationalization (i18n) Guide

This guide covers implementing multi-language support in EZ-Console.

## Overview

EZ-Console uses `react-i18next` for internationalization with built-in support for multiple languages.

## Adding Translations

### In App Component

```typescript
// src/App.tsx
import { i18n } from 'ez-console';

// Add single translation
i18n.addResource('en', 'translation', 'product.name', 'Product Name');
i18n.addResource('zh-CN', 'translation', 'product.name', '产品名称');

// Add multiple translations
i18n.addResources('en', 'translation', {
  'product.name': 'Product Name',
  'product.description': 'Description',
  'product.price': 'Price',
  'product.create': 'Create Product',
  'product.edit': 'Edit Product',
  'product.delete': 'Delete Product',
});

i18n.addResources('zh-CN', 'translation', {
  'product.name': '产品名称',
  'product.description': '描述',
  'product.price': '价格',
  'product.create': '创建产品',
  'product.edit': '编辑产品',
  'product.delete': '删除产品',
});
```

### In Separate Files

Create translation files:

```typescript
// src/i18n/en/product.ts
export default {
  'product.name': 'Product Name',
  'product.description': 'Description',
  'product.price': 'Price',
  'product.stock': 'Stock',
  'product.category': 'Category',
  'product.create': 'Create Product',
  'product.edit': 'Edit Product',
  'product.delete': 'Delete Product',
  'product.list': 'Product List',
  'product.detail': 'Product Detail',
  'product.searchPlaceholder': 'Search products...',
};
```

```typescript
// src/i18n/zh-CN/product.ts
export default {
  'product.name': '产品名称',
  'product.description': '描述',
  'product.price': '价格',
  'product.stock': '库存',
  'product.category': '分类',
  'product.create': '创建产品',
  'product.edit': '编辑产品',
  'product.delete': '删除产品',
  'product.list': '产品列表',
  'product.detail': '产品详情',
  'product.searchPlaceholder': '搜索产品...',
};
```

Load translations:

```typescript
// src/App.tsx
import { i18n } from 'ez-console';
import enProduct from './i18n/en/product';
import zhProduct from './i18n/zh-CN/product';

i18n.addResources('en', 'translation', enProduct);
i18n.addResources('zh-CN', 'translation', zhProduct);
```

## Using Translations

### In Components

```typescript
import { useTranslation } from 'ez-console';

export const ProductForm: React.FC = () => {
  const { t } = useTranslation();

  return (
    <Form>
      <Form.Item label={t('product.name')}>
        <Input placeholder={t('product.searchPlaceholder')} />
      </Form.Item>
      <Button type="primary">{t('product.create')}</Button>
    </Form>
  );
};
```

### With Parameters

```typescript
// Add translation with parameter
i18n.addResource('en', 'translation', 'product.itemsCount', 
  'Showing {{count}} products');
i18n.addResource('zh-CN', 'translation', 'product.itemsCount', 
  '显示 {{count}} 个产品');

// Use in component
const { t } = useTranslation();
<p>{t('product.itemsCount', { count: 10 })}</p>
```

### Pluralization

```typescript
// English
i18n.addResources('en', 'translation', {
  'product.count_one': '{{count}} product',
  'product.count_other': '{{count}} products',
});

// Chinese
i18n.addResources('zh-CN', 'translation', {
  'product.count': '{{count}} 个产品',
});

// Use in component
const { t } = useTranslation();
<p>{t('product.count', { count: 5 })}</p>
```

### Default Values

```typescript
// Provide default value if translation key doesn't exist
const { t } = useTranslation();
<p>{t('product.unknownKey', { defaultValue: 'Fallback Text' })}</p>
```

## Language Switching

### Built-in Language Switcher

The framework includes a language switcher in the header:

```typescript
// Automatically included in Layout component
import { LanguageSwitch } from 'ez-console';
```

### Programmatic Language Change

```typescript
import { useTranslation } from 'ez-console';

export const LanguageSelector: React.FC = () => {
  const { i18n } = useTranslation();

  return (
    <Select
      value={i18n.language}
      onChange={(lang) => i18n.changeLanguage(lang)}
    >
      <Option value="en">English</Option>
      <Option value="zh-CN">中文</Option>
      <Option value="fr">Français</Option>
    </Select>
  );
};
```

## Supported Languages

EZ-Console includes built-in translations for:

- English (en-US)
- Chinese Simplified (zh-CN)
- French (fr-FR)
- German (de-DE)
- Spanish (es-ES)
- Swedish (sv-SE)
- Arabic (ar-AE)

## Translation Organization

### Naming Convention

Use dot notation with hierarchy:

```
module.component.action
module.component.field
module.component.message
```

Examples:
```
product.list.title
product.form.name
product.form.submit
product.message.createSuccess
user.profile.title
user.profile.email
common.save
common.cancel
```

### Common Translations

Keep common translations in a shared namespace:

```typescript
i18n.addResources('en', 'translation', {
  'common.save': 'Save',
  'common.cancel': 'Cancel',
  'common.edit': 'Edit',
  'common.delete': 'Delete',
  'common.create': 'Create',
  'common.update': 'Update',
  'common.search': 'Search',
  'common.reset': 'Reset',
  'common.confirm': 'Confirm',
  'common.submit': 'Submit',
  'common.loading': 'Loading...',
  'common.success': 'Success',
  'common.error': 'Error',
});
```

## Backend i18n

For backend error messages, always use English:

```go
// ✅ Good
util.RespondWithError(ctx, util.NewErrorMessage("E4001", "Product name is required"))

// ❌ Bad
util.RespondWithError(ctx, util.NewErrorMessage("E4001", "产品名称必填"))
```

Client-side can translate error codes if needed:

```typescript
const errorMessages = {
  'E4001': t('errors.badRequest'),
  'E4011': t('errors.unauthorized'),
  'E4031': t('errors.forbidden'),
  'E5001': t('errors.serverError'),
};
```

## Date and Number Formatting

### Date Formatting

```typescript
import { format } from 'date-fns';
import { enUS, zhCN } from 'date-fns/locale';

const locales = { 'en': enUS, 'zh-CN': zhCN };

const formatDate = (date: Date, language: string) => {
  return format(date, 'PPP', { locale: locales[language] });
};
```

### Number Formatting

```typescript
const formatNumber = (num: number, language: string) => {
  return new Intl.NumberFormat(language).format(num);
};

const formatCurrency = (amount: number, language: string, currency: string) => {
  return new Intl.NumberFormat(language, {
    style: 'currency',
    currency: currency,
  }).format(amount);
};
```

## Best Practices

1. **Use translation keys**: Never hardcode user-facing text
2. **Consistent naming**: Follow naming conventions
3. **Complete translations**: Provide translations for all supported languages
4. **Context**: Provide context for translators
5. **Parameters**: Use parameters for dynamic content
6. **Pluralization**: Handle plurals correctly
7. **Date/Time**: Format dates and times according to locale
8. **Numbers**: Format numbers according to locale
9. **RTL Support**: Consider right-to-left languages
10. **Testing**: Test all languages

## Testing Translations

```typescript
import { renderWithi18n } from './test-utils';

test('renders translated text', () => {
  const { getByText } = renderWithi18n(
    <ProductForm />,
    { language: 'en' }
  );
  
  expect(getByText('Product Name')).toBeInTheDocument();
});

test('renders Chinese translation', () => {
  const { getByText } = renderWithi18n(
    <ProductForm />,
    { language: 'zh-CN' }
  );
  
  expect(getByText('产品名称')).toBeInTheDocument();
});
```

## Next Steps

- Learn about [Frontend Components](./10-frontend-components.md)
- Explore [Frontend Development](./04-frontend-development.md)
- Review [Deployment](./12-deployment.md)


